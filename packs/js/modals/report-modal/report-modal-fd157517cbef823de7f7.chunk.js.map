{"version":3,"file":"packs/js/modals/report-modal/report-modal-fd157517cbef823de7f7.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/ui/components/modals/report-modal/report-modal.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/modals/report-modal/steps/confirmation-step.tsx","webpack://mangane-fe/./app/soapbox/features/report/components/status_check_box.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/modals/report-modal/steps/other-actions-step.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/modals/report-modal/steps/reason-step.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useCallback,useEffect,useMemo,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{blockAccount}from'soapbox/actions/accounts';import{submitReport,submitReportSuccess,submitReportFail}from'soapbox/actions/reports';import{expandAccountTimeline}from'soapbox/actions/timelines';import AttachmentThumbs from'soapbox/components/attachment-thumbs';import StatusContent from'soapbox/components/status_content';import{Modal,ProgressBar,Stack,Text}from'soapbox/components/ui';import AccountContainer from'soapbox/containers/account_container';import{useAccount,useAppDispatch,useAppSelector}from'soapbox/hooks';import ConfirmationStep from'./steps/confirmation-step';import OtherActionsStep from'./steps/other-actions-step';import ReasonStep from'./steps/reason-step';const messages=defineMessages({blankslate:{\"id\":\"report.reason.blankslate\",\"defaultMessage\":\"You have removed all statuses from being selected.\"},done:{\"id\":\"report.done\",\"defaultMessage\":\"Done\"},next:{\"id\":\"report.next\",\"defaultMessage\":\"Next\"},close:{\"id\":\"lightbox.close\",\"defaultMessage\":\"Close\"},placeholder:{\"id\":\"report.placeholder\",\"defaultMessage\":\"Additional comments\"},submit:{\"id\":\"report.submit\",\"defaultMessage\":\"Submit\"}});var Steps;(function(Steps){Steps[\"ONE\"]=\"ONE\";Steps[\"TWO\"]=\"TWO\";Steps[\"THREE\"]=\"THREE\";})(Steps||(Steps={}));const reportSteps={ONE:ReasonStep,TWO:OtherActionsStep,THREE:ConfirmationStep};const SelectedStatus=_ref=>{let{statusId}=_ref;const status=useAppSelector(state=>state.statuses.get(statusId));if(!status){return null;}return/*#__PURE__*/_jsx(Stack,{space:2,className:\"p-4 rounded-lg bg-gray-100 dark:bg-slate-700\"},void 0,/*#__PURE__*/_jsx(AccountContainer,{id:status.account,showProfileHoverCard:false,withLinkToProfile:false,timestamp:status.created_at,hideActions:true}),/*#__PURE__*/_jsx(StatusContent,{status:status,expanded:true,collapsable:true}),status.media_attachments.size>0&&/*#__PURE__*/_jsx(AttachmentThumbs,{media:status.media_attachments,sensitive:status.sensitive}));};const ReportModal=_ref2=>{let{onClose}=_ref2;const dispatch=useAppDispatch();const intl=useIntl();const accountId=useAppSelector(state=>state.reports.new.account_id);const account=useAccount(accountId);const isBlocked=useAppSelector(state=>state.reports.new.block);const isSubmitting=useAppSelector(state=>state.reports.new.isSubmitting);const rules=useAppSelector(state=>state.rules.items);const ruleIds=useAppSelector(state=>state.reports.new.rule_ids);const selectedStatusIds=useAppSelector(state=>state.reports.new.status_ids);const isReportingAccount=useMemo(()=>selectedStatusIds.size===0,[]);const shouldRequireRule=rules.length>0;const[currentStep,setCurrentStep]=useState(Steps.ONE);const handleSubmit=()=>{dispatch(submitReport()).then(()=>setCurrentStep(Steps.THREE)).catch(error=>dispatch(submitReportFail(error)));if(isBlocked&&account){dispatch(blockAccount(account.id));}};const handleNextStep=()=>{switch(currentStep){case Steps.ONE:setCurrentStep(Steps.TWO);break;case Steps.TWO:handleSubmit();break;case Steps.THREE:dispatch(submitReportSuccess());onClose();break;default:break;}};const renderSelectedStatuses=useCallback(()=>{switch(selectedStatusIds.size){case 0:return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 dark:bg-slate-700 p-4 rounded-lg flex items-center justify-center w-full\"},void 0,/*#__PURE__*/_jsx(Text,{theme:\"muted\"},void 0,intl.formatMessage(messages.blankslate)));default:return/*#__PURE__*/_jsx(SelectedStatus,{statusId:selectedStatusIds.first()});}},[selectedStatusIds.size]);const confirmationText=useMemo(()=>{switch(currentStep){case Steps.TWO:return intl.formatMessage(messages.submit);case Steps.THREE:return intl.formatMessage(messages.done);default:return intl.formatMessage(messages.next);}},[currentStep]);const isConfirmationButtonDisabled=useMemo(()=>{if(currentStep===Steps.THREE){return false;}return isSubmitting||shouldRequireRule&&ruleIds.isEmpty()||!isReportingAccount&&selectedStatusIds.size===0;},[currentStep,isSubmitting,shouldRequireRule,ruleIds,selectedStatusIds.size,isReportingAccount]);const calculateProgress=useCallback(()=>{switch(currentStep){case Steps.ONE:return 0.33;case Steps.TWO:return 0.66;case Steps.THREE:return 1;default:return 0;}},[currentStep]);useEffect(()=>{if(account){dispatch(expandAccountTimeline(account.id,{withReplies:true,maxId:null}));}},[account]);if(!account){return null;}const StepToRender=reportSteps[currentStep];return/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.target\",defaultMessage:\"Reporting {target}\",values:{target:/*#__PURE__*/_jsx(\"strong\",{},void 0,\"@\",account.acct)}}),onClose:onClose,cancelAction:currentStep===Steps.THREE?undefined:onClose,confirmationAction:handleNextStep,confirmationText:confirmationText,confirmationDisabled:isConfirmationButtonDisabled,skipFocus:true},void 0,/*#__PURE__*/_jsx(Stack,{space:4},void 0,/*#__PURE__*/_jsx(ProgressBar,{progress:calculateProgress()}),currentStep!==Steps.THREE&&!isReportingAccount&&renderSelectedStatuses(),/*#__PURE__*/_jsx(StepToRender,{account:account})));};export default ReportModal;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{getSoapboxConfig}from'soapbox/actions/soapbox';import{Stack,Text}from'soapbox/components/ui';import{useAppSelector}from'soapbox/hooks';const messages=defineMessages({title:{\"id\":\"report.confirmation.title\",\"defaultMessage\":\"Thanks for submitting your report.\"},content:{\"id\":\"report.confirmation.content\",\"defaultMessage\":\"If we find that this account is violating the {link} we will take further action on the matter.\"}});const termsOfServiceText=/*#__PURE__*/_jsx(FormattedMessage,{id:\"shared.tos\",defaultMessage:\"Terms of Service\"});const renderTermsOfServiceLink=href=>/*#__PURE__*/_jsx(\"a\",{href:href,target:\"_blank\",className:\"hover:underline text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-500\"},void 0,termsOfServiceText);const ConfirmationStep=_ref=>{let{account}=_ref;const intl=useIntl();const links=useAppSelector(state=>getSoapboxConfig(state).get('links'));return/*#__PURE__*/_jsx(Stack,{space:1},void 0,/*#__PURE__*/_jsx(Text,{weight:\"semibold\",tag:\"h1\",size:\"xl\"},void 0,intl.formatMessage(messages.title)),/*#__PURE__*/_jsx(Text,{},void 0,intl.formatMessage(messages.content,{link:links.get('termsOfService')?renderTermsOfServiceLink(links.get('termsOfService')):termsOfServiceText})));};export default ConfirmationStep;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.includes.js\";import noop from'lodash/noop';import React from'react';import Toggle from'react-toggle';import{toggleStatusReport}from'soapbox/actions/reports';import StatusContent from'soapbox/components/status_content';import{useAppDispatch,useAppSelector}from'soapbox/hooks';import Bundle from'../../ui/components/bundle';import{MediaGallery,Video,Audio}from'../../ui/util/async-components';const StatusCheckBox=_ref=>{let{id,disabled}=_ref;const dispatch=useAppDispatch();const status=useAppSelector(state=>state.statuses.get(id));const checked=useAppSelector(state=>state.reports.new.status_ids.includes(id));const onToggle=e=>dispatch(toggleStatusReport(id,e.target.checked));if(!status||status.reblog){return null;}let media;if(status.media_attachments.size>0){var _status$media_attachm,_status$media_attachm2;if(status.media_attachments.some(item=>item.type==='unknown')){// Do nothing\n}else if(((_status$media_attachm=status.media_attachments.get(0))===null||_status$media_attachm===void 0?void 0:_status$media_attachm.type)==='video'){const video=status.media_attachments.get(0);if(video){media=/*#__PURE__*/_jsx(Bundle,{fetchComponent:Video},void 0,Component=>/*#__PURE__*/_jsx(Component,{preview:video.preview_url,blurhash:video.blurhash,src:video.url,alt:video.description,aspectRatio:video.meta.getIn(['original','aspect']),width:239,height:110,inline:true,sensitive:status.sensitive,onOpenVideo:noop}));}}else if(((_status$media_attachm2=status.media_attachments.get(0))===null||_status$media_attachm2===void 0?void 0:_status$media_attachm2.type)==='audio'){const audio=status.media_attachments.get(0);if(audio){media=/*#__PURE__*/_jsx(Bundle,{fetchComponent:Audio},void 0,Component=>/*#__PURE__*/_jsx(Component,{src:audio.url,alt:audio.description,inline:true,sensitive:status.sensitive,onOpenAudio:noop}));}}else{media=/*#__PURE__*/_jsx(Bundle,{fetchComponent:MediaGallery},void 0,Component=>/*#__PURE__*/_jsx(Component,{media:status.media_attachments,sensitive:status.sensitive,height:110,onOpenMedia:noop}));}}return/*#__PURE__*/_jsx(\"div\",{className:\"status-check-box\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"status-check-box__status\"},void 0,/*#__PURE__*/_jsx(StatusContent,{status:status}),media),/*#__PURE__*/_jsx(\"div\",{className:\"status-check-box-toggle\"},void 0,/*#__PURE__*/_jsx(Toggle,{checked:checked,onChange:onToggle,disabled:disabled,icons:false})));};export default StatusCheckBox;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import{OrderedSet}from'immutable';import React,{useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{useDispatch}from'react-redux';import Toggle from'react-toggle';import{changeReportBlock,changeReportForward}from'soapbox/actions/reports';import{fetchRules}from'soapbox/actions/rules';import{Button,FormGroup,HStack,Stack,Text}from'soapbox/components/ui';import StatusCheckBox from'soapbox/features/report/components/status_check_box';import{useAppSelector,useFeatures}from'soapbox/hooks';import{isRemote,getDomain}from'soapbox/utils/accounts';const messages=defineMessages({addAdditionalStatuses:{\"id\":\"report.otherActions.addAdditionl\",\"defaultMessage\":\"Would you like to add additional statuses to this report?\"},addMore:{\"id\":\"report.otherActions.addMore\",\"defaultMessage\":\"Add more\"},furtherActions:{\"id\":\"report.otherActions.furtherActions\",\"defaultMessage\":\"Further actions:\"},hideAdditonalStatuses:{\"id\":\"report.otherActions.hideAdditional\",\"defaultMessage\":\"Hide additional statuses\"},otherStatuses:{\"id\":\"report.otherActions.otherStatuses\",\"defaultMessage\":\"Include other statuses?\"}});const OtherActionsStep=_ref=>{let{account}=_ref;const dispatch=useDispatch();const features=useFeatures();const intl=useIntl();const statusIds=useAppSelector(state=>OrderedSet(state.timelines.get(\"account:\".concat(account.id,\":with_replies\")).items).union(state.reports.new.status_ids));const isBlocked=useAppSelector(state=>state.reports.new.block);const isForward=useAppSelector(state=>state.reports.new.forward);const canForward=isRemote(account)&&features.federating;const isSubmitting=useAppSelector(state=>state.reports.new.isSubmitting);const[showAdditionalStatuses,setShowAdditionalStatuses]=useState(false);const handleBlockChange=event=>{dispatch(changeReportBlock(event.target.checked));};const handleForwardChange=event=>{dispatch(changeReportForward(event.target.checked));};useEffect(()=>{dispatch(fetchRules());},[]);return/*#__PURE__*/_jsx(Stack,{space:4},void 0,features.reportMultipleStatuses&&/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Text,{tag:\"h1\",size:\"xl\",weight:\"semibold\"},void 0,intl.formatMessage(messages.otherStatuses)),/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.addAdditionalStatuses)},void 0,showAdditionalStatuses?/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 dark:bg-slate-600 rounded-lg p-4\"},void 0,statusIds.map(statusId=>/*#__PURE__*/_jsx(StatusCheckBox,{id:statusId},statusId))),/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Button,{icon:require('@tabler/icons/arrows-minimize.svg'),theme:\"secondary\",size:\"sm\",onClick:()=>setShowAdditionalStatuses(false)},void 0,intl.formatMessage(messages.hideAdditonalStatuses)))):/*#__PURE__*/_jsx(Button,{icon:require('@tabler/icons/plus.svg'),theme:\"secondary\",size:\"sm\",onClick:()=>setShowAdditionalStatuses(true)},void 0,intl.formatMessage(messages.addMore)))),/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Text,{tag:\"h1\",size:\"xl\",weight:\"semibold\"},void 0,intl.formatMessage(messages.furtherActions)),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.block_hint\",defaultMessage:\"Do you also want to block this account?\"})},void 0,/*#__PURE__*/_jsx(HStack,{space:2,alignItems:\"center\"},void 0,/*#__PURE__*/_jsx(Toggle,{checked:isBlocked,onChange:handleBlockChange,icons:false,id:\"report-block\"}),/*#__PURE__*/_jsx(Text,{theme:\"muted\",tag:\"label\",size:\"sm\",htmlFor:\"report-block\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.block\",defaultMessage:\"Block {target}\",values:{target:\"@\".concat(account.get('acct'))}})))),canForward&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.forward_hint\",defaultMessage:\"The account is from another server. Send a copy of the report there as well?\"})},void 0,/*#__PURE__*/_jsx(HStack,{space:2,alignItems:\"center\"},void 0,/*#__PURE__*/_jsx(Toggle,{checked:isForward,onChange:handleForwardChange,icons:false,id:\"report-forward\",disabled:isSubmitting}),/*#__PURE__*/_jsx(Text,{theme:\"muted\",tag:\"label\",size:\"sm\",htmlFor:\"report-forward\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.forward\",defaultMessage:\"Forward to {target}\",values:{target:getDomain(account)}}))))));};export default OtherActionsStep;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/es.array.includes.js\";import classNames from'classnames';import React,{useEffect,useMemo,useRef,useState}from'react';import{defineMessages,useIntl}from'react-intl';import{useDispatch}from'react-redux';import{changeReportComment,changeReportRule}from'soapbox/actions/reports';import{fetchRules}from'soapbox/actions/rules';import{FormGroup,Stack,Text,Textarea}from'soapbox/components/ui';import{useAppSelector}from'soapbox/hooks';const messages=defineMessages({placeholder:{\"id\":\"report.placeholder\",\"defaultMessage\":\"Additional comments\"},reasonForReporting:{\"id\":\"report.reason.title\",\"defaultMessage\":\"Reason for reporting\"}});const RULES_HEIGHT=385;const ReasonStep=_props=>{const dispatch=useDispatch();const intl=useIntl();const rulesListRef=useRef(null);const[isNearBottom,setNearBottom]=useState(false);const[isNearTop,setNearTop]=useState(true);const comment=useAppSelector(state=>state.reports.new.comment);const rules=useAppSelector(state=>state.rules.items);const ruleIds=useAppSelector(state=>state.reports.new.rule_ids);const shouldRequireRule=rules.length>0;const selectedStatusIds=useAppSelector(state=>state.reports.new.status_ids);const isReportingAccount=useMemo(()=>selectedStatusIds.size===0,[]);const handleCommentChange=event=>{dispatch(changeReportComment(event.target.value));};const handleRulesScrolling=()=>{if(rulesListRef.current){const{scrollTop,scrollHeight,clientHeight}=rulesListRef.current;if(scrollTop+clientHeight>scrollHeight-24){setNearBottom(true);}else{setNearBottom(false);}if(scrollTop<24){setNearTop(true);}else{setNearTop(false);}}};const filterRuleType=rule=>{const ruleTypeToFilter=isReportingAccount?'account':'content';if(rule.rule_type){return rule.rule_type===ruleTypeToFilter;}return true;};useEffect(()=>{dispatch(fetchRules());},[]);useEffect(()=>{if(rules.length>0&&rulesListRef.current){const{clientHeight}=rulesListRef.current;if(clientHeight<=RULES_HEIGHT){setNearBottom(true);}}},[rules,rulesListRef.current]);return/*#__PURE__*/_jsx(Stack,{space:4},void 0,shouldRequireRule&&/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Text,{size:\"xl\",weight:\"semibold\",tag:\"h1\"},void 0,intl.formatMessage(messages.reasonForReporting)),/*#__PURE__*/_jsx(\"div\",{className:\"relative\"},void 0,/*#__PURE__*/React.createElement(\"div\",{style:{maxHeight:RULES_HEIGHT},className:\"rounded-lg -space-y-px overflow-y-auto\",onScroll:handleRulesScrolling,ref:rulesListRef},rules.filter(filterRuleType).map((rule,idx)=>{const isSelected=ruleIds.includes(String(rule.id));return/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"rule-\".concat(rule.id),onClick:()=>dispatch(changeReportRule(rule.id)),className:classNames({'relative border border-solid border-gray-200 dark:border-slate-900/75 hover:bg-gray-50 dark:hover:bg-slate-900/50 text-left w-full p-4 flex justify-between items-center cursor-pointer':true,'rounded-tl-lg rounded-tr-lg':idx===0,'rounded-bl-lg rounded-br-lg':idx===rules.length-1,'bg-gray-50 dark:bg-slate-900':isSelected})},idx,/*#__PURE__*/_jsx(Stack,{className:\"mr-3\"},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",size:\"sm\",weight:\"medium\",theme:isSelected?'primary':'default'},void 0,rule.text),/*#__PURE__*/_jsx(Text,{tag:\"span\",theme:\"muted\",size:\"sm\"},void 0,rule.subtext)),/*#__PURE__*/_jsx(\"input\",{name:\"reason\",type:\"checkbox\",value:rule.id,checked:isSelected,readOnly:true,className:\"h-4 w-4 cursor-pointer text-primary-600 dark:text-primary-400 border-gray-300 rounded focus:ring-primary-500\"}));})),/*#__PURE__*/_jsx(\"div\",{className:classNames('inset-x-0 top-0 flex rounded-t-lg justify-center bg-gradient-to-b from-white pb-12 pt-8 pointer-events-none dark:from-slate-900 absolute transition-opacity duration-500',{'opacity-0':isNearTop,'opacity-100':!isNearTop})}),/*#__PURE__*/_jsx(\"div\",{className:classNames('inset-x-0 bottom-0 flex rounded-b-lg justify-center bg-gradient-to-t from-white pt-12 pb-8 pointer-events-none dark:from-slate-900 absolute transition-opacity duration-500',{'opacity-0':isNearBottom,'opacity-100':!isNearBottom})}))),/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.placeholder)},void 0,/*#__PURE__*/_jsx(Textarea,{placeholder:intl.formatMessage(messages.placeholder),value:comment,onChange:handleCommentChange})));};export default ReasonStep;"],"names":["Steps","messages","title","content","termsOfServiceText","id","defaultMessage","_ref","media","_status$media_attachm","_status$media_attachm2","disabled","dispatch","status","state","statuses","get","checked","reports","new","status_ids","includes","reblog","media_attachments","size","some","item","type","fetchComponent","Component","preview","preview_url","blurhash","src","url","alt","description","aspectRatio","meta","getIn","width","height","inline","sensitive","onOpenVideo","onOpenAudio","onOpenMedia","className","onChange","e","target","icons","addAdditionalStatuses","addMore","furtherActions","hideAdditonalStatuses","otherStatuses","placeholder","reasonForReporting","blankslate","done","next","close","submit","reportSteps","ONE","_props","intl","useIntl","rulesListRef","useRef","useState","isNearBottom","setNearBottom","isNearTop","setNearTop","comment","rules","items","ruleIds","rule_ids","shouldRequireRule","length","selectedStatusIds","isReportingAccount","useMemo","useEffect","current","space","weight","tag","formatMessage","style","maxHeight","onScroll","scrollTop","scrollHeight","clientHeight","ref","filter","rule","ruleTypeToFilter","rule_type","map","idx","isSelected","String","concat","onClick","theme","text","subtext","name","value","readOnly","labelText","event","TWO","account","features","statusIds","OrderedSet","timelines","union","isBlocked","block","isForward","forward","canForward","federating","isSubmitting","showAdditionalStatuses","setShowAdditionalStatuses","reportMultipleStatuses","statusId","icon","alignItems","htmlFor","values","ge","THREE","href","links","link","SelectedStatus","showProfileHoverCard","withLinkToProfile","timestamp","created_at","hideActions","expanded","collapsable","_ref2","onClose","accountId","account_id","currentStep","setCurrentStep","renderSelectedStatuses","useCallback","first","confirmationText","isConfirmationButtonDisabled","isEmpty","calculateProgress","withReplies","maxId","StepToRender","acct","cancelAction","undefined","confirmationAction","then","catch","error","confirmationDisabled","skipFocus","progress"],"sourceRoot":""}