{"version":3,"file":"packs/js/modals/report-modal/report-modal-32a8dd0b4f8461359f53.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/ui/components/modals/report-modal/report-modal.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/modals/report-modal/steps/confirmation-step.tsx","webpack://mangane-fe/./app/soapbox/features/report/components/status_check_box.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/modals/report-modal/steps/other-actions-step.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/modals/report-modal/steps/reason-step.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useCallback,useEffect,useMemo,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{blockAccount}from'soapbox/actions/accounts';import{submitReport,submitReportSuccess,submitReportFail}from'soapbox/actions/reports';import{expandAccountTimeline}from'soapbox/actions/timelines';import AttachmentThumbs from'soapbox/components/attachment-thumbs';import StatusContent from'soapbox/components/status_content';import{Modal,ProgressBar,Stack,Text}from'soapbox/components/ui';import AccountContainer from'soapbox/containers/account_container';import{useAccount,useAppDispatch,useAppSelector}from'soapbox/hooks';import ConfirmationStep from'./steps/confirmation-step';import OtherActionsStep from'./steps/other-actions-step';import ReasonStep from'./steps/reason-step';const messages=defineMessages({blankslate:{\"id\":\"report.reason.blankslate\",\"defaultMessage\":\"You have removed all statuses from being selected.\"},done:{\"id\":\"report.done\",\"defaultMessage\":\"Done\"},next:{\"id\":\"report.next\",\"defaultMessage\":\"Next\"},close:{\"id\":\"lightbox.close\",\"defaultMessage\":\"Close\"},placeholder:{\"id\":\"report.placeholder\",\"defaultMessage\":\"Additional comments\"},submit:{\"id\":\"report.submit\",\"defaultMessage\":\"Submit\"}});var Steps;(function(Steps){Steps[\"ONE\"]=\"ONE\";Steps[\"TWO\"]=\"TWO\";Steps[\"THREE\"]=\"THREE\";})(Steps||(Steps={}));const reportSteps={ONE:ReasonStep,TWO:OtherActionsStep,THREE:ConfirmationStep};const SelectedStatus=_ref=>{let{statusId}=_ref;const status=useAppSelector(state=>state.statuses.get(statusId));if(!status){return null;}return/*#__PURE__*/_jsx(Stack,{space:2,className:\"p-4 rounded-lg bg-gray-100 dark:bg-slate-700\"},void 0,/*#__PURE__*/_jsx(AccountContainer,{id:status.account,showProfileHoverCard:false,withLinkToProfile:false,timestamp:status.created_at,hideActions:true}),/*#__PURE__*/_jsx(StatusContent,{status:status,expanded:true,collapsable:true}),status.media_attachments.size>0&&/*#__PURE__*/_jsx(AttachmentThumbs,{media:status.media_attachments,sensitive:status.sensitive}));};const ReportModal=_ref2=>{let{onClose}=_ref2;const dispatch=useAppDispatch();const intl=useIntl();const accountId=useAppSelector(state=>state.reports.new.account_id);const account=useAccount(accountId);const isBlocked=useAppSelector(state=>state.reports.new.block);const isSubmitting=useAppSelector(state=>state.reports.new.isSubmitting);const rules=useAppSelector(state=>state.rules.items);const ruleIds=useAppSelector(state=>state.reports.new.rule_ids);const selectedStatusIds=useAppSelector(state=>state.reports.new.status_ids);const isReportingAccount=useMemo(()=>selectedStatusIds.size===0,[selectedStatusIds.size]);const shouldRequireRule=rules.length>0;const[currentStep,setCurrentStep]=useState(Steps.ONE);const handleSubmit=useCallback(()=>{dispatch(submitReport()).then(()=>setCurrentStep(Steps.THREE)).catch(error=>dispatch(submitReportFail(error)));if(isBlocked&&account){dispatch(blockAccount(account.id));}},[account,dispatch,isBlocked]);const handleNextStep=useCallback(()=>{switch(currentStep){case Steps.ONE:setCurrentStep(Steps.TWO);break;case Steps.TWO:handleSubmit();break;case Steps.THREE:dispatch(submitReportSuccess());onClose();break;default:break;}},[currentStep,dispatch,handleSubmit,onClose]);const renderSelectedStatuses=useCallback(()=>{switch(selectedStatusIds.size){case 0:return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 dark:bg-slate-700 p-4 rounded-lg flex items-center justify-center w-full\"},void 0,/*#__PURE__*/_jsx(Text,{theme:\"muted\"},void 0,intl.formatMessage(messages.blankslate)));default:return/*#__PURE__*/_jsx(SelectedStatus,{statusId:selectedStatusIds.first()});}},[intl,selectedStatusIds]);const confirmationText=useMemo(()=>{switch(currentStep){case Steps.TWO:return intl.formatMessage(messages.submit);case Steps.THREE:return intl.formatMessage(messages.done);default:return intl.formatMessage(messages.next);}},[currentStep,intl]);const isConfirmationButtonDisabled=useMemo(()=>{if(currentStep===Steps.THREE){return false;}return isSubmitting||shouldRequireRule&&ruleIds.isEmpty()||!isReportingAccount&&selectedStatusIds.size===0;},[currentStep,isSubmitting,shouldRequireRule,ruleIds,selectedStatusIds.size,isReportingAccount]);const calculateProgress=useCallback(()=>{switch(currentStep){case Steps.ONE:return 0.33;case Steps.TWO:return 0.66;case Steps.THREE:return 1;default:return 0;}},[currentStep]);useEffect(()=>{if(account){dispatch(expandAccountTimeline(account.id,{withReplies:true,maxId:null}));}},[account,dispatch]);if(!account){return null;}const StepToRender=reportSteps[currentStep];return/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.target\",defaultMessage:\"Reporting {target}\",values:{target:/*#__PURE__*/_jsx(\"strong\",{},void 0,\"@\",account.acct)}}),onClose:onClose,cancelAction:currentStep===Steps.THREE?undefined:onClose,confirmationAction:handleNextStep,confirmationText:confirmationText,confirmationDisabled:isConfirmationButtonDisabled,skipFocus:true},void 0,/*#__PURE__*/_jsx(Stack,{space:4},void 0,/*#__PURE__*/_jsx(ProgressBar,{progress:calculateProgress()}),currentStep!==Steps.THREE&&!isReportingAccount&&renderSelectedStatuses(),/*#__PURE__*/_jsx(StepToRender,{account:account})));};export default ReportModal;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{getSoapboxConfig}from'soapbox/actions/soapbox';import{Stack,Text}from'soapbox/components/ui';import{useAppSelector}from'soapbox/hooks';const messages=defineMessages({title:{\"id\":\"report.confirmation.title\",\"defaultMessage\":\"Thanks for submitting your report.\"},content:{\"id\":\"report.confirmation.content\",\"defaultMessage\":\"If we find that this account is violating the {link} we will take further action on the matter.\"}});const termsOfServiceText=/*#__PURE__*/_jsx(FormattedMessage,{id:\"shared.tos\",defaultMessage:\"Terms of Service\"});const renderTermsOfServiceLink=href=>/*#__PURE__*/_jsx(\"a\",{href:href,target:\"_blank\",className:\"hover:underline text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-500\"},void 0,termsOfServiceText);const ConfirmationStep=_ref=>{let{account}=_ref;const intl=useIntl();const links=useAppSelector(state=>getSoapboxConfig(state).get('links'));return/*#__PURE__*/_jsx(Stack,{space:1},void 0,/*#__PURE__*/_jsx(Text,{weight:\"semibold\",tag:\"h1\",size:\"xl\"},void 0,intl.formatMessage(messages.title)),/*#__PURE__*/_jsx(Text,{},void 0,intl.formatMessage(messages.content,{link:links.get('termsOfService')?renderTermsOfServiceLink(links.get('termsOfService')):termsOfServiceText})));};export default ConfirmationStep;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.includes.js\";import React from'react';import{toggleStatusReport}from'soapbox/actions/reports';import StatusContent from'soapbox/components/status_content';import{Checkbox}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';const StatusCheckBox=_ref=>{let{id,disabled}=_ref;const dispatch=useAppDispatch();const status=useAppSelector(state=>state.statuses.get(id));const checked=useAppSelector(state=>state.reports.new.status_ids.includes(id));const onToggle=e=>dispatch(toggleStatusReport(id,e.target.checked));if(!status||status.reblog){return null;}return/*#__PURE__*/_jsx(\"label\",{className:\"flex gap-2 items-start select-none bg-gray-100 dark:bg-slate-600 rounded-lg p-2\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"status-check-box-toggle\"},void 0,/*#__PURE__*/_jsx(Checkbox,{checked:checked,onChange:onToggle,disabled:disabled})),/*#__PURE__*/_jsx(\"div\",{className:\"status-check-box__status\"},void 0,/*#__PURE__*/_jsx(StatusContent,{status:status})));};export default StatusCheckBox;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import{OrderedSet}from'immutable';import React,{useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{useDispatch}from'react-redux';import Toggle from'react-toggle';import{changeReportBlock,changeReportForward}from'soapbox/actions/reports';import{fetchRules}from'soapbox/actions/rules';import{Button,FormGroup,HStack,Stack,Text}from'soapbox/components/ui';import StatusCheckBox from'soapbox/features/report/components/status_check_box';import{useAppSelector,useFeatures}from'soapbox/hooks';import{isRemote,getDomain}from'soapbox/utils/accounts';const messages=defineMessages({addAdditionalStatuses:{\"id\":\"report.otherActions.addAdditionl\",\"defaultMessage\":\"Would you like to add additional statuses to this report?\"},addMore:{\"id\":\"report.otherActions.addMore\",\"defaultMessage\":\"Add more\"},furtherActions:{\"id\":\"report.otherActions.furtherActions\",\"defaultMessage\":\"Further actions:\"},hideAdditonalStatuses:{\"id\":\"report.otherActions.hideAdditional\",\"defaultMessage\":\"Hide additional statuses\"},otherStatuses:{\"id\":\"report.otherActions.otherStatuses\",\"defaultMessage\":\"Include other statuses?\"}});const OtherActionsStep=_ref=>{let{account}=_ref;const dispatch=useDispatch();const features=useFeatures();const intl=useIntl();const selectedStatusIds=useAppSelector(state=>state.reports.new.status_ids);const statusIds=useAppSelector(state=>OrderedSet(state.timelines.get(\"account:\".concat(account.id,\":with_replies\")).items).union(state.reports.new.status_ids));const isBlocked=useAppSelector(state=>state.reports.new.block);const isForward=useAppSelector(state=>state.reports.new.forward);const canForward=isRemote(account)&&features.federating;const isSubmitting=useAppSelector(state=>state.reports.new.isSubmitting);const[showAdditionalStatuses,setShowAdditionalStatuses]=useState(false);const handleBlockChange=event=>{dispatch(changeReportBlock(event.target.checked));};const handleForwardChange=event=>{dispatch(changeReportForward(event.target.checked));};useEffect(()=>{dispatch(fetchRules());},[dispatch]);return/*#__PURE__*/_jsx(Stack,{space:4},void 0,features.reportMultipleStatuses&&/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Text,{tag:\"h1\",size:\"xl\",weight:\"semibold\"},void 0,intl.formatMessage(messages.otherStatuses)),/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.addAdditionalStatuses)},void 0,showAdditionalStatuses?/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-4\"},void 0,statusIds.map(statusId=>/*#__PURE__*/_jsx(StatusCheckBox,{id:statusId,disabled:statusId===selectedStatusIds.first()},statusId))),/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Button,{icon:require('@tabler/icons/arrows-minimize.svg'),theme:\"secondary\",size:\"sm\",onClick:()=>setShowAdditionalStatuses(false)},void 0,intl.formatMessage(messages.hideAdditonalStatuses)))):/*#__PURE__*/_jsx(Button,{icon:require('@tabler/icons/plus.svg'),theme:\"secondary\",size:\"sm\",onClick:()=>setShowAdditionalStatuses(true)},void 0,intl.formatMessage(messages.addMore)))),/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Text,{tag:\"h1\",size:\"xl\",weight:\"semibold\"},void 0,intl.formatMessage(messages.furtherActions)),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.block_hint\",defaultMessage:\"Do you also want to block this account?\"})},void 0,/*#__PURE__*/_jsx(HStack,{space:2,alignItems:\"center\"},void 0,/*#__PURE__*/_jsx(Toggle,{checked:isBlocked,onChange:handleBlockChange,icons:false,id:\"report-block\"}),/*#__PURE__*/_jsx(Text,{theme:\"muted\",tag:\"label\",size:\"sm\",htmlFor:\"report-block\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.block\",defaultMessage:\"Block {target}\",values:{target:\"@\".concat(account.get('acct'))}})))),canForward&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.forward_hint\",defaultMessage:\"The account is from another server. Send a copy of the report there as well?\"})},void 0,/*#__PURE__*/_jsx(HStack,{space:2,alignItems:\"center\"},void 0,/*#__PURE__*/_jsx(Toggle,{checked:isForward,onChange:handleForwardChange,icons:false,id:\"report-forward\",disabled:isSubmitting}),/*#__PURE__*/_jsx(Text,{theme:\"muted\",tag:\"label\",size:\"sm\",htmlFor:\"report-forward\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.forward\",defaultMessage:\"Forward to {target}\",values:{target:getDomain(account)}}))))));};export default OtherActionsStep;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/es.array.includes.js\";import classNames from'classnames';import React,{useCallback,useEffect,useMemo,useRef,useState}from'react';import{defineMessages,useIntl}from'react-intl';import{useDispatch}from'react-redux';import{changeReportComment,changeReportRule}from'soapbox/actions/reports';import{fetchRules}from'soapbox/actions/rules';import{FormGroup,Stack,Text,Textarea}from'soapbox/components/ui';import{useAppSelector}from'soapbox/hooks';const messages=defineMessages({placeholder:{\"id\":\"report.placeholder\",\"defaultMessage\":\"Additional comments\"},placeholderDescription:{\"id\":\"report.placeholder-description\",\"defaultMessage\":\"Please explain the reason of your report\"},reasonForReporting:{\"id\":\"report.reason.title\",\"defaultMessage\":\"Reason for reporting\"}});const RULES_HEIGHT=385;const ReasonStep=_props=>{const dispatch=useDispatch();const intl=useIntl();const rulesListRef=useRef(null);const[isNearBottom,setNearBottom]=useState(false);const[isNearTop,setNearTop]=useState(true);const comment=useAppSelector(state=>state.reports.new.comment);const rules=useAppSelector(state=>state.rules.items);const ruleIds=useAppSelector(state=>state.reports.new.rule_ids);const shouldRequireRule=rules.length>0;const selectedStatusIds=useAppSelector(state=>state.reports.new.status_ids);const isReportingAccount=useMemo(()=>selectedStatusIds.size===0,[selectedStatusIds.size]);const handleCommentChange=useCallback(event=>{dispatch(changeReportComment(event.target.value));},[dispatch]);const handleRulesScrolling=useCallback(()=>{if(rulesListRef.current){const{scrollTop,scrollHeight,clientHeight}=rulesListRef.current;if(scrollTop+clientHeight>scrollHeight-24){setNearBottom(true);}else{setNearBottom(false);}if(scrollTop<24){setNearTop(true);}else{setNearTop(false);}}},[]);const filterRuleType=useCallback(rule=>{const ruleTypeToFilter=isReportingAccount?'account':'content';if(rule.rule_type){return rule.rule_type===ruleTypeToFilter;}return true;},[isReportingAccount]);useEffect(()=>{dispatch(fetchRules());},[dispatch]);useEffect(()=>{if(rules.length>0&&rulesListRef.current){const{clientHeight}=rulesListRef.current;if(clientHeight<=RULES_HEIGHT){setNearBottom(true);}}},[rules]);return/*#__PURE__*/_jsx(Stack,{space:4},void 0,shouldRequireRule&&/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Text,{size:\"xl\",weight:\"semibold\",tag:\"h1\"},void 0,intl.formatMessage(messages.reasonForReporting)),/*#__PURE__*/_jsx(\"div\",{className:\"relative\"},void 0,/*#__PURE__*/React.createElement(\"div\",{style:{maxHeight:RULES_HEIGHT},className:\"rounded-lg -space-y-px overflow-y-auto\",onScroll:handleRulesScrolling,ref:rulesListRef},rules.filter(filterRuleType).map((rule,idx)=>{const isSelected=ruleIds.includes(String(rule.id));return/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"rule-\".concat(rule.id),onClick:()=>dispatch(changeReportRule(rule.id)),className:classNames({'relative border border-solid border-gray-200 dark:border-slate-900/75 hover:bg-gray-50 dark:hover:bg-slate-900/50 text-left w-full p-4 flex justify-between items-center cursor-pointer':true,'rounded-tl-lg rounded-tr-lg':idx===0,'rounded-bl-lg rounded-br-lg':idx===rules.length-1,'bg-gray-50 dark:bg-slate-900':isSelected})},idx,/*#__PURE__*/_jsx(Stack,{className:\"mr-3\"},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",size:\"sm\",weight:\"medium\",theme:isSelected?'primary':'default'},void 0,rule.text),/*#__PURE__*/_jsx(Text,{tag:\"span\",theme:\"muted\",size:\"sm\"},void 0,rule.subtext)),/*#__PURE__*/_jsx(\"input\",{name:\"reason\",type:\"checkbox\",value:rule.id,checked:isSelected,readOnly:true,className:\"h-4 w-4 cursor-pointer text-primary-600 dark:text-primary-400 border-gray-300 rounded focus:ring-primary-500\"}));})),/*#__PURE__*/_jsx(\"div\",{className:classNames('inset-x-0 top-0 flex rounded-t-lg justify-center bg-gradient-to-b from-white pb-12 pt-8 pointer-events-none dark:from-slate-900 absolute transition-opacity duration-500',{'opacity-0':isNearTop,'opacity-100':!isNearTop})}),/*#__PURE__*/_jsx(\"div\",{className:classNames('inset-x-0 bottom-0 flex rounded-b-lg justify-center bg-gradient-to-t from-white pt-12 pb-8 pointer-events-none dark:from-slate-900 absolute transition-opacity duration-500',{'opacity-0':isNearBottom,'opacity-100':!isNearBottom})}))),/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.placeholder)},void 0,/*#__PURE__*/_jsx(Textarea,{placeholder:intl.formatMessage(messages.placeholderDescription),value:comment,onChange:handleCommentChange})));};export default ReasonStep;"],"names":["Steps","messages","title","content","termsOfServiceText","id","defaultMessage","_ref","disabled","dispatch","status","state","statuses","get","checked","reports","new","status_ids","includes","reblog","className","onChange","e","target","addAdditionalStatuses","addMore","furtherActions","hideAdditonalStatuses","otherStatuses","placeholder","placeholderDescription","reasonForReporting","blankslate","done","next","close","submit","reportSteps","ONE","_props","intl","useIntl","rulesListRef","useRef","useState","isNearBottom","setNearBottom","isNearTop","setNearTop","comment","rules","items","ruleIds","rule_ids","shouldRequireRule","length","selectedStatusIds","isReportingAccount","useMemo","size","handleCommentChange","useCallback","event","value","handleRulesScrolling","current","scrollTop","scrollHeight","clientHeight","filterRuleType","rule","ruleTypeToFilter","rule_type","useEffect","space","weight","tag","formatMessage","style","maxHeight","onScroll","ref","filter","map","idx","isSelected","String","concat","onClick","theme","text","subtext","name","type","readOnly","labelText","TWO","account","features","statusIds","OrderedSet","timelines","union","isBlocked","block","isForward","forward","canForward","federating","isSubmitting","showAdditionalStatuses","setShowAdditionalStatuses","reportMultipleStatuses","statusId","first","icon","alignItems","icons","htmlFor","values","ge","THREE","href","links","link","SelectedStatus","showProfileHoverCard","withLinkToProfile","timestamp","created_at","hideActions","expanded","collapsable","media_attachments","media","sensitive","_ref2","onClose","accountId","account_id","currentStep","setCurrentStep","handleSubmit","then","catch","error","handleNextStep","renderSelectedStatuses","confirmationText","isConfirmationButtonDisabled","isEmpty","calculateProgress","withReplies","maxId","StepToRender","acct","cancelAction","undefined","confirmationAction","confirmationDisabled","skipFocus","progress"],"sourceRoot":""}