{"version":3,"file":"packs/js/modals/embed_modal-77510d1eba786be50eb6.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/ui/components/embed_modal.tsx"],"sourcesContent":["var _jsxFileName = \"/home/runner/work/Mangane/Mangane/app/soapbox/features/ui/components/embed_modal.tsx\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport api from 'soapbox/api';\nimport { Modal, Stack, Text, Input } from 'soapbox/components/ui';\nimport { useAppDispatch } from 'soapbox/hooks';\n\nconst fetchEmbed = url => {\n  return (dispatch, getState) => {\n    return api(getState).get('/api/oembed', {\n      params: {\n        url\n      }\n    });\n  };\n};\n\nconst EmbedModal = _ref => {\n  let {\n    url,\n    onError\n  } = _ref;\n  const dispatch = useAppDispatch();\n  const iframe = useRef(null);\n  const [oembed, setOembed] = useState(null);\n  useEffect(() => {\n    dispatch(fetchEmbed(url)).then(_ref2 => {\n      var _iframe$current;\n\n      let {\n        data\n      } = _ref2;\n      if (!((_iframe$current = iframe.current) !== null && _iframe$current !== void 0 && _iframe$current.contentWindow)) return;\n      setOembed(data);\n      const iframeDocument = iframe.current.contentWindow.document;\n      iframeDocument.open();\n      iframeDocument.write(data.html);\n      iframeDocument.close();\n      const innerFrame = iframeDocument.querySelector('iframe');\n      iframeDocument.body.style.margin = '0';\n\n      if (innerFrame) {\n        innerFrame.width = '100%';\n      }\n    }).catch(error => {\n      onError(error);\n    });\n  }, [!!iframe.current]);\n\n  const handleInputClick = e => {\n    e.currentTarget.select();\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    title: /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"status.embed\",\n      defaultMessage: \"Embed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 19\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    space: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    theme: \"muted\",\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"embed.instructions\",\n    defaultMessage: \"Embed this post on your website by copying the code below.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    readOnly: true,\n    value: (oembed === null || oembed === void 0 ? void 0 : oembed.html) || '',\n    onClick: handleInputClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"iframe\", {\n    className: \"inline-flex rounded-xl overflow-hidden max-w-full\",\n    frameBorder: \"0\",\n    ref: iframe,\n    sandbox: \"allow-same-origin\",\n    title: \"preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default EmbedModal;"],"names":[],"sourceRoot":""}