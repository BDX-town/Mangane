{"version":3,"file":"packs/js/modals/embed_modal-55da3fac86d2948ec7a2.chunk.js","mappings":"+KAAq2D,UAA/5C,SAAAA,GAAW,IAAAC,EAAaD,EAAI,IAAbE,EAASF,EAAI,QAAOG,GAAS,UAAuBC,GAAO,IAAAC,QAAO,MAAW,GAAmB,IAAAC,UAAS,MAA3BC,EAAM,KAACC,EAAS,KAAqmB,OAAplB,IAAAC,YAAU,WAAKN,EAA3P,SAAAF,GAAM,OAAM,SAACE,EAASO,GAAY,OAAO,QAAIA,GAAUC,IAAI,cAAc,CAACC,OAAO,CAACX,IAAG,MAA+KY,CAAWZ,IAAMa,MAAK,SAAAC,GAAQ,IAAIC,EAAoBC,EAAMF,EAAK,KAAC,GAAwC,QAAlCC,EAAgBZ,EAAOc,eAAmC,IAAlBF,GAA0BA,EAAgBG,cAAxF,CAA8GX,EAAUS,GAAM,IAAMG,EAAehB,EAAOc,QAAQC,cAAcE,SAASD,EAAeE,OAAOF,EAAeG,MAAMN,EAAKO,MAAMJ,EAAeK,QAAQ,IAAMC,EAAWN,EAAeO,cAAc,UAAUP,EAAeQ,KAAKC,MAAMC,OAAO,IAAOJ,IAAYA,EAAWK,MAAM,YAAWC,OAAM,SAAAC,GAAQ/B,EAAQ+B,QAAY,GAAG7B,EAAOc,WAAmF,OAAK,KAAM,CAACgB,OAAmB,OAAK,IAAiB,CAACC,GAAG,eAAeC,eAAe,gBAAW,GAAoB,OAAK,KAAM,CAACC,MAAM,QAAG,GAAoB,OAAK,KAAM,QAAG,GAAoB,OAAK,KAAK,CAACC,MAAM,QAAQC,KAAK,WAAM,GAAoB,OAAK,IAAiB,CAACJ,GAAG,qBAAqBC,eAAe,iEAA6E,OAAK,KAAM,CAACI,KAAK,OAAOC,UAAS,EAAKC,OAAOnC,MAAAA,OAA+B,EAAOA,EAAOiB,OAAO,GAAGmB,QAA1hB,SAAAC,GAAIA,EAAEC,cAAcC,aAA+iB,gBAAoB,SAAS,CAACC,UAAU,oDAAoDC,YAAY,IAAIC,IAAI7C,EAAO8C,QAAQ,oBAAoBhB,MAAM","sources":["webpack://mangane-fe/./app/soapbox/features/ui/components/embed_modal.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useState,useEffect,useRef}from'react';import{FormattedMessage}from'react-intl';import api from'soapbox/api';import{Modal,Stack,Text,Input}from'soapbox/components/ui';import{useAppDispatch}from'soapbox/hooks';const fetchEmbed=url=>{return(dispatch,getState)=>{return api(getState).get('/api/oembed',{params:{url}});};};const EmbedModal=_ref=>{let{url,onError}=_ref;const dispatch=useAppDispatch();const iframe=useRef(null);const[oembed,setOembed]=useState(null);useEffect(()=>{dispatch(fetchEmbed(url)).then(_ref2=>{var _iframe$current;let{data}=_ref2;if(!((_iframe$current=iframe.current)!==null&&_iframe$current!==void 0&&_iframe$current.contentWindow))return;setOembed(data);const iframeDocument=iframe.current.contentWindow.document;iframeDocument.open();iframeDocument.write(data.html);iframeDocument.close();const innerFrame=iframeDocument.querySelector('iframe');iframeDocument.body.style.margin='0';if(innerFrame){innerFrame.width='100%';}}).catch(error=>{onError(error);});},[!!iframe.current]);const handleInputClick=e=>{e.currentTarget.select();};return/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"status.embed\",defaultMessage:\"Embed\"})},void 0,/*#__PURE__*/_jsx(Stack,{space:4},void 0,/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"sm\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"embed.instructions\",defaultMessage:\"Embed this post on your website by copying the code below.\"})),/*#__PURE__*/_jsx(Input,{type:\"text\",readOnly:true,value:(oembed===null||oembed===void 0?void 0:oembed.html)||'',onClick:handleInputClick})),/*#__PURE__*/React.createElement(\"iframe\",{className:\"inline-flex rounded-xl overflow-hidden max-w-full\",frameBorder:\"0\",ref:iframe,sandbox:\"allow-same-origin\",title:\"preview\"})));};export default EmbedModal;"],"names":["_ref","url","onError","dispatch","iframe","useRef","useState","oembed","setOembed","useEffect","getState","get","params","fetchEmbed","then","_ref2","_iframe$current","data","current","contentWindow","iframeDocument","document","open","write","html","close","innerFrame","querySelector","body","style","margin","width","catch","error","title","id","defaultMessage","space","theme","size","type","readOnly","value","onClick","e","currentTarget","select","className","frameBorder","ref","sandbox"],"sourceRoot":""}