"use strict";(self.webpackChunkmangane_fe=self.webpackChunkmangane_fe||[]).push([[28],{603:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var r=a(1840),i=(a(2),a(21),a(5)),n=a.n(i),o=a(0),s=a(1826),l=a(1827),c=a(6),d=a(1850),u=a(836),f=a(811),v=a(1),m=a(1860),y=a(27),g=a(3),h=a(15),Z=a(1856),p=a(16),_=a(66),w=a(102),b=a(152),x=a(142),N=(0,a(9).Tm)(),k=(0,s.vU)({today:{id:"account.today",defaultMessage:"Today"},yesterday:{id:"account.yesterday",defaultMessage:"Yesterday"},days:{id:"account.days",defaultMessage:"Days"}}),M=function(e){var t,a=e.id,i=(0,g.CG)((function(e){return e.me})),l=(0,g.CG)((function(e){return N(e,a)})),c=(0,g.CG)((function(e){return(0,p.Gw)(e).get("autoPlayGif")})),d=i!==l.id&&(null===(t=l.relationship)||void 0===t?void 0:t.followed_by),u=o.useMemo((function(){if(!l)return 0;var e=new Date(l.last_status_at).valueOf(),t=(new Date).valueOf();return Math.floor((t-e)/1e3/60/60/24)}),[l]);return l?(0,r.Z)("div",{className:"directory__card shadow dark:bg-slate-700 flex flex-col"},void 0,d&&(0,r.Z)("div",{className:"directory__card__info"},void 0,(0,r.Z)("span",{className:"bg-white rounded p-1 mt-1 text-[8px] opacity-90 uppercase dark:text-white dark:bg-slate-800"},void 0,(0,r.Z)(Z.Z,{id:"account.follows_you",defaultMessage:"Follows you"}))),(0,r.Z)("div",{className:"directory__card__img absolute w-full"},void 0,(0,r.Z)("img",{src:c?l.header:l.header_static,alt:"",className:"parallax"})),(0,r.Z)("div",{className:"px-4 py-3 mt-[70px]"},void 0,(0,r.Z)("div",{className:"flex justify-between items-end min-h-[30px]"},void 0,(0,r.Z)(b.Z,{href:l.url,to:"/@".concat(l.acct)},void 0,(0,r.Z)(_.Z,{className:"border-solid border-4 border-white dark:border-slate-700",account:l,size:100})),(0,r.Z)("div",{className:"text-right"},void 0,(0,r.Z)(x.Z,{account:l,small:!0}))),(0,r.Z)(v.xv,{className:"mt-3 leading-5",size:"lg"},void 0,(0,r.Z)(w.Z,{account:l}))),(0,r.Z)("div",{className:"h-24 overflow-hidden px-4 py-3 grow"},void 0,(0,r.Z)(v.xv,{size:"sm",className:n()("italic account__header__content",(0===l.note.length||"<p></p>"===l.note)&&"empty"),dangerouslySetInnerHTML:{__html:l.note_emojified}})),(0,r.Z)("div",{className:"flex items-center justify-between px-4 py-3 mt-4"},void 0,(0,r.Z)("div",{},void 0,(0,r.Z)(v.xv,{theme:"primary",size:"xs"},void 0,(0,r.Z)(Z.Z,{id:"account.posts",defaultMessage:"Posts"})),(0,r.Z)(v.xv,{weight:"bold",size:"lg",className:"leading-5"},void 0,(0,r.Z)(s.BK,{value:l.statuses_count}))),(0,r.Z)("div",{className:"accounts-table__count text-right"},void 0,(0,r.Z)(v.xv,{theme:"primary",size:"xs"},void 0,(0,r.Z)(Z.Z,{id:"account.last_status",defaultMessage:"Last active"})),null===l.last_status_at?(0,r.Z)(v.xv,{weight:"bold",size:"lg",className:"leading-5"},void 0,(0,r.Z)(Z.Z,{id:"account.never_active",defaultMessage:"Never"})):(0,r.Z)(v.xv,{weight:"bold",size:"lg",className:"leading-5"},void 0,u<1&&o.createElement(Z.Z,k.today),u>=1&&u<2&&o.createElement(Z.Z,k.yesterday),u>=2&&o.createElement(o.Fragment,null,u," ",o.createElement(Z.Z,k.days)))))):null},C=function(e,t,a,r){return new(a||(a=Promise))((function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function s(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},G=function(e,t){var a,r,i,n,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){o.label=n[1];break}if(6===n[0]&&o.label<i[1]){o.label=i[1],i=n;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(n);break}i[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(e){n=[6,e],r=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},z=(0,s.vU)({title:{id:"column.directory",defaultMessage:"Browse profiles"},recentlyActive:{id:"directory.recently_active",defaultMessage:"Recently active"},newArrivals:{id:"directory.new_arrivals",defaultMessage:"New arrivals"},local:{id:"directory.local",defaultMessage:"From {domain} only"},federated:{id:"directory.federated",defaultMessage:"From known fediverse"},description:{id:"directory.description",defaultMessage:"Only accounts that have consented to appear here are displayed."}}),S=function(){var e=(0,l.Z)(),t=(0,c.I0)(),a=(0,d.TH)().search,i=new URLSearchParams(a),s=o.useState(!0),Z=s[0],p=s[1],_=(0,g.CG)((function(e){return e.user_lists.directory.items})),w=(0,g.CG)((function(e){return e.instance.get("title")})),b=(0,g.CG)((function(e){return(0,h.N$)(e.instance)})),x=(0,o.useState)(i.get("order")||"active"),N=x[0],k=x[1],S=(0,o.useState)(!!i.get("local")),E=S[0],F=S[1],T=o.useCallback((function(){return C(void 0,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:p(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,t((0,u._d)({order:N||"active",local:E||!1}))];case 2:return e.sent(),[3,4];case 3:return p(!1),[7];case 4:return[2]}}))}))}),[t,N,E]);(0,o.useEffect)((function(){T()}),[T]);var j=o.useCallback((function(){return C(void 0,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:p(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,t((0,u.$b)({order:N||"active",local:E||!1}))];case 2:return e.sent(),[3,4];case 3:return p(!1),[7];case 4:return[2]}}))}))}),[t,N,E]);return(0,r.Z)(y.Z,{icon:"address-book-o",label:e.formatMessage(z.title)},void 0,(0,r.Z)("div",{className:"my-4 text-gray-700 dark:text-gray-400"},void 0,e.formatMessage(z.description)),(0,r.Z)("div",{className:"directory__filter-form flex items-center gap-4 my-3"},void 0,(0,r.Z)("div",{className:"directory__filter-form__column flex items-center gap-2",role:"group"},void 0,(0,r.Z)(m.Z,{id:"new-arrivals",checked:"new"===N,onChange:function(e){e.target.checked?k("new"):k("active")}})," ",(0,r.Z)("label",{htmlFor:"new-arrivals"},void 0,e.formatMessage(z.newArrivals))),b.federating&&(0,r.Z)("div",{className:"directory__filter-form__column flex items-center gap-2",role:"group"},void 0,(0,r.Z)(m.Z,{id:"local",checked:E,onChange:function(e){e.target.checked?F(!0):F(!1)}})," ",(0,r.Z)("label",{htmlFor:"new-arrivals"},void 0,e.formatMessage(z.local,{domain:w})))),(0,r.Z)("div",{className:n()("directory__list")},void 0,_.map((function(e){return(0,r.Z)(M,{id:e},e)}))),Z&&(0,r.Z)("div",{className:"my-3"},void 0,(0,r.Z)(v.$j,{})),(0,r.Z)("div",{className:"mt-4 mt-3"},void 0,(0,r.Z)(f.Z,{disabled:Z,onClick:j})))}}}]);
//# sourceMappingURL=directory-b66b567c6207c535d314.chunk.js.map