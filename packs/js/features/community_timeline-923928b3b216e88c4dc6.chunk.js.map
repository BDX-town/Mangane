{"version":3,"file":"packs/js/features/community_timeline-923928b3b216e88c4dc6.chunk.js","mappings":"6OAAisBA,GAAS,QAAe,CAACC,MAAM,CAAC,GAAK,mBAAmB,eAAiB,kBAAkBC,SAAS,CAAC,GAAK,oBAAoB,eAAiB,cAAk6D,UAA53D,WAAK,IAAMC,GAAK,SAAgBC,GAAS,UAAuBC,GAAS,SAAe,SAAAC,GAAO,OAAAA,EAAMD,YAAgBE,EAAW,YAAiB,GAA+B,IAAAC,WAAS,GAAvCC,EAAY,KAACC,EAAe,KAAwBR,GAAS,UAAoBS,EAAUT,EAASU,MAAM,CAACL,EAAW,QAAQ,cAAoBM,EAAeX,EAASU,MAAM,CAACL,EAAW,QAAQ,UAAya,OAA5N,IAAAO,YAAU,WAAKV,GAAS,QAAwB,CAACO,UAAS,EAACE,eAAc,KAAI,IAAME,EAAWX,GAAS,QAAuB,CAACO,UAAS,EAACE,eAAc,KAAI,OAAM,WAAKE,OAAiB,CAACX,EAASS,EAAeF,IAA+B,gBAAoB,WAAe,MAAkB,OAAK,KAAO,CAACK,MAAMb,EAAKc,cAAcjB,EAASC,OAAOiB,aAAY,EAAKC,YAAW,QAAO,GAAoB,OAAK,MAAM,CAACC,UAAU,oDAA+C,GAAoB,OAAK,IAAc,CAACA,UAAU,QAAQC,QAAQhB,EAASJ,SAAqB,OAAK,KAAW,CAACqB,IAA4D,EAAvDb,EAA+D,IAA1C,KAA0Ec,QAAQ,WAAI,OAAAb,GAAiBD,IAAcR,MAAME,EAAKc,cAAcjB,EAASE,aAAaO,IAA2B,OAAK,IAAiB,CAACW,UAAU,OAAOI,SAASjB,EAAWkB,QAAQ,WAAI,OAAAf,GAAgB,OAAsB,OAAK,IAAc,CAACgB,UAA9+B,WAAK,OAAOtB,GAAS,QAAwB,CAACO,UAAS,EAACE,eAAc,YAAi8B,GAAoB,OAAK,IAAS,CAACc,UAAU,GAAGC,OAAOrB,EAAW,aAAaA,WAAW,GAAGqB,OAAOrB,GAAYqB,OAAOjB,EAAU,SAAS,IAAIiB,OAAOf,EAAe,mBAAmB,IAAIgB,WAApyC,SAAAC,GAAQ1B,GAAS,QAAwB,CAAC0B,MAAK,EAACnB,UAAS,EAACE,eAAc,MAAsvCkB,cAA0B,OAAK,IAAiB,CAACC,GAAG,yBAAyBC,eAAe,mFAAmFC,WAAW","sources":["webpack://mangane-fe/./app/soapbox/features/community_timeline/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{connectCommunityStream}from'soapbox/actions/streaming';import{expandCommunityTimeline}from'soapbox/actions/timelines';import PullToRefresh from'soapbox/components/pull-to-refresh';import SubNavigation from'soapbox/components/sub_navigation';import TimelineSettings from'soapbox/components/timeline_settings';import{Column,IconButton}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useSettings}from'soapbox/hooks';import Timeline from'../ui/components/timeline';const messages=defineMessages({title:{\"id\":\"column.community\",\"defaultMessage\":\"Local timeline\"},settings:{\"id\":\"settings.settings\",\"defaultMessage\":\"Settings\"}});const CommunityTimeline=()=>{const intl=useIntl();const dispatch=useAppDispatch();const instance=useAppSelector(state=>state.instance);const timelineId='community';const[showSettings,setShowSettings]=useState(false);const settings=useSettings();const onlyMedia=settings.getIn([timelineId,'other','onlyMedia']);const excludeReplies=settings.getIn([timelineId,'shows','reply']);const handleLoadMore=maxId=>{dispatch(expandCommunityTimeline({maxId,onlyMedia,excludeReplies}));};const handleRefresh=()=>{return dispatch(expandCommunityTimeline({onlyMedia,excludeReplies}));};useEffect(()=>{dispatch(expandCommunityTimeline({onlyMedia,excludeReplies}));const disconnect=dispatch(connectCommunityStream({onlyMedia,excludeReplies}));return()=>{disconnect();};},[dispatch,excludeReplies,onlyMedia]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.title),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 flex justify-between items-center\"},void 0,/*#__PURE__*/_jsx(SubNavigation,{className:\"!mb-0\",message:instance.title}),/*#__PURE__*/_jsx(IconButton,{src:!showSettings?require('@tabler/icons/chevron-down.svg'):require('@tabler/icons/chevron-up.svg'),onClick:()=>setShowSettings(!showSettings),title:intl.formatMessage(messages.settings)})),showSettings&&/*#__PURE__*/_jsx(TimelineSettings,{className:\"mb-3\",timeline:timelineId,onClose:()=>setShowSettings(false)}),/*#__PURE__*/_jsx(PullToRefresh,{onRefresh:handleRefresh},void 0,/*#__PURE__*/_jsx(Timeline,{scrollKey:\"\".concat(timelineId,\"_timeline\"),timelineId:\"\".concat(timelineId).concat(onlyMedia?':media':'').concat(excludeReplies?':exclude_replies':''),onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.community\",defaultMessage:\"The local timeline is empty. Write something publicly to get the ball rolling!\"}),divideType:\"space\"}))));};export default CommunityTimeline;"],"names":["messages","title","settings","intl","dispatch","instance","state","timelineId","useState","showSettings","setShowSettings","onlyMedia","getIn","excludeReplies","useEffect","disconnect","label","formatMessage","transparent","withHeader","className","message","src","onClick","timeline","onClose","onRefresh","scrollKey","concat","onLoadMore","maxId","emptyMessage","id","defaultMessage","divideType"],"sourceRoot":""}