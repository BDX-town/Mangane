{"version":3,"file":"packs/js/features/edit_profile-2ae3b0abed29f0adc19e.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/edit_profile/components/profile-preview.tsx","webpack://mangane-fe/./app/soapbox/features/edit_profile/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import StillImage from'soapbox/components/still_image';import{HStack,Stack,Text}from'soapbox/components/ui';import VerificationBadge from'soapbox/components/verification_badge';import{useSoapboxConfig}from'soapbox/hooks';/** Displays a preview of the user's account, including avatar, banner, etc. */const ProfilePreview=_ref=>{let{account}=_ref;const{displayFqn}=useSoapboxConfig();return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-slate-800 rounded-lg text-black dark:text-white sm:shadow dark:sm:shadow-inset overflow-hidden\"},void 0,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full h-32 md:rounded-t-lg bg-gray-200 dark:bg-slate-900/50\"},void 0,/*#__PURE__*/_jsx(StillImage,{alt:\"\",src:account.header,className:\"absolute inset-0 object-cover md:rounded-t-lg\"}))),/*#__PURE__*/_jsx(HStack,{space:3,alignItems:\"center\",className:\"p-3\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"relative\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-12 bg-gray-400 rounded-full\"},void 0,/*#__PURE__*/_jsx(StillImage,{alt:\"\",className:\"h-12 w-12 rounded-full\",src:account.avatar})),account.verified&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-1.5 -right-1.5\"},void 0,/*#__PURE__*/_jsx(VerificationBadge,{}))),/*#__PURE__*/_jsx(Stack,{className:\"truncate\"},void 0,/*#__PURE__*/_jsx(Text,{weight:\"medium\",size:\"sm\",truncate:true},void 0,account.display_name),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"sm\"},void 0,\"@\",displayFqn?account.fqn:account.acct))));};export default ProfilePreview;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url.js\";import\"core-js/modules/web.url-search-params.js\";import React,{useState,useEffect,useMemo}from'react';import{defineMessages,useIntl,FormattedMessage}from'react-intl';import{updateNotificationSettings}from'soapbox/actions/accounts';import{patchMe}from'soapbox/actions/me';import snackbar from'soapbox/actions/snackbar';import BirthdayInput from'soapbox/components/birthday_input';import List,{ListItem}from'soapbox/components/list';import{Button,Column,FileInput,Form,FormActions,FormGroup,HStack,Input,Textarea,Toggle}from'soapbox/components/ui';import Streamfield from'soapbox/components/ui/streamfield/streamfield';import{useAppSelector,useAppDispatch,useOwnAccount,useFeatures}from'soapbox/hooks';import{normalizeAccount}from'soapbox/normalizers';import resizeImage from'soapbox/utils/resize_image';import ProfilePreview from'./components/profile-preview';/**\n * Whether the user is hiding their follows and/or followers.\n * Pleroma's config is granular, but we simplify it into one setting.\n */const hidesNetwork=account=>{const{hide_followers,hide_follows,hide_followers_count,hide_follows_count}=account.pleroma.toJS();return Boolean(hide_followers&&hide_follows&&hide_followers_count&&hide_follows_count);};const messages=defineMessages({heading:{\"id\":\"column.edit_profile\",\"defaultMessage\":\"Edit profile\"},header:{\"id\":\"edit_profile.header\",\"defaultMessage\":\"Edit Profile\"},metaFieldLabel:{\"id\":\"edit_profile.fields.meta_fields.label_placeholder\",\"defaultMessage\":\"Label\"},metaFieldContent:{\"id\":\"edit_profile.fields.meta_fields.content_placeholder\",\"defaultMessage\":\"Content\"},success:{\"id\":\"edit_profile.success\",\"defaultMessage\":\"Profile saved!\"},error:{\"id\":\"edit_profile.error\",\"defaultMessage\":\"Profile update failed\"},bioPlaceholder:{\"id\":\"edit_profile.fields.bio_placeholder\",\"defaultMessage\":\"Tell us about yourself.\"},displayNamePlaceholder:{\"id\":\"edit_profile.fields.display_name_placeholder\",\"defaultMessage\":\"Name\"},websitePlaceholder:{\"id\":\"edit_profile.fields.website_placeholder\",\"defaultMessage\":\"Display a Link\"},locationPlaceholder:{\"id\":\"edit_profile.fields.location_placeholder\",\"defaultMessage\":\"Location\"},cancel:{\"id\":\"common.cancel\",\"defaultMessage\":\"Cancel\"}});/**\n * Profile metadata `name` and `value`.\n * (By default, max 4 fields and 255 characters per property/value)\n */ /** Convert an account into an update_credentials request object. */const accountToCredentials=account=>{const hideNetwork=hidesNetwork(account);return{discoverable:account.discoverable,bot:account.bot,display_name:account.display_name,note:account.source.get('note'),locked:account.locked,fields_attributes:[...account.source.get('fields',[]).toJS()],stranger_notifications:account.getIn(['pleroma','notification_settings','block_from_strangers'])===true,accepts_email_list:account.getIn(['pleroma','accepts_email_list'])===true,hide_followers:hideNetwork,hide_follows:hideNetwork,hide_followers_count:hideNetwork,hide_follows_count:hideNetwork,website:account.website,location:account.location,birthday:account.birthday};};const ProfileField=_ref=>{let{value,onChange}=_ref;const intl=useIntl();const handleChange=key=>{return e=>{onChange(_objectSpread(_objectSpread({},value),{},{[key]:e.currentTarget.value}));};};return/*#__PURE__*/_jsx(HStack,{space:2,grow:true},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",outerClassName:\"w-2/5 flex-grow\",value:value.name,onChange:handleChange('name'),placeholder:intl.formatMessage(messages.metaFieldLabel)}),/*#__PURE__*/_jsx(Input,{type:\"text\",outerClassName:\"w-3/5 flex-grow\",value:value.value,onChange:handleChange('value'),placeholder:intl.formatMessage(messages.metaFieldContent)}));};/** Edit profile page. */const EditProfile=()=>{const intl=useIntl();const dispatch=useAppDispatch();const account=useOwnAccount();const features=useFeatures();const maxFields=useAppSelector(state=>state.instance.pleroma.getIn(['metadata','fields_limits','max_fields'],4));const[isLoading,setLoading]=useState(false);const[data,setData]=useState({});const[muteStrangers,setMuteStrangers]=useState(false);useEffect(()=>{if(account){const credentials=accountToCredentials(account);const strangerNotifications=account.getIn(['pleroma','notification_settings','block_from_strangers'])===true;setData(credentials);setMuteStrangers(strangerNotifications);}},[account===null||account===void 0?void 0:account.id]);/** Set a single key in the request data. */const updateData=(key,value)=>{setData(prevData=>{return _objectSpread(_objectSpread({},prevData),{},{[key]:value});});};const handleSubmit=event=>{const promises=[];promises.push(dispatch(patchMe(data,true)));if(features.muteStrangers){promises.push(dispatch(updateNotificationSettings({block_from_strangers:muteStrangers})).catch(console.error));}setLoading(true);Promise.all(promises).then(()=>{setLoading(false);dispatch(snackbar.success(intl.formatMessage(messages.success)));}).catch(()=>{setLoading(false);dispatch(snackbar.error(intl.formatMessage(messages.error)));});event.preventDefault();};const handleCheckboxChange=key=>{return e=>{updateData(key,e.target.checked);};};const handleTextChange=key=>{return e=>{updateData(key,e.target.value);};};const handleBirthdayChange=date=>{updateData('birthday',date);};const handleHideNetworkChange=e=>{const hide=e.target.checked;setData(prevData=>{return _objectSpread(_objectSpread({},prevData),{},{hide_followers:hide,hide_follows:hide,hide_followers_count:hide,hide_follows_count:hide});});};const handleFileChange=(name,maxPixels)=>{return e=>{var _e$target$files;const f=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files.item(0);if(!f)return;resizeImage(f,maxPixels).then(file=>{updateData(name,file);}).catch(console.error);};};const handleFieldsChange=fields=>{updateData('fields_attributes',fields);};const handleAddField=()=>{const oldFields=data.fields_attributes||[];const fields=[...oldFields,{name:'',value:''}];updateData('fields_attributes',fields);};const handleRemoveField=i=>{const oldFields=data.fields_attributes||[];const fields=[...oldFields];fields.splice(i,1);updateData('fields_attributes',fields);};/** Memoized avatar preview URL. */const avatarUrl=useMemo(()=>{return data.avatar?URL.createObjectURL(data.avatar):account===null||account===void 0?void 0:account.avatar;},[data.avatar,account===null||account===void 0?void 0:account.avatar]);/** Memoized header preview URL. */const headerUrl=useMemo(()=>{return data.header?URL.createObjectURL(data.header):account===null||account===void 0?void 0:account.header;},[data.header,account===null||account===void 0?void 0:account.header]);/** Preview account data. */const previewAccount=useMemo(()=>{return normalizeAccount(_objectSpread(_objectSpread(_objectSpread({},account===null||account===void 0?void 0:account.toJS()),data),{},{avatar:avatarUrl,header:headerUrl}));},[account===null||account===void 0?void 0:account.id,data.display_name,avatarUrl,headerUrl]);return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.header)},void 0,/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.display_name_label\",defaultMessage:\"Display name\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",value:data.display_name,onChange:handleTextChange('display_name'),placeholder:intl.formatMessage(messages.displayNamePlaceholder)})),features.birthdays&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.birthday_label\",defaultMessage:\"Birthday\"})},void 0,/*#__PURE__*/_jsx(BirthdayInput,{value:data.birthday,onChange:handleBirthdayChange})),features.accountLocation&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.location_label\",defaultMessage:\"Location\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",value:data.location,onChange:handleTextChange('location'),placeholder:intl.formatMessage(messages.locationPlaceholder)})),features.accountWebsite&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.website_label\",defaultMessage:\"Website\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",value:data.website,onChange:handleTextChange('website'),placeholder:intl.formatMessage(messages.websitePlaceholder)})),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.bio_label\",defaultMessage:\"Bio\"})},void 0,/*#__PURE__*/_jsx(Textarea,{value:data.note,onChange:handleTextChange('note'),autoComplete:\"off\",placeholder:intl.formatMessage(messages.bioPlaceholder)})),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\"},void 0,/*#__PURE__*/_jsx(ProfilePreview,{account:previewAccount}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\"},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.header_label\",defaultMessage:\"Choose Background Picture\"}),hintText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.header\",defaultMessage:\"PNG, GIF or JPG. Will be downscaled to {size}\",values:{size:'1920x1080px'}})},void 0,/*#__PURE__*/_jsx(FileInput,{onChange:handleFileChange('header',1920*1080)})),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.avatar_label\",defaultMessage:\"Choose Profile Picture\"}),hintText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.avatar\",defaultMessage:\"PNG, GIF or JPG. Will be downscaled to {size}\",values:{size:'400x400px'}})},void 0,/*#__PURE__*/_jsx(FileInput,{onChange:handleFileChange('avatar',400*400)})))),/*#__PURE__*/_jsx(List,{},void 0,features.followRequests&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.locked_label\",defaultMessage:\"Lock account\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.locked\",defaultMessage:\"Requires you to manually approve followers\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.locked,onChange:handleCheckboxChange('locked')})),features.hideNetwork&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.hide_network_label\",defaultMessage:\"Hide network\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.hide_network\",defaultMessage:\"Who you follow and who follows you will not be shown on your profile\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:account?hidesNetwork(account):false,onChange:handleHideNetworkChange})),features.bots&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.bot_label\",defaultMessage:\"This is a bot account\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.bot\",defaultMessage:\"This account mainly performs automated actions and might not be monitored\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.bot,onChange:handleCheckboxChange('bot')})),features.muteStrangers&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.stranger_notifications_label\",defaultMessage:\"Block notifications from strangers\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.stranger_notifications\",defaultMessage:\"Only show notifications from people you follow\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:muteStrangers,onChange:e=>setMuteStrangers(e.target.checked)})),features.profileDirectory&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.discoverable_label\",defaultMessage:\"Allow account discovery\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.discoverable\",defaultMessage:\"Display account in profile directory and allow indexing by external services\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.discoverable,onChange:handleCheckboxChange('discoverable')})),features.emailList&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.accepts_email_list_label\",defaultMessage:\"Subscribe to newsletter\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.accepts_email_list\",defaultMessage:\"Opt-in to news and marketing updates.\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.accepts_email_list,onChange:handleCheckboxChange('accepts_email_list')}))),features.profileFields&&/*#__PURE__*/_jsx(Streamfield,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.meta_fields_label\",defaultMessage:\"Profile fields\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.meta_fields\",defaultMessage:\"You can have up to {count, plural, one {# custom field} other {# custom fields}} displayed on your profile.\",values:{count:maxFields}}),values:data.fields_attributes||[],onChange:handleFieldsChange,onAddItem:handleAddField,onRemoveItem:handleRemoveField,component:ProfileField,maxItems:maxFields}),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{to:\"/settings\",theme:\"ghost\"},void 0,intl.formatMessage(messages.cancel)),/*#__PURE__*/_jsx(Button,{theme:\"primary\",type:\"submit\",disabled:isLoading},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.save\",defaultMessage:\"Save\"})))));};export default EditProfile;"],"names":["_ref","account","displayFqn","className","alt","src","header","space","alignItems","avatar","verified","weight","size","truncate","display_name","theme","fqn","acct","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","hidesNetwork","pleroma","toJS","hide_followers","hide_follows","hide_followers_count","hide_follows_count","Boolean","messages","heading","metaFieldLabel","metaFieldContent","success","error","bioPlaceholder","displayNamePlaceholder","websitePlaceholder","locationPlaceholder","cancel","ProfileField","value","onChange","intl","useIntl","handleChange","e","currentTarget","grow","type","outerClassName","name","placeholder","formatMessage","dispatch","features","maxFields","state","instance","getIn","useState","isLoading","setLoading","data","setData","muteStrangers","setMuteStrangers","useEffect","credentials","hideNetwork","discoverable","bot","note","get","locked","fields_attributes","stranger_notifications","accepts_email_list","website","location","birthday","accountToCredentials","strangerNotifications","id","updateData","prevData","handleCheckboxChange","checked","handleTextChange","handleFileChange","maxPixels","_e$target$files","f","files","item","then","file","catch","console","avatarUrl","useMemo","URL","createObjectURL","headerUrl","previewAccount","label","onSubmit","event","promises","block_from_strangers","Promise","all","snackbar","preventDefault","labelText","defaultMessage","birthdays","date","accountLocation","accountWebsite","autoComplete","hintText","values","followRequests","hint","hide","bots","profileDirectory","emailList","profileFields","count","fields","onAddItem","oldFields","onRemoveItem","splice","component","maxItems","to","disabled"],"sourceRoot":""}