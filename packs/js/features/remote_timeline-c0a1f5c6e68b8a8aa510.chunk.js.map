{"version":3,"file":"packs/js/features/remote_timeline-c0a1f5c6e68b8a8aa510.chunk.js","mappings":"+NAAiiBA,GAAS,QAAe,CAACC,MAAM,CAAC,GAAK,iCAAiC,eAAiB,iDAA+8C,UAA71C,SAAAC,GAAW,IAAAC,EAAQD,EAAI,OAAOE,GAAK,SAAgBC,GAAS,UAAuBC,EAASH,MAAAA,OAA+B,EAAOA,EAAOG,SAAeC,GAAS,UAAoBC,GAAO,IAAAC,QAAO,MAAYC,EAAW,SAAeC,IAAYJ,EAASK,MAAM,CAAC,SAAS,QAAQ,cAAoBC,EAAW,WAAQL,EAAOM,SAASN,EAAOM,WAA0W,OAAnQ,IAAAC,YAAU,WAAuF,GAAlFF,IAAaR,GAAS,QAAqBC,EAAS,CAACK,UAAS,EAACK,WAAMC,OAAiB,QAASC,OAAOC,YAAgF,OAAnEX,EAAOM,QAAQT,GAAS,QAAoBC,EAAS,CAACK,UAAS,KAAU,WAAKE,IAAaL,EAAOM,QAAQ,QAAU,CAACH,KAA+B,OAAK,MAAM,CAACS,UAAU,aAAQ,GAAoB,OAAK,IAAO,CAACC,MAAMf,EAASgB,QAAQlB,EAAKmB,cAAcvB,EAASC,MAAM,CAACK,SAAQ,IAAGkB,aAAY,EAAKC,YAAW,QAAO,EAAOnB,IAAuB,OAAK,IAAkB,CAACoB,KAAKpB,KAAwB,OAAK,IAAS,CAACqB,UAAU,GAAGC,OAAOlB,EAAW,KAAKkB,OAAOtB,EAAS,aAAaI,WAAW,GAAGkB,OAAOlB,GAAYkB,OAAOjB,EAAU,SAAS,GAAG,KAAKiB,OAAOtB,GAAUuB,WAAzvB,SAAAb,GAAQX,GAAS,QAAqBC,EAAS,CAACU,MAAK,EAACL,UAAS,MAAotBmB,cAA0B,OAAK,IAAiB,CAACC,GAAG,sBAAsBC,eAAe,8EAA8EC,OAAO,CAAC3B,SAAQ,KAAI4B,WAAW,c,kHCAn/DC,EAAe,SAAAC,GAA0C,OAAnB,QAAYA,GAAuBxB,MAAM,CAAC,kBAAkB,iB,cCAoPyB,GAAkB,E,KAAA,MAA8BrC,GAAS,QAAe,CAACsC,QAAQ,CAAC,GAAK,2BAA2B,eAAiB,cAAcC,UAAU,CAAC,GAAK,6BAA6B,eAAiB,kBAAgwB,EAA7oB,SAAArC,GAAW,IAAAwB,EAAMxB,EAAI,KAAOE,GAAK,EAAAoC,EAAA,KAAgBnC,GAAS,UAAuBE,GAAS,UAAoBkC,GAAe,SAAe,SAAAL,GAAO,OAAAC,EAAkBD,EAAMV,MAAagB,EAAOnC,EAASK,MAAM,CAAC,kBAAkB,gBAAgB+B,SAASjB,GAAsG,OAAIe,GAA8C,OAAK,KAAO,CAACxC,MAAMwC,EAAeG,IAAI,QAAQC,cAA5K,WAA+CxC,EAAtCqC,EDA9mB,SAAAhB,GAAM,gBAACrB,EAASyC,GAAY,IAAMV,EAAMU,IAAiBC,EAAYZ,EAAeC,GAAO,OAAO/B,GAAS,QAAc,CAAC,kBAAkB,eAAe0C,EAAYC,OAAOtB,MCA+ea,CAAUb,GDA52B,SAAAA,GAAM,gBAACrB,EAASyC,GAAY,IAAMV,EAAMU,IAAiBC,EAAYZ,EAAeC,GAAO,OAAO/B,GAAS,QAAc,CAAC,kBAAkB,eAAe0C,EAAYE,IAAIvB,MCAypBY,CAAQZ,KAAsKwB,WAAkB,EAAPR,EAAe,IAAwC,KAAyBS,YAAY/C,EAAKmB,cAAcmB,EAAO1C,EAASuC,UAAUvC,EAASsC,QAAQ,CAACZ,KAAI,MAA5Q,O,kHCAtjBW,GAAkB,E,KAAA,MAA8BrC,GAAS,QAAe,CAACoD,eAAe,CAAC,GAAK,kCAAkC,eAAiB,qBAA46B,UAAh0B,SAAAlD,GAAW,IAAAwB,EAAMxB,EAAI,KAAOE,GAAK,SAAgBC,GAAS,UAAuBgD,GAAQ,UAAsBZ,GAAe,SAAe,SAAAL,GAAO,OAAAC,EAAkBD,EAAMV,MAAiP4B,EAAhI,CAAC,CAACC,KAAKnD,EAAKmB,cAAcvB,EAASoD,gBAAgBI,OAAlI,WAAKnD,GAAS,QAAU,kBAAkB,CAACqB,KAAI,MAA+G+B,KAAK,EAAQ,OAAoD,OAAmB,OAAK,KAAO,CAACxD,OAAmB,OAAK,IAAiB,CAAC8B,GAAG,2CAA2CC,eAAe,4BAA4BwB,OAAOH,MAAAA,GAAkCA,EAAQK,OAAmB,OAAK,IAAa,CAACC,MAAML,EAAKM,IAAI,EAAQ,YAAqC3C,QAAW,GAAoB,OAAK,IAAqB,CAACwB,eAAeA","sources":["webpack://mangane-fe/./app/soapbox/features/remote_timeline/index.tsx","webpack://mangane-fe/./app/soapbox/actions/remote_timeline.ts","webpack://mangane-fe/./app/soapbox/features/ui/components/instance_info_panel.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/instance_moderation_panel.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React,{useEffect,useRef}from'react';import{defineMessages,useIntl,FormattedMessage}from'react-intl';import{connectRemoteStream}from'soapbox/actions/streaming';import{expandRemoteTimeline}from'soapbox/actions/timelines';import Column from'soapbox/features/ui/components/column';import{useAppDispatch,useSettings}from'soapbox/hooks';import{isMobile}from'soapbox/is_mobile';import Timeline from'../ui/components/timeline';import PinnedHostsPicker from'./components/pinned_hosts_picker';const messages=defineMessages({title:{\"id\":\"remote_timeline.filter_message\",\"defaultMessage\":\"You are viewing the timeline of {instance}.\"}});/** View statuses from a remote instance. */const RemoteTimeline=_ref=>{let{params}=_ref;const intl=useIntl();const dispatch=useAppDispatch();const instance=params===null||params===void 0?void 0:params.instance;const settings=useSettings();const stream=useRef(null);const timelineId='remote';const onlyMedia=!!settings.getIn(['remote','other','onlyMedia']);const disconnect=()=>{if(stream.current){stream.current();}};const handleLoadMore=maxId=>{dispatch(expandRemoteTimeline(instance,{maxId,onlyMedia}));};useEffect(()=>{disconnect();dispatch(expandRemoteTimeline(instance,{onlyMedia,maxId:undefined}));if(!isMobile(window.innerWidth)){stream.current=dispatch(connectRemoteStream(instance,{onlyMedia}));return()=>{disconnect();stream.current=null;};}},[onlyMedia]);return/*#__PURE__*/_jsx(\"div\",{className:\"pt-3\"},void 0,/*#__PURE__*/_jsx(Column,{label:instance,heading:intl.formatMessage(messages.title,{instance}),transparent:true,withHeader:false},void 0,instance&&/*#__PURE__*/_jsx(PinnedHostsPicker,{host:instance}),/*#__PURE__*/_jsx(Timeline,{scrollKey:\"\".concat(timelineId,\"_\").concat(instance,\"_timeline\"),timelineId:\"\".concat(timelineId).concat(onlyMedia?':media':'',\":\").concat(instance),onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.remote\",defaultMessage:\"There is nothing here! Manually follow users from {instance} to fill it up.\",values:{instance}}),divideType:\"space\"})));};export default RemoteTimeline;","import{getSettings,changeSetting}from'soapbox/actions/settings';const getPinnedHosts=state=>{const settings=getSettings(state);return settings.getIn(['remote_timeline','pinnedHosts']);};const pinHost=host=>(dispatch,getState)=>{const state=getState();const pinnedHosts=getPinnedHosts(state);return dispatch(changeSetting(['remote_timeline','pinnedHosts'],pinnedHosts.add(host)));};const unpinHost=host=>(dispatch,getState)=>{const state=getState();const pinnedHosts=getPinnedHosts(state);return dispatch(changeSetting(['remote_timeline','pinnedHosts'],pinnedHosts.remove(host)));};export{pinHost,unpinHost};","'use strict';import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.includes.js\";import React from'react';import{useIntl,defineMessages}from'react-intl';import{pinHost,unpinHost}from'soapbox/actions/remote_timeline';import{Widget}from'soapbox/components/ui';import{useAppSelector,useAppDispatch,useSettings}from'soapbox/hooks';import{makeGetRemoteInstance}from'soapbox/selectors';const getRemoteInstance=makeGetRemoteInstance();const messages=defineMessages({pinHost:{\"id\":\"remote_instance.pin_host\",\"defaultMessage\":\"Pin {host}\"},unpinHost:{\"id\":\"remote_instance.unpin_host\",\"defaultMessage\":\"Unpin {host}\"}});/** Widget that displays information about a remote instance to users. */const InstanceInfoPanel=_ref=>{let{host}=_ref;const intl=useIntl();const dispatch=useAppDispatch();const settings=useSettings();const remoteInstance=useAppSelector(state=>getRemoteInstance(state,host));const pinned=settings.getIn(['remote_timeline','pinnedHosts']).includes(host);const handlePinHost=()=>{if(!pinned){dispatch(pinHost(host));}else{dispatch(unpinHost(host));}};if(!remoteInstance)return null;return/*#__PURE__*/_jsx(Widget,{title:remoteInstance.get('host'),onActionClick:handlePinHost,actionIcon:pinned?require('@tabler/icons/pinned-off.svg'):require('@tabler/icons/pin.svg'),actionTitle:intl.formatMessage(pinned?messages.unpinHost:messages.pinHost,{host})});};export default InstanceInfoPanel;","'use strict';import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{useIntl,defineMessages,FormattedMessage}from'react-intl';import{openModal}from'soapbox/actions/modals';import{Widget}from'soapbox/components/ui';import DropdownMenu from'soapbox/containers/dropdown_menu_container';import InstanceRestrictions from'soapbox/features/federation_restrictions/components/instance_restrictions';import{useAppSelector,useAppDispatch,useOwnAccount}from'soapbox/hooks';import{makeGetRemoteInstance}from'soapbox/selectors';const getRemoteInstance=makeGetRemoteInstance();const messages=defineMessages({editFederation:{\"id\":\"remote_instance.edit_federation\",\"defaultMessage\":\"Edit federation\"}});/** Widget for moderators to manage a remote instance. */const InstanceModerationPanel=_ref=>{let{host}=_ref;const intl=useIntl();const dispatch=useAppDispatch();const account=useOwnAccount();const remoteInstance=useAppSelector(state=>getRemoteInstance(state,host));const handleEditFederation=()=>{dispatch(openModal('EDIT_FEDERATION',{host}));};const makeMenu=()=>{return[{text:intl.formatMessage(messages.editFederation),action:handleEditFederation,icon:require('@tabler/icons/edit.svg')}];};const menu=makeMenu();return/*#__PURE__*/_jsx(Widget,{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"remote_instance.federation_panel.heading\",defaultMessage:\"Federation Restrictions\"}),action:account!==null&&account!==void 0&&account.admin?/*#__PURE__*/_jsx(DropdownMenu,{items:menu,src:require('@tabler/icons/dots-vertical.svg')}):undefined},void 0,/*#__PURE__*/_jsx(InstanceRestrictions,{remoteInstance:remoteInstance}));};export default InstanceModerationPanel;"],"names":["messages","title","_ref","params","intl","dispatch","instance","settings","stream","useRef","timelineId","onlyMedia","getIn","disconnect","current","useEffect","maxId","undefined","window","innerWidth","className","label","heading","formatMessage","transparent","withHeader","host","scrollKey","concat","onLoadMore","emptyMessage","id","defaultMessage","values","divideType","getPinnedHosts","state","getRemoteInstance","pinHost","unpinHost","useIntl","remoteInstance","pinned","includes","get","onActionClick","getState","pinnedHosts","remove","add","actionIcon","actionTitle","editFederation","account","menu","text","action","icon","admin","items","src"],"sourceRoot":""}