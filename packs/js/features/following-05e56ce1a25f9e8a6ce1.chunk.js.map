{"version":3,"file":"packs/js/features/following-05e56ce1a25f9e8a6ce1.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/following/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import debounce from'lodash/debounce';import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{fetchAccount,fetchFollowing,expandFollowing,fetchAccountByUsername}from'soapbox/actions/accounts';import MissingIndicator from'soapbox/components/missing_indicator';import ScrollableList from'soapbox/components/scrollable_list';import{Spinner}from'soapbox/components/ui';import AccountContainer from'soapbox/containers/account_container';import{findAccountByUsername}from'soapbox/selectors';import{getFollowDifference}from'soapbox/utils/accounts';import{getFeatures}from'soapbox/utils/features';import Column from'../ui/components/column';const messages=defineMessages({heading:{\"id\":\"column.following\",\"defaultMessage\":\"Following\"}});const mapStateToProps=(state,_ref)=>{var _state$user_lists$fol,_state$user_lists$fol2;let{params,withReplies=false}=_ref;const username=params.username||'';const me=state.get('me');const accountFetchError=(state.getIn(['accounts',-1,'username'])||'').toLowerCase()===username.toLowerCase();const features=getFeatures(state.get('instance'));let accountId=-1;if(accountFetchError){accountId=null;}else{const account=findAccountByUsername(state,username);accountId=account?account.getIn(['id'],null):-1;}const diffCount=getFollowDifference(state,accountId,'following');const isBlocked=state.getIn(['relationships',accountId,'blocked_by'],false);const unavailable=me===accountId?false:isBlocked&&!features.blockersVisible;return{accountId,unavailable,isAccount:!!state.getIn(['accounts',accountId]),accountIds:(_state$user_lists$fol=state.user_lists.following.get(accountId))===null||_state$user_lists$fol===void 0?void 0:_state$user_lists$fol.items,hasMore:!!((_state$user_lists$fol2=state.user_lists.following.get(accountId))!==null&&_state$user_lists$fol2!==void 0&&_state$user_lists$fol2.next),diffCount};};let Following=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_class2=class Following extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"handleLoadMore\",debounce(()=>{if(this.props.accountId&&this.props.accountId!==-1){this.props.dispatch(expandFollowing(this.props.accountId));}},300,{leading:true}));}componentDidMount(){const{params:{username},accountId}=this.props;if(accountId&&accountId!==-1){this.props.dispatch(fetchAccount(accountId));this.props.dispatch(fetchFollowing(accountId));}else{this.props.dispatch(fetchAccountByUsername(username));}}componentDidUpdate(prevProps){const{accountId,dispatch}=this.props;if(accountId&&accountId!==-1&&accountId!==prevProps.accountId&&accountId){dispatch(fetchAccount(accountId));dispatch(fetchFollowing(accountId));}}render(){const{intl,accountIds,hasMore,isAccount,diffCount,accountId,unavailable}=this.props;if(!isAccount&&accountId!==-1){return/*#__PURE__*/_jsx(MissingIndicator,{});}if(accountId===-1||!accountIds){return/*#__PURE__*/_jsx(Spinner,{});}if(unavailable){return/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_unavailable\",defaultMessage:\"Profile unavailable\"}));}return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading),transparent:true},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"following\",hasMore:hasMore,diffCount:diffCount,onLoadMore:this.handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.follows.empty\",defaultMessage:\"This user doesn't follow anyone yet.\"}),itemClassName:\"pb-4\"},void 0,accountIds.map(id=>/*#__PURE__*/_jsx(AccountContainer,{id:id,withNote:false},id))));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired,params:PropTypes.object.isRequired,dispatch:PropTypes.func.isRequired,accountIds:ImmutablePropTypes.orderedSet,hasMore:PropTypes.bool,isAccount:PropTypes.bool,unavailable:PropTypes.bool,diffCount:PropTypes.number}),_class2))||_class)||_class);export{Following as default};"],"names":["_class","_class2","messages","heading","Following","state","_ref","_state$user_lists$fol","_state$user_lists$fol2","params","username","me","get","accountFetchError","getIn","toLowerCase","features","accountId","account","diffCount","isBlocked","unavailable","blockersVisible","isAccount","accountIds","user_lists","following","items","hasMore","next","_dec","arguments","props","dispatch","leading","componentDidMount","this","componentDidUpdate","prevProps","render","intl","className","id","defaultMessage","label","formatMessage","transparent","scrollKey","onLoadMore","handleLoadMore","emptyMessage","itemClassName","map","withNote"],"sourceRoot":""}