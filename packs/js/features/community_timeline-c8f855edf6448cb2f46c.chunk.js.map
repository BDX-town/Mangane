{"version":3,"file":"packs/js/features/community_timeline-c8f855edf6448cb2f46c.chunk.js","mappings":"8OAAquBA,GAAS,QAAe,CAACC,MAAM,CAAC,GAAK,mBAAmB,eAAiB,kBAAkBC,SAAS,CAAC,GAAK,oBAAoB,eAAiB,cAAoBC,EAAW,YAAqoE,UAAjmE,WAAK,IAAMC,GAAK,SAAgBC,GAAS,UAAuBC,GAAS,SAAe,SAAAC,GAAO,OAAAA,EAAMD,YAAe,GAA+B,IAAAE,WAAS,GAAvCC,EAAY,KAACC,EAAe,KAAwBR,GAAS,UAAoBS,EAAUT,EAASU,MAAM,CAACT,EAAW,QAAQ,cAAoBU,EAAeX,EAASU,MAAM,CAACT,EAAW,QAAQ,UAAgBW,GAAmB,IAAAC,UAAQ,WAAI,SAAGC,OAAOb,GAAYa,OAAOL,EAAU,SAAS,IAAIK,OAAOH,EAAe,mBAAmB,MAAI,CAACA,EAAeF,IAAkBM,GAAe,IAAAC,cAAY,SAAAC,GAAQd,GAAS,QAAwB,CAACc,MAAK,EAACR,UAAS,EAACE,eAAc,OAAM,CAACR,EAASQ,EAAeF,IAAkBS,GAAc,IAAAF,cAAY,kB,OAAA,E,OAAA,E,EAAA,kB,oiCAAA,mB,uBAAU,SAAMb,GAAS,QAAwB,CAACM,UAAS,EAACE,eAAc,M,OAAI,OAApE,SAA2E,CAAP,EAAOR,GAAS,QAAgBS,U,YAA9G,K,gRAAqI,CAACA,EAAmBT,EAASQ,EAAeF,IAAwO,OAA5N,IAAAU,YAAU,WAAKhB,GAAS,QAAwB,CAACM,UAAS,EAACE,eAAc,KAAI,IAAMS,EAAWjB,GAAS,QAAuB,CAACM,UAAS,EAACE,eAAc,KAAI,OAAM,WAAKS,OAAiB,CAACjB,EAASQ,EAAeF,IAA+B,gBAAoB,WAAe,MAAkB,OAAK,KAAO,CAACY,MAAMnB,EAAKoB,cAAcxB,EAASC,OAAOwB,aAAY,EAAKC,YAAW,QAAO,GAAoB,OAAK,MAAM,CAACC,UAAU,oDAA+C,GAAoB,OAAK,IAAc,CAACA,UAAU,QAAQC,QAAQtB,EAASL,SAAqB,OAAK,KAAW,CAAC4B,IAA4D,EAAvDpB,EAA+D,IAA1C,KAA0EqB,QAAQ,WAAI,OAAApB,GAAiBD,IAAcR,MAAMG,EAAKoB,cAAcxB,EAASE,aAAaO,IAA2B,OAAK,IAAiB,CAACkB,UAAU,OAAOI,SAAS5B,EAAW6B,QAAQ,WAAI,OAAAtB,GAAgB,OAAsB,OAAK,IAAc,CAACuB,UAAUb,QAAe,GAAoB,OAAK,IAAS,CAACc,UAAU,GAAGlB,OAAOb,EAAW,aAAaA,WAAWW,EAAmBqB,WAAWlB,EAAemB,cAA0B,OAAK,IAAiB,CAACC,GAAG,yBAAyBC,eAAe,mFAAmFC,WAAW","sources":["webpack://mangane-fe/./app/soapbox/features/community_timeline/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useCallback,useEffect,useMemo,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{connectCommunityStream}from'soapbox/actions/streaming';import{dequeueTimeline,expandCommunityTimeline}from'soapbox/actions/timelines';import PullToRefresh from'soapbox/components/pull-to-refresh';import SubNavigation from'soapbox/components/sub_navigation';import TimelineSettings from'soapbox/components/timeline_settings';import{Column,IconButton}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useSettings}from'soapbox/hooks';import Timeline from'../ui/components/timeline';const messages=defineMessages({title:{\"id\":\"column.community\",\"defaultMessage\":\"Local timeline\"},settings:{\"id\":\"settings.settings\",\"defaultMessage\":\"Settings\"}});const timelineId='community';const CommunityTimeline=()=>{const intl=useIntl();const dispatch=useAppDispatch();const instance=useAppSelector(state=>state.instance);const[showSettings,setShowSettings]=useState(false);const settings=useSettings();const onlyMedia=settings.getIn([timelineId,'other','onlyMedia']);const excludeReplies=settings.getIn([timelineId,'shows','reply']);const completeTimelineId=useMemo(()=>\"\".concat(timelineId).concat(onlyMedia?':media':'').concat(excludeReplies?':exclude_replies':''),[excludeReplies,onlyMedia]);const handleLoadMore=useCallback(maxId=>{dispatch(expandCommunityTimeline({maxId,onlyMedia,excludeReplies}));},[dispatch,excludeReplies,onlyMedia]);const handleRefresh=useCallback(async()=>{await dispatch(expandCommunityTimeline({onlyMedia,excludeReplies}));return dispatch(dequeueTimeline(completeTimelineId));},[completeTimelineId,dispatch,excludeReplies,onlyMedia]);useEffect(()=>{dispatch(expandCommunityTimeline({onlyMedia,excludeReplies}));const disconnect=dispatch(connectCommunityStream({onlyMedia,excludeReplies}));return()=>{disconnect();};},[dispatch,excludeReplies,onlyMedia]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.title),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 flex justify-between items-center\"},void 0,/*#__PURE__*/_jsx(SubNavigation,{className:\"!mb-0\",message:instance.title}),/*#__PURE__*/_jsx(IconButton,{src:!showSettings?require('@tabler/icons/chevron-down.svg'):require('@tabler/icons/chevron-up.svg'),onClick:()=>setShowSettings(!showSettings),title:intl.formatMessage(messages.settings)})),showSettings&&/*#__PURE__*/_jsx(TimelineSettings,{className:\"mb-3\",timeline:timelineId,onClose:()=>setShowSettings(false)}),/*#__PURE__*/_jsx(PullToRefresh,{onRefresh:handleRefresh},void 0,/*#__PURE__*/_jsx(Timeline,{scrollKey:\"\".concat(timelineId,\"_timeline\"),timelineId:completeTimelineId,onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.community\",defaultMessage:\"The local timeline is empty. Write something publicly to get the ball rolling!\"}),divideType:\"space\"}))));};export default CommunityTimeline;"],"names":["messages","title","settings","timelineId","intl","dispatch","instance","state","useState","showSettings","setShowSettings","onlyMedia","getIn","excludeReplies","completeTimelineId","useMemo","concat","handleLoadMore","useCallback","maxId","handleRefresh","useEffect","disconnect","label","formatMessage","transparent","withHeader","className","message","src","onClick","timeline","onClose","onRefresh","scrollKey","onLoadMore","emptyMessage","id","defaultMessage","divideType"],"sourceRoot":""}