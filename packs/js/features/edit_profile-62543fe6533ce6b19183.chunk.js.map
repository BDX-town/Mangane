{"version":3,"file":"packs/js/features/edit_profile-62543fe6533ce6b19183.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/edit_profile/components/profile-preview.tsx","webpack://mangane-fe/./app/soapbox/features/edit_profile/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import StillImage from'soapbox/components/still_image';import{HStack,Stack,Text}from'soapbox/components/ui';import VerificationBadge from'soapbox/components/verification_badge';import{useSoapboxConfig}from'soapbox/hooks';/** Displays a preview of the user's account, including avatar, banner, etc. */const ProfilePreview=_ref=>{let{account}=_ref;const{displayFqn}=useSoapboxConfig();return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-slate-800 rounded-lg text-black dark:text-white sm:shadow dark:sm:shadow-inset overflow-hidden\"},void 0,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full h-32 md:rounded-t-lg bg-gray-200 dark:bg-slate-900/50\"},void 0,/*#__PURE__*/_jsx(StillImage,{alt:\"\",src:account.header,className:\"absolute inset-0 object-cover md:rounded-t-lg\"}))),/*#__PURE__*/_jsx(HStack,{space:3,alignItems:\"center\",className:\"p-3\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"relative\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-12 bg-gray-400 rounded-full\"},void 0,/*#__PURE__*/_jsx(StillImage,{alt:\"\",className:\"h-12 w-12 rounded-full\",src:account.avatar})),account.verified&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-1.5 -right-1.5\"},void 0,/*#__PURE__*/_jsx(VerificationBadge,{}))),/*#__PURE__*/_jsx(Stack,{className:\"truncate\"},void 0,/*#__PURE__*/_jsx(Text,{weight:\"medium\",size:\"sm\",truncate:true},void 0,account.display_name),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"sm\"},void 0,\"@\",displayFqn?account.fqn:account.acct))));};export default ProfilePreview;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url.js\";import\"core-js/modules/web.url-search-params.js\";import React,{useState,useEffect,useMemo}from'react';import{defineMessages,useIntl,FormattedMessage}from'react-intl';import{updateNotificationSettings}from'soapbox/actions/accounts';import{patchMe}from'soapbox/actions/me';import snackbar from'soapbox/actions/snackbar';import BirthdayInput from'soapbox/components/birthday_input';import List,{ListItem}from'soapbox/components/list';import{Button,Column,FileInput,Form,FormActions,FormGroup,HStack,Input,Textarea,Toggle}from'soapbox/components/ui';import Streamfield from'soapbox/components/ui/streamfield/streamfield';import{useAppSelector,useAppDispatch,useOwnAccount,useFeatures}from'soapbox/hooks';import{normalizeAccount}from'soapbox/normalizers';import resizeImage from'soapbox/utils/resize_image';import ProfilePreview from'./components/profile-preview';/**\n * Whether the user is hiding their follows and/or followers.\n * Pleroma's config is granular, but we simplify it into one setting.\n */const hidesNetwork=account=>{const{hide_followers,hide_follows,hide_followers_count,hide_follows_count}=account.pleroma.toJS();return Boolean(hide_followers&&hide_follows&&hide_followers_count&&hide_follows_count);};const messages=defineMessages({heading:{\"id\":\"column.edit_profile\",\"defaultMessage\":\"Edit profile\"},header:{\"id\":\"edit_profile.header\",\"defaultMessage\":\"Edit Profile\"},metaFieldLabel:{\"id\":\"edit_profile.fields.meta_fields.label_placeholder\",\"defaultMessage\":\"Label\"},metaFieldContent:{\"id\":\"edit_profile.fields.meta_fields.content_placeholder\",\"defaultMessage\":\"Content\"},success:{\"id\":\"edit_profile.success\",\"defaultMessage\":\"Profile saved!\"},error:{\"id\":\"edit_profile.error\",\"defaultMessage\":\"Profile update failed\"},bioPlaceholder:{\"id\":\"edit_profile.fields.bio_placeholder\",\"defaultMessage\":\"Tell us about yourself.\"},displayNamePlaceholder:{\"id\":\"edit_profile.fields.display_name_placeholder\",\"defaultMessage\":\"Name\"},websitePlaceholder:{\"id\":\"edit_profile.fields.website_placeholder\",\"defaultMessage\":\"Display a Link\"},locationPlaceholder:{\"id\":\"edit_profile.fields.location_placeholder\",\"defaultMessage\":\"Location\"},statusExpiryPlaceholder:{\"id\":\"edit_profile.fields.status_expiry_placeholder\",\"defaultMessage\":\"Number of days\"},cancel:{\"id\":\"common.cancel\",\"defaultMessage\":\"Cancel\"}});/**\n * Profile metadata `name` and `value`.\n * (By default, max 4 fields and 255 characters per property/value)\n */ /** Convert an account into an update_credentials request object. */const accountToCredentials=account=>{const hideNetwork=hidesNetwork(account);return{discoverable:account.discoverable,bot:account.bot,display_name:account.display_name,note:account.source.get('note'),locked:account.locked,fields_attributes:[...account.source.get('fields',[]).toJS()],stranger_notifications:account.getIn(['pleroma','notification_settings','block_from_strangers'])===true,accepts_email_list:account.getIn(['pleroma','accepts_email_list'])===true,hide_followers:hideNetwork,hide_follows:hideNetwork,hide_followers_count:hideNetwork,hide_follows_count:hideNetwork,website:account.website,location:account.location,birthday:account.birthday,status_ttl_days:account.akkoma.get('status_ttl_days')};};const ProfileField=_ref=>{let{value,onChange}=_ref;const intl=useIntl();const handleChange=key=>{return e=>{onChange(_objectSpread(_objectSpread({},value),{},{[key]:e.currentTarget.value}));};};return/*#__PURE__*/_jsx(HStack,{space:2,grow:true},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",outerClassName:\"w-2/5 flex-grow\",value:value.name,onChange:handleChange('name'),placeholder:intl.formatMessage(messages.metaFieldLabel)}),/*#__PURE__*/_jsx(Input,{type:\"text\",outerClassName:\"w-3/5 flex-grow\",value:value.value,onChange:handleChange('value'),placeholder:intl.formatMessage(messages.metaFieldContent)}));};/** Edit profile page. */const EditProfile=()=>{const intl=useIntl();const dispatch=useAppDispatch();const account=useOwnAccount();const features=useFeatures();const maxFields=useAppSelector(state=>state.instance.pleroma.getIn(['metadata','fields_limits','max_fields'],4));const[isLoading,setLoading]=useState(false);const[data,setData]=useState({});const[muteStrangers,setMuteStrangers]=useState(false);useEffect(()=>{if(account){const credentials=accountToCredentials(account);const strangerNotifications=account.getIn(['pleroma','notification_settings','block_from_strangers'])===true;setData(credentials);setMuteStrangers(strangerNotifications);}},[account===null||account===void 0?void 0:account.id]);/** Set a single key in the request data. */const updateData=(key,value)=>{setData(prevData=>{return _objectSpread(_objectSpread({},prevData),{},{[key]:value});});};const handleSubmit=async event=>{event.preventDefault();setLoading(true);try{// the calls must be done sequentially\nif(features.muteStrangers){await dispatch(updateNotificationSettings({block_from_strangers:muteStrangers}));}await dispatch(patchMe(_objectSpread(_objectSpread({},data),{},{status_ttl_days:data.status_ttl_days===null?-1:data.status_ttl_days}),true));dispatch(snackbar.success(intl.formatMessage(messages.success)));}catch(e){console.error(e);dispatch(snackbar.error(intl.formatMessage(messages.error)));}finally{setLoading(false);}};const handleCheckboxChange=key=>{return e=>{updateData(key,e.target.checked);};};const handleTextChange=key=>{return e=>{updateData(key,e.target.value);};};const handleNumberChange=key=>{return e=>{const num=parseInt(e.target.value,10);if(Number.isNaN(num)){updateData(key,null);}else{updateData(key,num);}};};const handleBirthdayChange=date=>{updateData('birthday',date);};const handleHideNetworkChange=e=>{const hide=e.target.checked;setData(prevData=>{return _objectSpread(_objectSpread({},prevData),{},{hide_followers:hide,hide_follows:hide,hide_followers_count:hide,hide_follows_count:hide});});};const handleFileChange=(name,maxPixels)=>{return e=>{var _e$target$files;const f=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files.item(0);if(!f)return;resizeImage(f,maxPixels).then(file=>{updateData(name,file);}).catch(console.error);};};const handleFieldsChange=fields=>{updateData('fields_attributes',fields);};const handleAddField=()=>{const oldFields=data.fields_attributes||[];const fields=[...oldFields,{name:'',value:''}];updateData('fields_attributes',fields);};const handleRemoveField=i=>{const oldFields=data.fields_attributes||[];const fields=[...oldFields];fields.splice(i,1);updateData('fields_attributes',fields);};/** Memoized avatar preview URL. */const avatarUrl=useMemo(()=>{return data.avatar?URL.createObjectURL(data.avatar):account===null||account===void 0?void 0:account.avatar;},[data.avatar,account===null||account===void 0?void 0:account.avatar]);/** Memoized header preview URL. */const headerUrl=useMemo(()=>{return data.header?URL.createObjectURL(data.header):account===null||account===void 0?void 0:account.header;},[data.header,account===null||account===void 0?void 0:account.header]);/** Preview account data. */const previewAccount=useMemo(()=>{return normalizeAccount(_objectSpread(_objectSpread(_objectSpread({},account===null||account===void 0?void 0:account.toJS()),data),{},{avatar:avatarUrl,header:headerUrl}));},[account===null||account===void 0?void 0:account.id,data.display_name,avatarUrl,headerUrl]);return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.header)},void 0,/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.display_name_label\",defaultMessage:\"Display name\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",value:data.display_name,onChange:handleTextChange('display_name'),placeholder:intl.formatMessage(messages.displayNamePlaceholder)})),features.birthdays&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.birthday_label\",defaultMessage:\"Birthday\"})},void 0,/*#__PURE__*/_jsx(BirthdayInput,{value:data.birthday,onChange:handleBirthdayChange})),features.accountLocation&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.location_label\",defaultMessage:\"Location\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",value:data.location,onChange:handleTextChange('location'),placeholder:intl.formatMessage(messages.locationPlaceholder)})),features.accountWebsite&&/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.website_label\",defaultMessage:\"Website\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"text\",value:data.website,onChange:handleTextChange('website'),placeholder:intl.formatMessage(messages.websitePlaceholder)})),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.bio_label\",defaultMessage:\"Bio\"})},void 0,/*#__PURE__*/_jsx(Textarea,{value:data.note,onChange:handleTextChange('note'),autoComplete:\"off\",placeholder:intl.formatMessage(messages.bioPlaceholder)})),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\"},void 0,/*#__PURE__*/_jsx(ProfilePreview,{account:previewAccount}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\"},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.header_label\",defaultMessage:\"Choose Background Picture\"}),hintText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.header\",defaultMessage:\"PNG, GIF or JPG. Will be downscaled to {size}\",values:{size:'1920x1080px'}})},void 0,/*#__PURE__*/_jsx(FileInput,{onChange:handleFileChange('header',1920*1080)})),/*#__PURE__*/_jsx(FormGroup,{labelText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.avatar_label\",defaultMessage:\"Choose Profile Picture\"}),hintText:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.avatar\",defaultMessage:\"PNG, GIF or JPG. Will be downscaled to {size}\",values:{size:'400x400px'}})},void 0,/*#__PURE__*/_jsx(FileInput,{onChange:handleFileChange('avatar',400*400)})))),/*#__PURE__*/_jsx(List,{},void 0,features.followRequests&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.locked_label\",defaultMessage:\"Lock account\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.locked\",defaultMessage:\"Requires you to manually approve followers\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.locked,onChange:handleCheckboxChange('locked')})),features.hideNetwork&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.hide_network_label\",defaultMessage:\"Hide network\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.hide_network\",defaultMessage:\"Who you follow and who follows you will not be shown on your profile\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.hide_followers&&data.hide_followers_count&&data.hide_follows&&data.hide_follows_count,onChange:handleHideNetworkChange})),features.bots&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.bot_label\",defaultMessage:\"This is a bot account\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.bot\",defaultMessage:\"This account mainly performs automated actions and might not be monitored\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.bot,onChange:handleCheckboxChange('bot')})),features.muteStrangers&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.stranger_notifications_label\",defaultMessage:\"Block notifications from strangers\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.stranger_notifications\",defaultMessage:\"Only show notifications from people you follow\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:muteStrangers,onChange:e=>setMuteStrangers(e.target.checked)})),features.profileDirectory&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.discoverable_label\",defaultMessage:\"Allow account discovery\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.discoverable\",defaultMessage:\"Display account in profile directory and allow indexing by external services\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.discoverable,onChange:handleCheckboxChange('discoverable')})),features.statusExpiry&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.status_expiry_label\",defaultMessage:\"Scheduled post deletion\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.status_expiry\",defaultMessage:\"Delete posts after a set amount of days (let empty to disable)\"})},void 0,/*#__PURE__*/_jsx(Input,{type:\"number\",value:data.status_ttl_days,onChange:handleNumberChange('status_ttl_days'),placeholder:intl.formatMessage(messages.statusExpiryPlaceholder)})),features.emailList&&/*#__PURE__*/_jsx(ListItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.accepts_email_list_label\",defaultMessage:\"Subscribe to newsletter\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.accepts_email_list\",defaultMessage:\"Opt-in to news and marketing updates.\"})},void 0,/*#__PURE__*/_jsx(Toggle,{checked:data.accepts_email_list,onChange:handleCheckboxChange('accepts_email_list')}))),features.profileFields&&/*#__PURE__*/_jsx(Streamfield,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.meta_fields_label\",defaultMessage:\"Profile fields\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.meta_fields\",defaultMessage:\"You can have up to {count, plural, one {# custom field} other {# custom fields}} displayed on your profile.\",values:{count:maxFields}}),values:data.fields_attributes||[],onChange:handleFieldsChange,onAddItem:handleAddField,onRemoveItem:handleRemoveField,component:ProfileField,maxItems:maxFields}),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{to:\"/settings\",theme:\"ghost\"},void 0,intl.formatMessage(messages.cancel)),/*#__PURE__*/_jsx(Button,{theme:\"primary\",type:\"submit\",disabled:isLoading},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.save\",defaultMessage:\"Save\"})))));};export default EditProfile;"],"names":["_ref","account","displayFqn","className","alt","src","header","space","alignItems","avatar","verified","weight","size","truncate","display_name","theme","fqn","acct","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","messages","heading","metaFieldLabel","metaFieldContent","success","error","bioPlaceholder","displayNamePlaceholder","websitePlaceholder","locationPlaceholder","statusExpiryPlaceholder","cancel","ProfileField","value","onChange","intl","useIntl","handleChange","e","currentTarget","grow","type","outerClassName","name","placeholder","formatMessage","dispatch","features","maxFields","state","instance","pleroma","getIn","useState","isLoading","setLoading","data","setData","muteStrangers","setMuteStrangers","useEffect","credentials","hideNetwork","toJS","hide_followers","hide_follows","hide_followers_count","hide_follows_count","Boolean","hidesNetwork","discoverable","bot","note","get","locked","fields_attributes","stranger_notifications","accepts_email_list","website","location","birthday","status_ttl_days","akkoma","accountToCredentials","strangerNotifications","id","updateData","prevData","handleCheckboxChange","checked","handleTextChange","handleFileChange","maxPixels","_e$target$files","f","files","item","then","file","catch","console","avatarUrl","useMemo","URL","createObjectURL","headerUrl","previewAccount","label","onSubmit","event","preventDefault","block_from_strangers","snackbar","labelText","defaultMessage","birthdays","date","accountLocation","accountWebsite","autoComplete","hintText","values","followRequests","hint","hide","bots","profileDirectory","statusExpiry","num","parseInt","Number","isNaN","emailList","profileFields","count","fields","onAddItem","oldFields","onRemoveItem","splice","component","maxItems","to","disabled"],"sourceRoot":""}