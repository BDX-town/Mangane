{"version":3,"file":"packs/js/features/following-aca51006ffbaeafa7a85.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/following/index.js"],"sourcesContent":["var _dec,\n    _class,\n    _class2,\n    _jsxFileName = \"/home/runner/work/Mangane/Mangane/app/soapbox/features/following/index.js\";\n\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport debounce from 'lodash/debounce';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { fetchAccount, fetchFollowing, expandFollowing, fetchAccountByUsername } from 'soapbox/actions/accounts';\nimport MissingIndicator from 'soapbox/components/missing_indicator';\nimport ScrollableList from 'soapbox/components/scrollable_list';\nimport { Spinner } from 'soapbox/components/ui';\nimport AccountContainer from 'soapbox/containers/account_container';\nimport { findAccountByUsername } from 'soapbox/selectors';\nimport { getFollowDifference } from 'soapbox/utils/accounts';\nimport { getFeatures } from 'soapbox/utils/features';\nimport Column from '../ui/components/column';\nconst messages = defineMessages({\n  heading: {\n    \"id\": \"column.following\",\n    \"defaultMessage\": \"Following\"\n  }\n});\n\nconst mapStateToProps = (state, _ref) => {\n  var _account, _account$pleroma, _state$user_lists$fol, _state$user_lists$fol2;\n\n  let {\n    params,\n    withReplies = false\n  } = _ref;\n  const username = params.username || '';\n  const me = state.get('me');\n  const accountFetchError = (state.getIn(['accounts', -1, 'username']) || '').toLowerCase() === username.toLowerCase();\n  const features = getFeatures(state.get('instance'));\n  let accountId = -1;\n  let account = null;\n\n  if (accountFetchError) {\n    accountId = null;\n  } else {\n    account = findAccountByUsername(state, username);\n    accountId = account ? account.getIn(['id'], null) : -1;\n  }\n\n  const diffCount = getFollowDifference(state, accountId, 'following');\n  const isBlocked = state.getIn(['relationships', accountId, 'blocked_by'], false);\n  const unavailable = me === accountId ? false : isBlocked && !features.blockersVisible || ((_account = account) === null || _account === void 0 ? void 0 : (_account$pleroma = _account.pleroma) === null || _account$pleroma === void 0 ? void 0 : _account$pleroma.get('hide_followers'));\n  return {\n    accountId,\n    unavailable,\n    isAccount: !!state.getIn(['accounts', accountId]),\n    accountIds: (_state$user_lists$fol = state.user_lists.following.get(accountId)) === null || _state$user_lists$fol === void 0 ? void 0 : _state$user_lists$fol.items,\n    hasMore: !!((_state$user_lists$fol2 = state.user_lists.following.get(accountId)) !== null && _state$user_lists$fol2 !== void 0 && _state$user_lists$fol2.next),\n    diffCount\n  };\n};\n\nlet Following = (_dec = connect(mapStateToProps), _dec(_class = injectIntl(_class = (_class2 = class Following extends ImmutablePureComponent {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"handleLoadMore\", debounce(() => {\n      if (this.props.accountId && this.props.accountId !== -1) {\n        this.props.dispatch(expandFollowing(this.props.accountId));\n      }\n    }, 300, {\n      leading: true\n    }));\n  }\n\n  componentDidMount() {\n    const {\n      params: {\n        username\n      },\n      accountId\n    } = this.props;\n\n    if (accountId && accountId !== -1) {\n      this.props.dispatch(fetchAccount(accountId));\n      this.props.dispatch(fetchFollowing(accountId));\n    } else {\n      this.props.dispatch(fetchAccountByUsername(username));\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      accountId,\n      dispatch\n    } = this.props;\n\n    if (accountId && accountId !== -1 && accountId !== prevProps.accountId && accountId) {\n      dispatch(fetchAccount(accountId));\n      dispatch(fetchFollowing(accountId));\n    }\n  }\n\n  render() {\n    const {\n      intl,\n      accountIds,\n      hasMore,\n      isAccount,\n      diffCount,\n      accountId,\n      unavailable\n    } = this.props;\n\n    if (!isAccount && accountId !== -1) {\n      return /*#__PURE__*/React.createElement(MissingIndicator, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 9\n        }\n      });\n    }\n\n    if (accountId === -1 || !accountIds) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }\n      });\n    }\n\n    if (unavailable) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"empty-column-indicator\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"empty_column.account_unavailable\",\n        defaultMessage: \"Profile unavailable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(Column, {\n      label: intl.formatMessage(messages.heading),\n      transparent: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ScrollableList, {\n      scrollKey: \"following\",\n      hasMore: hasMore,\n      diffCount: diffCount,\n      onLoadMore: this.handleLoadMore,\n      emptyMessage: /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"account.follows.empty\",\n        defaultMessage: \"This user doesn't follow anyone yet.\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }\n      }),\n      itemClassName: \"pb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    }, accountIds.map(id => /*#__PURE__*/React.createElement(AccountContainer, {\n      key: id,\n      id: id,\n      withNote: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}, _defineProperty(_class2, \"propTypes\", {\n  intl: PropTypes.object.isRequired,\n  params: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  accountIds: ImmutablePropTypes.orderedSet,\n  hasMore: PropTypes.bool,\n  isAccount: PropTypes.bool,\n  unavailable: PropTypes.bool,\n  diffCount: PropTypes.number\n}), _class2)) || _class) || _class);\nexport { Following as default };"],"names":[],"sourceRoot":""}