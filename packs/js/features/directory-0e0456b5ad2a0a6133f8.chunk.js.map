{"version":3,"file":"packs/js/features/directory-0e0456b5ad2a0a6133f8.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/directory/components/account_card.tsx","webpack://mangane-fe/./app/soapbox/features/directory/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import classNames from'classnames';import React from'react';import{FormattedMessage,FormattedNumber,defineMessages}from'react-intl';import{getSettings}from'soapbox/actions/settings';import Avatar from'soapbox/components/avatar';import DisplayName from'soapbox/components/display-name';import Permalink from'soapbox/components/permalink';import{Text}from'soapbox/components/ui';import ActionButton from'soapbox/features/ui/components/action-button';import{useAppSelector}from'soapbox/hooks';import{makeGetAccount}from'soapbox/selectors';const getAccount=makeGetAccount();const messages=defineMessages({today:{\"id\":\"account.today\",\"defaultMessage\":\"Today\"},yesterday:{\"id\":\"account.yesterday\",\"defaultMessage\":\"Yesterday\"},days:{\"id\":\"account.days\",\"defaultMessage\":\"Days\"}});const AccountCard=_ref=>{var _account$relationship;let{id}=_ref;const me=useAppSelector(state=>state.me);const account=useAppSelector(state=>getAccount(state,id));const autoPlayGif=useAppSelector(state=>getSettings(state).get('autoPlayGif'));const followedBy=me!==account.id&&((_account$relationship=account.relationship)===null||_account$relationship===void 0?void 0:_account$relationship.followed_by);const ago=React.useMemo(()=>{if(!account)return 0;const date=new Date(account.last_status_at).valueOf();const today=new Date().valueOf();const diffInDays=Math.floor((today-date)/1000/60/60/24);return diffInDays;},[account]);if(!account)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"directory__card shadow dark:bg-slate-700 flex flex-col\"},void 0,followedBy&&/*#__PURE__*/_jsx(\"div\",{className:\"directory__card__info\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"bg-white rounded p-1 mt-1 text-[8px] opacity-90 uppercase dark:text-white dark:bg-slate-800\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.follows_you\",defaultMessage:\"Follows you\"}))),/*#__PURE__*/_jsx(\"div\",{className:\"directory__card__img\"},void 0,/*#__PURE__*/_jsx(\"img\",{src:autoPlayGif?account.header:account.header_static,alt:\"\",className:\"parallax\"})),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\"},void 0,/*#__PURE__*/_jsx(Permalink,{href:account.url,to:\"/@\".concat(account.acct)},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-end min-h-[30px]\"},void 0,/*#__PURE__*/_jsx(Avatar,{className:\"absolute border-solid border-4 border-white dark:border-slate-700\",account:account,size:100}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right grow\"},void 0,/*#__PURE__*/_jsx(ActionButton,{account:account,small:true}))),/*#__PURE__*/_jsx(Text,{className:\"mt-3 leading-5\",size:\"lg\"},void 0,/*#__PURE__*/_jsx(DisplayName,{account:account})))),/*#__PURE__*/_jsx(\"div\",{className:\"h-24 overflow-hidden px-4 py-3 grow\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",className:classNames('italic account__header__content',(account.note.length===0||account.note==='<p></p>')&&'empty'),dangerouslySetInnerHTML:{__html:account.note_emojified}})),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between px-4 py-3 mt-4\"},void 0,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Text,{theme:\"primary\",size:\"xs\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.posts\",defaultMessage:\"Posts\"})),/*#__PURE__*/_jsx(Text,{weight:\"bold\",size:\"lg\",className:\"leading-5\"},void 0,/*#__PURE__*/_jsx(FormattedNumber,{value:account.statuses_count}))),/*#__PURE__*/_jsx(\"div\",{className:\"accounts-table__count text-right\"},void 0,/*#__PURE__*/_jsx(Text,{theme:\"primary\",size:\"xs\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.last_status\",defaultMessage:\"Last active\"})),account.last_status_at===null?/*#__PURE__*/_jsx(Text,{weight:\"bold\",size:\"lg\",className:\"leading-5\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.never_active\",defaultMessage:\"Never\"})):/*#__PURE__*/_jsx(Text,{weight:\"bold\",size:\"lg\",className:\"leading-5\"},void 0,ago<1&&/*#__PURE__*/React.createElement(FormattedMessage,messages.today),ago>=1&&ago<2&&/*#__PURE__*/React.createElement(FormattedMessage,messages.yesterday),ago>=2&&/*#__PURE__*/React.createElement(React.Fragment,null,ago,\" \",/*#__PURE__*/React.createElement(FormattedMessage,messages.days))))));};export default AccountCard;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url-search-params.js\";import classNames from'classnames';import React,{useEffect,useState}from'react';import{defineMessages,useIntl}from'react-intl';import{useDispatch}from'react-redux';import{useLocation}from'react-router-dom';import{fetchDirectory,expandDirectory}from'soapbox/actions/directory';import LoadMore from'soapbox/components/load_more';import Toggle from'soapbox/components/ui/toggle/toggle';import Column from'soapbox/features/ui/components/column';import{useAppSelector}from'soapbox/hooks';import{getFeatures}from'soapbox/utils/features';import AccountCard from'./components/account_card';const messages=defineMessages({title:{\"id\":\"column.directory\",\"defaultMessage\":\"Browse profiles\"},recentlyActive:{\"id\":\"directory.recently_active\",\"defaultMessage\":\"Recently active\"},newArrivals:{\"id\":\"directory.new_arrivals\",\"defaultMessage\":\"New arrivals\"},local:{\"id\":\"directory.local\",\"defaultMessage\":\"From {domain} only\"},federated:{\"id\":\"directory.federated\",\"defaultMessage\":\"From known fediverse\"}});const Directory=()=>{const intl=useIntl();const dispatch=useDispatch();const{search}=useLocation();const params=new URLSearchParams(search);const accountIds=useAppSelector(state=>state.user_lists.directory.items);const title=useAppSelector(state=>state.instance.get('title'));const features=useAppSelector(state=>getFeatures(state.instance));const[order,setOrder]=useState(params.get('order')||'active');const[local,setLocal]=useState(!!params.get('local'));useEffect(()=>{dispatch(fetchDirectory({order:order||'active',local:local||false}));},[order,local]);const handleChangeOrder=e=>{if(e.target.checked)setOrder('new');else setOrder('active');};const handleChangeLocal=e=>{if(e.target.checked)setLocal(true);else setLocal(false);};const handleLoadMore=()=>{dispatch(expandDirectory({order:order||'active',local:local||false}));};return/*#__PURE__*/_jsx(Column,{icon:\"address-book-o\",label:intl.formatMessage(messages.title)},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"directory__filter-form flex items-center gap-4 my-3\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"directory__filter-form__column flex items-center gap-2\",role:\"group\"},void 0,/*#__PURE__*/_jsx(Toggle,{id:\"new-arrivals\",checked:order==='new',onChange:handleChangeOrder}),\" \",/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new-arrivals\"},void 0,intl.formatMessage(messages.newArrivals))),features.federating&&/*#__PURE__*/_jsx(\"div\",{className:\"directory__filter-form__column flex items-center gap-2\",role:\"group\"},void 0,/*#__PURE__*/_jsx(Toggle,{id:\"local\",checked:local,onChange:handleChangeLocal}),\" \",/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new-arrivals\"},void 0,intl.formatMessage(messages.local,{domain:title})))),/*#__PURE__*/_jsx(\"div\",{className:classNames('directory__list')},void 0,accountIds.map(accountId=>/*#__PURE__*/_jsx(AccountCard,{id:accountId},accountId))),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-3\"},void 0,/*#__PURE__*/_jsx(LoadMore,{onClick:handleLoadMore})));};export default Directory;"],"names":["getAccount","messages","today","yesterday","days","_ref","_account$relationship","id","me","state","account","autoPlayGif","get","followedBy","relationship","followed_by","ago","date","Date","last_status_at","valueOf","Math","floor","className","defaultMessage","src","header","header_static","alt","href","url","to","concat","acct","size","small","note","length","dangerouslySetInnerHTML","__html","note_emojified","theme","weight","value","statuses_count","title","recentlyActive","newArrivals","local","federated","intl","useIntl","dispatch","search","params","URLSearchParams","accountIds","user_lists","directory","items","instance","features","useState","order","setOrder","setLocal","useEffect","icon","label","formatMessage","role","checked","onChange","e","target","htmlFor","federating","domain","map","accountId","onClick"],"sourceRoot":""}