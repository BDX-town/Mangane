{"version":3,"file":"packs/js/features/admin/user_index-c95e22f0c7fc86b95f0a.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/admin/user_index.js"],"sourcesContent":["var _dec,\n    _class,\n    _class2,\n    _jsxFileName = \"/home/runner/work/Mangane/Mangane/app/soapbox/features/admin/user_index.js\";\n\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Set as ImmutableSet, OrderedSet as ImmutableOrderedSet, is } from 'immutable';\nimport debounce from 'lodash/debounce';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { injectIntl, defineMessages } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { fetchUsers } from 'soapbox/actions/admin';\nimport ScrollableList from 'soapbox/components/scrollable_list';\nimport AccountContainer from 'soapbox/containers/account_container';\nimport { SimpleForm, TextInput } from 'soapbox/features/forms';\nimport Column from 'soapbox/features/ui/components/column';\nconst messages = defineMessages({\n  heading: {\n    \"id\": \"column.admin.users\",\n    \"defaultMessage\": \"Users\"\n  },\n  empty: {\n    \"id\": \"admin.user_index.empty\",\n    \"defaultMessage\": \"No users found.\"\n  },\n  searchPlaceholder: {\n    \"id\": \"admin.user_index.search_input_placeholder\",\n    \"defaultMessage\": \"Who are you looking for?\"\n  }\n});\nlet UserIndex = (_dec = connect(), _dec(_class = injectIntl(_class = (_class2 = class UserIndex extends ImmutablePureComponent {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"state\", {\n      isLoading: true,\n      filters: ImmutableSet(['local', 'active']),\n      accountIds: ImmutableOrderedSet(),\n      total: Infinity,\n      pageSize: 50,\n      page: 0,\n      query: '',\n      nextLink: undefined\n    });\n\n    _defineProperty(this, \"clearState\", callback => {\n      this.setState({\n        isLoading: true,\n        accountIds: ImmutableOrderedSet(),\n        page: 0\n      }, callback);\n    });\n\n    _defineProperty(this, \"fetchNextPage\", () => {\n      const {\n        filters,\n        page,\n        query,\n        pageSize,\n        nextLink\n      } = this.state;\n      const nextPage = page + 1;\n      this.props.dispatch(fetchUsers(filters, nextPage, query, pageSize, nextLink)).then(_ref => {\n        let {\n          users,\n          count,\n          next\n        } = _ref;\n        const newIds = users.map(user => user.id);\n        this.setState({\n          isLoading: false,\n          accountIds: this.state.accountIds.union(newIds),\n          total: count,\n          page: nextPage,\n          nextLink: next\n        });\n      }).catch(() => {});\n    });\n\n    _defineProperty(this, \"refresh\", () => {\n      this.clearState(() => {\n        this.fetchNextPage();\n      });\n    });\n\n    _defineProperty(this, \"handleLoadMore\", debounce(() => {\n      this.fetchNextPage();\n    }, 2000, {\n      leading: true\n    }));\n\n    _defineProperty(this, \"updateQuery\", debounce(query => {\n      this.setState({\n        query\n      });\n    }, 900));\n\n    _defineProperty(this, \"handleQueryChange\", e => {\n      this.updateQuery(e.target.value);\n    });\n  }\n\n  componentDidMount() {\n    this.fetchNextPage();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      filters,\n      query\n    } = this.state;\n    const filtersChanged = !is(filters, prevState.filters);\n    const queryChanged = query !== prevState.query;\n\n    if (filtersChanged || queryChanged) {\n      this.refresh();\n    }\n  }\n\n  render() {\n    const {\n      intl\n    } = this.props;\n    const {\n      accountIds,\n      isLoading\n    } = this.state;\n    const hasMore = accountIds.count() < this.state.total && this.state.nextLink !== false;\n    const showLoading = isLoading && accountIds.isEmpty();\n    return /*#__PURE__*/React.createElement(Column, {\n      label: intl.formatMessage(messages.heading),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(SimpleForm, {\n      style: {\n        paddingBottom: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TextInput, {\n      onChange: this.handleQueryChange,\n      placeholder: intl.formatMessage(messages.searchPlaceholder),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(ScrollableList, {\n      scrollKey: \"user-index\",\n      hasMore: hasMore,\n      isLoading: isLoading,\n      showLoading: showLoading,\n      onLoadMore: this.handleLoadMore,\n      emptyMessage: intl.formatMessage(messages.empty),\n      className: \"mt-4\",\n      itemClassName: \"pb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, accountIds.map(id => /*#__PURE__*/React.createElement(AccountContainer, {\n      key: id,\n      id: id,\n      withDate: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}, _defineProperty(_class2, \"propTypes\", {\n  dispatch: PropTypes.func.isRequired\n}), _class2)) || _class) || _class);\nexport { UserIndex as default };"],"names":[],"sourceRoot":""}