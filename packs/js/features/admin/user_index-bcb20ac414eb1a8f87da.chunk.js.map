{"version":3,"file":"packs/js/features/admin/user_index-bcb20ac414eb1a8f87da.chunk.js","mappings":"+JAAiIA,EAAOC,E,mlBAAgrBC,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,qBAAqB,eAAiB,SAASC,MAAM,CAAC,GAAK,yBAAyB,eAAiB,mBAAmBC,kBAAkB,CAAC,GAAK,4CAA4C,eAAiB,8BAAkCC,GAAgB,SAAUC,CAAKP,GAAO,SAAmBC,EAAO,YAAgD,gCAAuBO,YAAS,K,OAAE,OAAgB,EAAK,QAAQ,CAACC,WAAU,EAAKC,SAAQ,SAAa,CAAC,QAAQ,WAAWC,YAAW,kBAAsBC,MAAMC,EAAAA,EAASC,SAAS,GAAGC,KAAK,EAAEC,MAAM,GAAGC,cAASC,KAAY,OAAgB,EAAK,cAAa,SAAAC,GAAW,EAAKC,SAAS,CAACX,WAAU,EAAKE,YAAW,kBAAsBI,KAAK,GAAGI,OAAa,OAAgB,EAAK,iBAAgB,WAAU,MAAuC,EAAKE,MAA3CX,EAAO,UAACK,EAAI,OAACC,EAAK,QAACF,EAAQ,WAACG,EAAQ,WAAmBK,EAASP,EAAK,EAAE,EAAKQ,MAAMC,UAAS,QAAWd,EAAQY,EAASN,EAAMF,EAASG,IAAWQ,MAAK,SAAAC,GAAW,IAAAC,EAAkBD,EAAI,MAAhBE,EAAYF,EAAI,MAAVG,EAAMH,EAAI,KAAOI,EAAOH,EAAMI,KAAI,SAAAC,GAAM,OAAAA,EAAKC,MAAI,EAAKb,SAAS,CAACX,WAAU,EAAME,WAAW,EAAKU,MAAMV,WAAWuB,MAAMJ,GAAQlB,MAAMgB,EAAMb,KAAKO,EAASL,SAASY,OAAUM,OAAM,mBAAW,OAAgB,EAAK,WAAU,WAAK,EAAKC,YAAW,WAAK,EAAKC,uBAAsB,OAAgB,EAAK,iBAAiB,KAAS,WAAK,EAAKA,kBAAkB,IAAK,CAACC,SAAQ,MAAQ,OAAgB,EAAK,cAAc,KAAS,SAAAtB,GAAQ,EAAKI,SAAS,CAACJ,MAAK,MAAK,OAAM,OAAgB,EAAK,qBAAoB,SAAAuB,GAAI,EAAKC,YAAYD,EAAEE,OAAOC,U,EAAwiC,OAAloE,OAAqmC,YAAAC,kBAAA,WAAoBC,KAAKP,iBAAiB,YAAAQ,mBAAA,SAAmBC,EAAUC,GAAgB,MAAgBH,KAAKvB,MAApBX,EAAO,UAACM,EAAK,QAAmBgC,IAAgB,IAAAC,IAAGvC,EAAQqC,EAAUrC,SAAewC,EAAalC,IAAQ+B,EAAU/B,OAASgC,GAAgBE,IAAcN,KAAKO,WAAY,YAAAC,OAAA,WAAe,IAAAC,EAAMT,KAAKrB,MAAK,KAAM,EAAuBqB,KAAKvB,MAA3BV,EAAU,aAACF,EAAS,YAAmB6C,EAAQ3C,EAAWiB,QAAQgB,KAAKvB,MAAMT,QAA6B,IAAtBgC,KAAKvB,MAAMJ,SAAuBsC,EAAY9C,GAAWE,EAAW6C,UAAU,OAAmB,OAAK,IAAO,CAACC,MAAMJ,EAAKK,cAAcxD,EAASC,eAAU,GAAoB,OAAK,KAAW,CAACwD,MAAM,CAACC,cAAc,SAAI,GAAoB,OAAK,KAAU,CAACC,SAASjB,KAAKkB,kBAAkBC,YAAYV,EAAKK,cAAcxD,EAASG,uBAAmC,OAAK,IAAe,CAAC2D,UAAU,aAAaV,QAAQA,EAAQ7C,UAAUA,EAAU8C,YAAYA,EAAYU,WAAWrB,KAAKsB,eAAeC,aAAad,EAAKK,cAAcxD,EAASE,OAAOgE,UAAU,OAAOC,cAAc,aAAQ,EAAO1D,EAAWoB,KAAI,SAAAE,GAAiB,cAAK,IAAiB,CAACA,GAAGA,EAAGqC,UAAS,GAAMrC,SAAQ,EAA3pE,CAAyB,OAAooE,OAAgBhC,EAAQ,YAAY,CAACuB,SAAS,sBAA1tExB,EAAsvEC,KAAWD,IAASA","sources":["webpack://mangane-fe/./app/soapbox/features/admin/user_index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import{Set as ImmutableSet,OrderedSet as ImmutableOrderedSet,is}from'immutable';import debounce from'lodash/debounce';import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{injectIntl,defineMessages}from'react-intl';import{connect}from'react-redux';import{fetchUsers}from'soapbox/actions/admin';import ScrollableList from'soapbox/components/scrollable_list';import AccountContainer from'soapbox/containers/account_container';import{SimpleForm,TextInput}from'soapbox/features/forms';import Column from'soapbox/features/ui/components/column';const messages=defineMessages({heading:{\"id\":\"column.admin.users\",\"defaultMessage\":\"Users\"},empty:{\"id\":\"admin.user_index.empty\",\"defaultMessage\":\"No users found.\"},searchPlaceholder:{\"id\":\"admin.user_index.search_input_placeholder\",\"defaultMessage\":\"Who are you looking for?\"}});let UserIndex=(_dec=connect(),_dec(_class=injectIntl(_class=(_class2=class UserIndex extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"state\",{isLoading:true,filters:ImmutableSet(['local','active']),accountIds:ImmutableOrderedSet(),total:Infinity,pageSize:50,page:0,query:'',nextLink:undefined});_defineProperty(this,\"clearState\",callback=>{this.setState({isLoading:true,accountIds:ImmutableOrderedSet(),page:0},callback);});_defineProperty(this,\"fetchNextPage\",()=>{const{filters,page,query,pageSize,nextLink}=this.state;const nextPage=page+1;this.props.dispatch(fetchUsers(filters,nextPage,query,pageSize,nextLink)).then(_ref=>{let{users,count,next}=_ref;const newIds=users.map(user=>user.id);this.setState({isLoading:false,accountIds:this.state.accountIds.union(newIds),total:count,page:nextPage,nextLink:next});}).catch(()=>{});});_defineProperty(this,\"refresh\",()=>{this.clearState(()=>{this.fetchNextPage();});});_defineProperty(this,\"handleLoadMore\",debounce(()=>{this.fetchNextPage();},2000,{leading:true}));_defineProperty(this,\"updateQuery\",debounce(query=>{this.setState({query});},900));_defineProperty(this,\"handleQueryChange\",e=>{this.updateQuery(e.target.value);});}componentDidMount(){this.fetchNextPage();}componentDidUpdate(prevProps,prevState){const{filters,query}=this.state;const filtersChanged=!is(filters,prevState.filters);const queryChanged=query!==prevState.query;if(filtersChanged||queryChanged){this.refresh();}}render(){const{intl}=this.props;const{accountIds,isLoading}=this.state;const hasMore=accountIds.count()<this.state.total&&this.state.nextLink!==false;const showLoading=isLoading&&accountIds.isEmpty();return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(SimpleForm,{style:{paddingBottom:0}},void 0,/*#__PURE__*/_jsx(TextInput,{onChange:this.handleQueryChange,placeholder:intl.formatMessage(messages.searchPlaceholder)})),/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"user-index\",hasMore:hasMore,isLoading:isLoading,showLoading:showLoading,onLoadMore:this.handleLoadMore,emptyMessage:intl.formatMessage(messages.empty),className:\"mt-4\",itemClassName:\"pb-4\"},void 0,accountIds.map(id=>/*#__PURE__*/_jsx(AccountContainer,{id:id,withDate:true},id))));}},_defineProperty(_class2,\"propTypes\",{dispatch:PropTypes.func.isRequired}),_class2))||_class)||_class);export{UserIndex as default};"],"names":["_class","_class2","messages","heading","empty","searchPlaceholder","UserIndex","_dec","arguments","isLoading","filters","accountIds","total","Infinity","pageSize","page","query","nextLink","undefined","callback","setState","state","nextPage","props","dispatch","then","_ref","users","count","next","newIds","map","user","id","union","catch","clearState","fetchNextPage","leading","e","updateQuery","target","value","componentDidMount","this","componentDidUpdate","prevProps","prevState","filtersChanged","is","queryChanged","refresh","render","intl","hasMore","showLoading","isEmpty","label","formatMessage","style","paddingBottom","onChange","handleQueryChange","placeholder","scrollKey","onLoadMore","handleLoadMore","emptyMessage","className","itemClassName","withDate"],"sourceRoot":""}