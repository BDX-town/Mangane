{"version":3,"file":"packs/js/features/scheduled_statuses-5d06dd519cb8354e26b3.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/scheduled_statuses/components/scheduled_status_action_bar.tsx","webpack://mangane-fe/./app/soapbox/features/scheduled_statuses/components/scheduled_status.tsx","webpack://mangane-fe/./app/soapbox/features/scheduled_statuses/builder.tsx","webpack://mangane-fe/./app/soapbox/features/scheduled_statuses/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{openModal}from'soapbox/actions/modals';import{cancelScheduledStatus}from'soapbox/actions/scheduled_statuses';import{getSettings}from'soapbox/actions/settings';import IconButton from'soapbox/components/icon_button';import{HStack}from'soapbox/components/ui';import{useAppDispatch}from'soapbox/hooks';const messages=defineMessages({cancel:{\"id\":\"scheduled_status.cancel\",\"defaultMessage\":\"Cancel\"},deleteConfirm:{\"id\":\"confirmations.scheduled_status_delete.confirm\",\"defaultMessage\":\"Cancel\"},deleteHeading:{\"id\":\"confirmations.scheduled_status_delete.heading\",\"defaultMessage\":\"Cancel scheduled post\"},deleteMessage:{\"id\":\"confirmations.scheduled_status_delete.message\",\"defaultMessage\":\"Are you sure you want to cancel this scheduled post?\"}});const ScheduledStatusActionBar=_ref=>{let{status}=_ref;const intl=useIntl();const dispatch=useAppDispatch();const handleCancelClick=()=>{dispatch((_,getState)=>{const deleteModal=getSettings(getState()).get('deleteModal');if(!deleteModal){dispatch(cancelScheduledStatus(status.id));}else{dispatch(openModal('CONFIRM',{icon:require('@tabler/icons/calendar-stats.svg'),heading:intl.formatMessage(messages.deleteHeading),message:intl.formatMessage(messages.deleteMessage),confirm:intl.formatMessage(messages.deleteConfirm),onConfirm:()=>dispatch(cancelScheduledStatus(status.id))}));}});};return/*#__PURE__*/_jsx(HStack,{justifyContent:\"end\"},void 0,/*#__PURE__*/_jsx(IconButton,{title:intl.formatMessage(messages.cancel),text:intl.formatMessage(messages.cancel),src:require('@tabler/icons/x.svg'),onClick:handleCancelClick}));};export default ScheduledStatusActionBar;","import _extends from\"@babel/runtime/helpers/esm/extends\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";const _excluded=[\"statusId\"];import classNames from'classnames';import React from'react';import AttachmentThumbs from'soapbox/components/attachment-thumbs';import StatusReplyMentions from'soapbox/components/status-reply-mentions';import StatusContent from'soapbox/components/status_content';import{HStack}from'soapbox/components/ui';import AccountContainer from'soapbox/containers/account_container';import PollPreview from'soapbox/features/ui/components/poll_preview';import{useAppSelector}from'soapbox/hooks';import{buildStatus}from'../builder';import ScheduledStatusActionBar from'./scheduled_status_action_bar';const ScheduledStatus=_ref=>{let{statusId}=_ref,other=_objectWithoutProperties(_ref,_excluded);const status=useAppSelector(state=>buildStatus(state,state.scheduled_statuses.get(statusId)));if(!status)return null;const account=status.account;return/*#__PURE__*/_jsx(\"div\",{className:classNames('status__wrapper',\"status__wrapper-\".concat(status.visibility),{'status__wrapper-reply':!!status.in_reply_to_id}),tabIndex:0},void 0,/*#__PURE__*/_jsx(\"div\",{className:classNames('status',\"status-\".concat(status.visibility),{'status-reply':!!status.in_reply_to_id}),\"data-id\":status.id},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\"},void 0,/*#__PURE__*/_jsx(HStack,{justifyContent:\"between\",alignItems:\"start\"},void 0,/*#__PURE__*/_jsx(AccountContainer,{id:account.id,timestamp:status.created_at,futureTimestamp:true},account.id))),/*#__PURE__*/_jsx(StatusReplyMentions,{status:status}),/*#__PURE__*/_jsx(StatusContent,{status:status,expanded:true,collapsable:true}),status.media_attachments.size>0&&/*#__PURE__*/_jsx(AttachmentThumbs,{media:status.media_attachments,sensitive:status.sensitive}),status.poll&&/*#__PURE__*/_jsx(PollPreview,{pollId:status.poll}),/*#__PURE__*/React.createElement(ScheduledStatusActionBar,_extends({status:status},other))));};export default ScheduledStatus;","import\"core-js/modules/es.string.replace.js\";import{Map as ImmutableMap}from'immutable';import{normalizeStatus}from'soapbox/normalizers/status';import{calculateStatus}from'soapbox/reducers/statuses';import{makeGetAccount}from'soapbox/selectors';export const buildStatus=(state,scheduledStatus)=>{const getAccount=makeGetAccount();const me=state.me;const account=getAccount(state,me);if(!scheduledStatus)return null;const status=ImmutableMap({account,// eslint-disable-next-line no-control-regex\ncontent:scheduledStatus.text.replace(new RegExp('\\n','g'),'<br>'),created_at:scheduledStatus.scheduled_at,id:scheduledStatus.id,in_reply_to_id:scheduledStatus.in_reply_to_id,media_attachments:scheduledStatus.media_attachments,poll:scheduledStatus.poll,sensitive:scheduledStatus.sensitive,uri:\"/scheduled_statuses/\".concat(scheduledStatus.id),url:\"/scheduled_statuses/\".concat(scheduledStatus.id),visibility:scheduledStatus.visibility});return calculateStatus(normalizeStatus(status));};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import debounce from'lodash/debounce';import React,{useEffect}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchScheduledStatuses,expandScheduledStatuses}from'soapbox/actions/scheduled_statuses';import ScrollableList from'soapbox/components/scrollable_list';import{useAppSelector,useAppDispatch}from'soapbox/hooks';import Column from'../ui/components/column';import ScheduledStatus from'./components/scheduled_status';const messages=defineMessages({heading:{\"id\":\"column.scheduled_statuses\",\"defaultMessage\":\"Scheduled Posts\"}});const handleLoadMore=debounce(dispatch=>{dispatch(expandScheduledStatuses());},300,{leading:true});const ScheduledStatuses=()=>{const intl=useIntl();const dispatch=useAppDispatch();const statusIds=useAppSelector(state=>state.status_lists.get('scheduled_statuses').items);const isLoading=useAppSelector(state=>state.status_lists.get('scheduled_statuses').isLoading);const hasMore=useAppSelector(state=>!!state.status_lists.get('scheduled_statuses').next);useEffect(()=>{dispatch(fetchScheduledStatuses());},[]);const emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.scheduled_statuses\",defaultMessage:\"You don't have any scheduled statuses yet. When you add one, it will show up here.\"});return/*#__PURE__*/_jsx(Column,{icon:\"calendar\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"scheduled_statuses\",hasMore:hasMore,isLoading:typeof isLoading==='boolean'?isLoading:true,onLoadMore:()=>handleLoadMore(dispatch),emptyMessage:emptyMessage},void 0,statusIds.map(id=>/*#__PURE__*/_jsx(ScheduledStatus,{statusId:id},id))));};export default ScheduledStatuses;"],"names":["messages","cancel","deleteConfirm","deleteHeading","deleteMessage","_ref","status","intl","useIntl","dispatch","justifyContent","title","formatMessage","text","src","onClick","_","getState","deleteModal","get","icon","heading","message","confirm","onConfirm","id","_excluded","statusId","other","state","scheduledStatus","account","getAccount","me","content","replace","RegExp","created_at","scheduled_at","in_reply_to_id","media_attachments","poll","sensitive","uri","concat","url","visibility","buildStatus","scheduled_statuses","className","tabIndex","alignItems","timestamp","futureTimestamp","expanded","collapsable","size","media","pollId","handleLoadMore","leading","statusIds","status_lists","items","isLoading","hasMore","next","useEffect","emptyMessage","defaultMessage","label","scrollKey","onLoadMore","map"],"sourceRoot":""}