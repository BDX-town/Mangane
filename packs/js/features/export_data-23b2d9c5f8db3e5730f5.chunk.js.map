{"version":3,"file":"packs/js/features/export_data-23b2d9c5f8db3e5730f5.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/actions/export_data.ts","webpack://mangane-fe/./app/soapbox/features/export_data/components/csv_exporter.tsx","webpack://mangane-fe/./app/soapbox/features/export_data/index.tsx"],"sourcesContent":["import\"core-js/modules/web.dom-collections.iterator.js\";import{defineMessages}from'react-intl';import snackbar from'soapbox/actions/snackbar';import api,{getLinks}from'soapbox/api';import{normalizeAccount}from'soapbox/normalizers';export const EXPORT_FOLLOWS_REQUEST='EXPORT_FOLLOWS_REQUEST';export const EXPORT_FOLLOWS_SUCCESS='EXPORT_FOLLOWS_SUCCESS';export const EXPORT_FOLLOWS_FAIL='EXPORT_FOLLOWS_FAIL';export const EXPORT_BLOCKS_REQUEST='EXPORT_BLOCKS_REQUEST';export const EXPORT_BLOCKS_SUCCESS='EXPORT_BLOCKS_SUCCESS';export const EXPORT_BLOCKS_FAIL='EXPORT_BLOCKS_FAIL';export const EXPORT_MUTES_REQUEST='EXPORT_MUTES_REQUEST';export const EXPORT_MUTES_SUCCESS='EXPORT_MUTES_SUCCESS';export const EXPORT_MUTES_FAIL='EXPORT_MUTES_FAIL';const messages=defineMessages({blocksSuccess:{\"id\":\"export_data.success.blocks\",\"defaultMessage\":\"Blocks exported successfully\"},followersSuccess:{\"id\":\"export_data.success.followers\",\"defaultMessage\":\"Followers exported successfully\"},mutesSuccess:{\"id\":\"export_data.success.mutes\",\"defaultMessage\":\"Mutes exported successfully\"}});function fileExport(content,fileName){const fileToDownload=document.createElement('a');fileToDownload.setAttribute('href','data:text/csv;charset=utf-8,'+encodeURIComponent(content));fileToDownload.setAttribute('download',fileName);fileToDownload.style.display='none';document.body.appendChild(fileToDownload);fileToDownload.click();document.body.removeChild(fileToDownload);}const listAccounts=getState=>async apiResponse=>{const followings=apiResponse.data;let accounts=[];let next=getLinks(apiResponse).refs.find(link=>link.rel==='next');while(next){apiResponse=await api(getState).get(next.uri);next=getLinks(apiResponse).refs.find(link=>link.rel==='next');Array.prototype.push.apply(followings,apiResponse.data);}accounts=followings.map(account=>normalizeAccount(account).fqn);return Array.from(new Set(accounts));};export const exportFollows=()=>(dispatch,getState)=>{dispatch({type:EXPORT_FOLLOWS_REQUEST});const me=getState().me;return api(getState).get(\"/api/v1/accounts/\".concat(me,\"/following?limit=40\")).then(listAccounts(getState)).then(followings=>{followings=followings.map(fqn=>fqn+',true');followings.unshift('Account address,Show boosts');fileExport(followings.join('\\n'),'export_followings.csv');dispatch(snackbar.success(messages.followersSuccess));dispatch({type:EXPORT_FOLLOWS_SUCCESS});}).catch(error=>{dispatch({type:EXPORT_FOLLOWS_FAIL,error});});};export const exportBlocks=()=>(dispatch,getState)=>{dispatch({type:EXPORT_BLOCKS_REQUEST});return api(getState).get('/api/v1/blocks?limit=40').then(listAccounts(getState)).then(blocks=>{fileExport(blocks.join('\\n'),'export_block.csv');dispatch(snackbar.success(messages.blocksSuccess));dispatch({type:EXPORT_BLOCKS_SUCCESS});}).catch(error=>{dispatch({type:EXPORT_BLOCKS_FAIL,error});});};export const exportMutes=()=>(dispatch,getState)=>{dispatch({type:EXPORT_MUTES_REQUEST});return api(getState).get('/api/v1/mutes?limit=40').then(listAccounts(getState)).then(mutes=>{fileExport(mutes.join('\\n'),'export_mutes.csv');dispatch(snackbar.success(messages.mutesSuccess));dispatch({type:EXPORT_MUTES_SUCCESS});}).catch(error=>{dispatch({type:EXPORT_MUTES_FAIL,error});});};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useState}from'react';import{useIntl}from'react-intl';import{Button,Form,FormActions,Text}from'soapbox/components/ui';import{useAppDispatch}from'soapbox/hooks';const CSVExporter=_ref=>{let{messages,action}=_ref;const dispatch=useAppDispatch();const intl=useIntl();const[isLoading,setIsLoading]=useState(false);const handleClick=event=>{setIsLoading(true);dispatch(action()).then(()=>{setIsLoading(false);}).catch(()=>{setIsLoading(false);});};return/*#__PURE__*/_jsx(Form,{},void 0,/*#__PURE__*/_jsx(Text,{size:\"xl\",weight:\"bold\"},void 0,intl.formatMessage(messages.input_label)),/*#__PURE__*/_jsx(Text,{theme:\"muted\"},void 0,intl.formatMessage(messages.input_hint)),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{theme:\"primary\",onClick:handleClick,disabled:isLoading},void 0,intl.formatMessage(messages.submit))));};export default CSVExporter;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{exportFollows,exportBlocks,exportMutes}from'soapbox/actions/export_data';import Column from'../ui/components/column';import CSVExporter from'./components/csv_exporter';const messages=defineMessages({heading:{\"id\":\"column.export_data\",\"defaultMessage\":\"Export data\"},submit:{\"id\":\"export_data.actions.export\",\"defaultMessage\":\"Export\"}});const followMessages=defineMessages({input_label:{\"id\":\"export_data.follows_label\",\"defaultMessage\":\"Follows\"},input_hint:{\"id\":\"export_data.hints.follows\",\"defaultMessage\":\"Get a CSV file containing a list of followed accounts\"},submit:{\"id\":\"export_data.actions.export_follows\",\"defaultMessage\":\"Export follows\"}});const blockMessages=defineMessages({input_label:{\"id\":\"export_data.blocks_label\",\"defaultMessage\":\"Blocks\"},input_hint:{\"id\":\"export_data.hints.blocks\",\"defaultMessage\":\"Get a CSV file containing a list of blocked accounts\"},submit:{\"id\":\"export_data.actions.export_blocks\",\"defaultMessage\":\"Export blocks\"}});const muteMessages=defineMessages({input_label:{\"id\":\"export_data.mutes_label\",\"defaultMessage\":\"Mutes\"},input_hint:{\"id\":\"export_data.hints.mutes\",\"defaultMessage\":\"Get a CSV file containing a list of muted accounts\"},submit:{\"id\":\"export_data.actions.export_mutes\",\"defaultMessage\":\"Export mutes\"}});const ExportData=()=>{const intl=useIntl();return/*#__PURE__*/_jsx(Column,{icon:\"cloud-download-alt\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CSVExporter,{action:exportFollows,messages:followMessages}),/*#__PURE__*/_jsx(CSVExporter,{action:exportBlocks,messages:blockMessages}),/*#__PURE__*/_jsx(CSVExporter,{action:exportMutes,messages:muteMessages}));};export default ExportData;"],"names":["messages","blocksSuccess","followersSuccess","mutesSuccess","fileExport","content","fileName","fileToDownload","document","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","listAccounts","getState","apiResponse","followings","data","accounts","next","refs","find","link","rel","api","get","uri","Array","prototype","push","apply","map","account","fqn","from","Set","exportFollows","dispatch","type","me","concat","then","unshift","join","snackbar","catch","error","exportBlocks","blocks","exportMutes","mutes","_ref","action","intl","useIntl","useState","isLoading","setIsLoading","size","weight","formatMessage","input_label","theme","input_hint","onClick","event","disabled","submit","heading","followMessages","blockMessages","muteMessages","icon","label"],"sourceRoot":""}