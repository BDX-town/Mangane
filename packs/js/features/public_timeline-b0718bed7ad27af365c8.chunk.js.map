{"version":3,"file":"packs/js/features/public_timeline-b0718bed7ad27af365c8.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/bubble_timeline/index.tsx","webpack://mangane-fe/./app/soapbox/features/public_timeline/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{Link}from'react-router-dom';import{changeSetting}from'soapbox/actions/settings';import{expandBubbleTimeline}from'soapbox/actions/timelines';import PullToRefresh from'soapbox/components/pull-to-refresh';import SubNavigation from'soapbox/components/sub_navigation';import TimelineSettings from'soapbox/components/timeline_settings';import{Button,Column,IconButton,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useSettings}from'soapbox/hooks';import Timeline from'../ui/components/timeline';const messages=defineMessages({title:{\"id\":\"tabs_bar.bubble\",\"defaultMessage\":\"Featured\"},settings:{\"id\":\"settings.settings\",\"defaultMessage\":\"Settings\"}});const BubbleTimeline=()=>{const intl=useIntl();const dispatch=useAppDispatch();const[showSettings,setShowSettings]=useState(false);const settings=useSettings();const onlyMedia=settings.getIn(['bubble','other','onlyMedia']);const excludeReplies=settings.getIn(['bubble','shows','reply']);const siteTitle=useAppSelector(state=>state.instance.title);const showExplanationBox=settings.get('showExplanationBox');const dismissExplanationBox=React.useCallback(()=>{dispatch(changeSetting(['showExplanationBox'],false));},[dispatch]);const handleLoadMore=React.useCallback(maxId=>{dispatch(expandBubbleTimeline({maxId,onlyMedia,excludeReplies}));},[dispatch,excludeReplies,onlyMedia]);const handleRefresh=React.useCallback(()=>{return dispatch(expandBubbleTimeline({onlyMedia,excludeReplies}));},[dispatch,excludeReplies,onlyMedia]);useEffect(()=>{dispatch(expandBubbleTimeline({onlyMedia,excludeReplies}));// bubble timeline doesnt have streaming for now\n},[dispatch,excludeReplies,onlyMedia]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.title),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pt-4 sm:p-0 flex justify-between\"},void 0,/*#__PURE__*/_jsx(SubNavigation,{message:intl.formatMessage(messages.title)}),/*#__PURE__*/_jsx(IconButton,{src:!showSettings?require('@tabler/icons/chevron-down.svg'):require('@tabler/icons/chevron-up.svg'),onClick:()=>setShowSettings(!showSettings),title:intl.formatMessage(messages.settings)})),showSettings&&/*#__PURE__*/_jsx(TimelineSettings,{className:\"mb-3\",timeline:\"bubble\",onClose:()=>setShowSettings(false)}),showExplanationBox&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"lg\",weight:\"bold\",className:\"mb-2\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.title\",defaultMessage:\"What is the Fediverse?\"})),/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.explanation\",defaultMessage:\"{site_title} is part of the Fediverse, a social network made up of thousands of independent social media sites (aka \\\"servers\\\"). The posts you see here are from 3rd-party servers. You have the freedom to engage with them, or to block any server you don't like. Pay attention to the full username after the second @ symbol to know which server a post is from. To see only {site_title} posts, visit {local}.\",values:{site_title:siteTitle,local:/*#__PURE__*/_jsx(Link,{to:\"/timeline/local\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.home.local_tab\",defaultMessage:\"the {site_title} tab\",values:{site_title:siteTitle}}))}}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.bubble\",defaultMessage:\"This timeline shows you all the statuses published on a selection of other instances curated by your moderators.\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\"},void 0,/*#__PURE__*/_jsx(Button,{theme:\"link\",onClick:dismissExplanationBox},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.dismiss\",defaultMessage:\"Don\\\\'t show again\"})))),/*#__PURE__*/_jsx(PullToRefresh,{onRefresh:handleRefresh},void 0,/*#__PURE__*/_jsx(Timeline,{scrollKey:'bubble_timeline',timelineId:\"bubble\".concat(onlyMedia?':media':'').concat(excludeReplies?':exclude_replies':''),onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.public\",defaultMessage:\"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up\"}),divideType:\"space\"}))));};export default BubbleTimeline;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{Link}from'react-router-dom';import{changeSetting}from'soapbox/actions/settings';import{connectPublicStream}from'soapbox/actions/streaming';import{expandPublicTimeline}from'soapbox/actions/timelines';import PullToRefresh from'soapbox/components/pull-to-refresh';import SubNavigation from'soapbox/components/sub_navigation';import TimelineSettings from'soapbox/components/timeline_settings';import{Button,Column,IconButton,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useSettings}from'soapbox/hooks';import Timeline from'../ui/components/timeline';const messages=defineMessages({title:{\"id\":\"column.public\",\"defaultMessage\":\"Explore\"},settings:{\"id\":\"settings.settings\",\"defaultMessage\":\"Settings\"}});const CommunityTimeline=()=>{const intl=useIntl();const dispatch=useAppDispatch();const[showSettings,setShowSettings]=useState(false);const settings=useSettings();const onlyMedia=settings.getIn(['public','other','onlyMedia']);const excludeReplies=settings.getIn(['public','shows','reply']);const siteTitle=useAppSelector(state=>state.instance.title);const showExplanationBox=settings.get('showExplanationBox');const dismissExplanationBox=React.useCallback(()=>{dispatch(changeSetting(['showExplanationBox'],false));},[dispatch]);const handleLoadMore=React.useCallback(maxId=>{dispatch(expandPublicTimeline({maxId,onlyMedia,excludeReplies}));},[dispatch,excludeReplies,onlyMedia]);const handleRefresh=React.useCallback(()=>{return dispatch(expandPublicTimeline({onlyMedia,excludeReplies}));},[dispatch,excludeReplies,onlyMedia]);useEffect(()=>{dispatch(expandPublicTimeline({onlyMedia,excludeReplies}));const disconnect=dispatch(connectPublicStream({onlyMedia,excludeReplies}));return()=>{disconnect();};},[dispatch,excludeReplies,onlyMedia]);return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.title),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pt-4 sm:p-0 flex justify-between\"},void 0,/*#__PURE__*/_jsx(SubNavigation,{message:intl.formatMessage(messages.title)}),/*#__PURE__*/_jsx(IconButton,{src:!showSettings?require('@tabler/icons/chevron-down.svg'):require('@tabler/icons/chevron-up.svg'),onClick:()=>setShowSettings(!showSettings),title:intl.formatMessage(messages.settings)})),showSettings&&/*#__PURE__*/_jsx(TimelineSettings,{className:\"mb-3\",timeline:\"public\",onClose:()=>setShowSettings(false)}),showExplanationBox&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"lg\",weight:\"bold\",className:\"mb-2\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.title\",defaultMessage:\"What is the Fediverse?\"})),/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.explanation\",defaultMessage:\"{site_title} is part of the Fediverse, a social network made up of thousands of independent social media sites (aka \\\"servers\\\"). The posts you see here are from 3rd-party servers. You have the freedom to engage with them, or to block any server you don't like. Pay attention to the full username after the second @ symbol to know which server a post is from. To see only {site_title} posts, visit {local}.\",values:{site_title:siteTitle,local:/*#__PURE__*/_jsx(Link,{to:\"/timeline/local\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.home.local_tab\",defaultMessage:\"the {site_title} tab\",values:{site_title:siteTitle}}))}}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\"},void 0,/*#__PURE__*/_jsx(Button,{theme:\"link\",onClick:dismissExplanationBox},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.dismiss\",defaultMessage:\"Don\\\\'t show again\"})))),/*#__PURE__*/_jsx(PullToRefresh,{onRefresh:handleRefresh},void 0,/*#__PURE__*/_jsx(Timeline,{scrollKey:'public_timeline',timelineId:\"public\".concat(onlyMedia?':media':'').concat(excludeReplies?':exclude_replies':''),onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.public\",defaultMessage:\"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up\"}),divideType:\"space\"})));};export default CommunityTimeline;"],"names":["messages","title","settings","intl","dispatch","useState","showSettings","setShowSettings","onlyMedia","getIn","excludeReplies","siteTitle","state","instance","showExplanationBox","get","dismissExplanationBox","handleLoadMore","maxId","handleRefresh","useEffect","label","formatMessage","transparent","withHeader","className","message","src","onClick","timeline","onClose","size","weight","id","defaultMessage","values","site_title","local","to","theme","onRefresh","scrollKey","timelineId","concat","onLoadMore","emptyMessage","divideType","disconnect"],"sourceRoot":""}