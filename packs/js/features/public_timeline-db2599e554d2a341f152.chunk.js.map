{"version":3,"file":"packs/js/features/public_timeline-db2599e554d2a341f152.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/bubble_timeline/index.tsx","webpack://mangane-fe/./app/soapbox/features/public_timeline/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useEffect,useMemo,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{Link}from'react-router-dom';import{changeSetting}from'soapbox/actions/settings';import{dequeueTimeline,expandBubbleTimeline}from'soapbox/actions/timelines';import PullToRefresh from'soapbox/components/pull-to-refresh';import SubNavigation from'soapbox/components/sub_navigation';import TimelineSettings from'soapbox/components/timeline_settings';import{Button,Column,IconButton,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useSettings}from'soapbox/hooks';import Timeline from'../ui/components/timeline';const messages=defineMessages({title:{\"id\":\"tabs_bar.bubble\",\"defaultMessage\":\"Featured\"},settings:{\"id\":\"settings.settings\",\"defaultMessage\":\"Settings\"}});const BubbleTimeline=()=>{const intl=useIntl();const dispatch=useAppDispatch();const[showSettings,setShowSettings]=useState(false);const settings=useSettings();const onlyMedia=settings.getIn(['bubble','other','onlyMedia']);const excludeReplies=settings.getIn(['bubble','shows','reply']);const siteTitle=useAppSelector(state=>state.instance.title);const showExplanationBox=settings.get('showExplanationBox');const timelineId=useMemo(()=>\"bubble\".concat(onlyMedia?':media':'').concat(excludeReplies?':exclude_replies':''),[excludeReplies,onlyMedia]);const dismissExplanationBox=React.useCallback(()=>{dispatch(changeSetting(['showExplanationBox'],false));},[dispatch]);const handleLoadMore=React.useCallback(maxId=>{dispatch(expandBubbleTimeline({maxId,onlyMedia,excludeReplies}));},[dispatch,excludeReplies,onlyMedia]);const handleRefresh=React.useCallback(async()=>{await dispatch(expandBubbleTimeline({onlyMedia,excludeReplies}));return dispatch(dequeueTimeline(timelineId));},[dispatch,excludeReplies,onlyMedia,timelineId]);useEffect(()=>{dispatch(expandBubbleTimeline({onlyMedia,excludeReplies}));// bubble timeline doesnt have streaming for now\n},[dispatch,excludeReplies,onlyMedia]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.title),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 flex justify-between items-center\"},void 0,/*#__PURE__*/_jsx(SubNavigation,{className:\"!mb-0\",message:intl.formatMessage(messages.title)}),/*#__PURE__*/_jsx(IconButton,{src:!showSettings?require('@tabler/icons/chevron-down.svg'):require('@tabler/icons/chevron-up.svg'),onClick:()=>setShowSettings(!showSettings),title:intl.formatMessage(messages.settings)})),showSettings&&/*#__PURE__*/_jsx(TimelineSettings,{className:\"mb-3\",timeline:\"bubble\",onClose:()=>setShowSettings(false)}),showExplanationBox&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"lg\",weight:\"bold\",className:\"mb-2\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.title\",defaultMessage:\"What is the Fediverse?\"})),/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.explanation\",defaultMessage:\"{site_title} is part of the Fediverse, a social network made up of thousands of independent social media sites (aka \\\"servers\\\"). The posts you see here are from 3rd-party servers. You have the freedom to engage with them, or to block any server you don't like. Pay attention to the full username after the second @ symbol to know which server a post is from. To see only {site_title} posts, visit {local}.\",values:{site_title:siteTitle,local:/*#__PURE__*/_jsx(Link,{to:\"/timeline/local\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.home.local_tab\",defaultMessage:\"the {site_title} tab\",values:{site_title:siteTitle}}))}}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.bubble\",defaultMessage:\"This timeline shows you all the statuses published on a selection of other instances curated by your moderators.\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\"},void 0,/*#__PURE__*/_jsx(Button,{theme:\"link\",onClick:dismissExplanationBox},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.dismiss\",defaultMessage:\"Don\\\\'t show again\"})))),/*#__PURE__*/_jsx(PullToRefresh,{onRefresh:handleRefresh},void 0,/*#__PURE__*/_jsx(Timeline,{scrollKey:'bubble_timeline',timelineId:timelineId,onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.public\",defaultMessage:\"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up\"}),divideType:\"space\"}))));};export default BubbleTimeline;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useEffect,useMemo,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{Link}from'react-router-dom';import{changeSetting}from'soapbox/actions/settings';import{connectPublicStream}from'soapbox/actions/streaming';import{dequeueTimeline,expandPublicTimeline}from'soapbox/actions/timelines';import PullToRefresh from'soapbox/components/pull-to-refresh';import SubNavigation from'soapbox/components/sub_navigation';import TimelineSettings from'soapbox/components/timeline_settings';import{Button,Column,IconButton,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useSettings}from'soapbox/hooks';import Timeline from'../ui/components/timeline';const messages=defineMessages({title:{\"id\":\"column.public\",\"defaultMessage\":\"Explore\"},settings:{\"id\":\"settings.settings\",\"defaultMessage\":\"Settings\"}});const CommunityTimeline=()=>{const intl=useIntl();const dispatch=useAppDispatch();const[showSettings,setShowSettings]=useState(false);const settings=useSettings();const onlyMedia=settings.getIn(['public','other','onlyMedia']);const excludeReplies=settings.getIn(['public','shows','reply']);const siteTitle=useAppSelector(state=>state.instance.title);const showExplanationBox=settings.get('showExplanationBox');const timelineId=useMemo(()=>\"public\".concat(onlyMedia?':media':'').concat(excludeReplies?':exclude_replies':''),[excludeReplies,onlyMedia]);const dismissExplanationBox=React.useCallback(()=>{dispatch(changeSetting(['showExplanationBox'],false));},[dispatch]);const handleLoadMore=React.useCallback(maxId=>{dispatch(expandPublicTimeline({maxId,onlyMedia,excludeReplies}));},[dispatch,excludeReplies,onlyMedia]);const handleRefresh=React.useCallback(async()=>{await dispatch(expandPublicTimeline({onlyMedia,excludeReplies}));return dispatch(dequeueTimeline(timelineId));},[dispatch,excludeReplies,onlyMedia,timelineId]);useEffect(()=>{dispatch(expandPublicTimeline({onlyMedia,excludeReplies}));const disconnect=dispatch(connectPublicStream({onlyMedia,excludeReplies}));return()=>{disconnect();};},[dispatch,excludeReplies,onlyMedia]);return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.title),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 flex justify-between items-center\"},void 0,/*#__PURE__*/_jsx(SubNavigation,{className:\"!mb-0\",message:intl.formatMessage(messages.title)}),/*#__PURE__*/_jsx(IconButton,{src:!showSettings?require('@tabler/icons/chevron-down.svg'):require('@tabler/icons/chevron-up.svg'),onClick:()=>setShowSettings(!showSettings),title:intl.formatMessage(messages.settings)})),showSettings&&/*#__PURE__*/_jsx(TimelineSettings,{className:\"mb-3\",timeline:\"public\",onClose:()=>setShowSettings(false)}),showExplanationBox&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"lg\",weight:\"bold\",className:\"mb-2\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.title\",defaultMessage:\"What is the Fediverse?\"})),/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.explanation\",defaultMessage:\"{site_title} is part of the Fediverse, a social network made up of thousands of independent social media sites (aka \\\"servers\\\"). The posts you see here are from 3rd-party servers. You have the freedom to engage with them, or to block any server you don't like. Pay attention to the full username after the second @ symbol to know which server a post is from. To see only {site_title} posts, visit {local}.\",values:{site_title:siteTitle,local:/*#__PURE__*/_jsx(Link,{to:\"/timeline/local\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.home.local_tab\",defaultMessage:\"the {site_title} tab\",values:{site_title:siteTitle}}))}}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\"},void 0,/*#__PURE__*/_jsx(Button,{theme:\"link\",onClick:dismissExplanationBox},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.dismiss\",defaultMessage:\"Don\\\\'t show again\"})))),/*#__PURE__*/_jsx(PullToRefresh,{onRefresh:handleRefresh},void 0,/*#__PURE__*/_jsx(Timeline,{scrollKey:'public_timeline',timelineId:timelineId,onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.public\",defaultMessage:\"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up\"}),divideType:\"space\"})));};export default CommunityTimeline;"],"names":["messages","title","settings","intl","dispatch","useState","showSettings","setShowSettings","onlyMedia","getIn","excludeReplies","siteTitle","state","instance","showExplanationBox","get","timelineId","useMemo","concat","dismissExplanationBox","handleLoadMore","maxId","handleRefresh","useEffect","label","formatMessage","transparent","withHeader","className","message","src","onClick","timeline","onClose","size","weight","id","defaultMessage","values","site_title","local","to","theme","onRefresh","scrollKey","onLoadMore","emptyMessage","divideType","disconnect"],"sourceRoot":""}