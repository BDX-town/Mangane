{"version":3,"file":"packs/js/features/settings-cb5cebef6e7af20272f7.chunk.js","mappings":"uOAAikBA,GAAS,QAAe,CAACC,SAAS,CAAC,GAAK,oBAAoB,eAAiB,YAAYC,QAAQ,CAAC,GAAK,mBAAmB,eAAiB,WAAWC,SAAS,CAAC,GAAK,oBAAoB,eAAiB,YAAYC,YAAY,CAAC,GAAK,uBAAuB,eAAiB,eAAeC,YAAY,CAAC,GAAK,wBAAwB,eAAiB,gBAAgBC,YAAY,CAAC,GAAK,wBAAwB,eAAiB,gBAAgBC,eAAe,CAAC,GAAK,2BAA2B,eAAiB,mBAAmBC,aAAa,CAAC,GAAK,yBAAyB,eAAiB,iBAAiBC,SAAS,CAAC,GAAK,oBAAoB,eAAiB,mBAAmBC,cAAc,CAAC,GAAK,0BAA0B,eAAiB,kBAAkBC,iBAAiB,CAAC,GAAK,6BAA6B,eAAiB,gBAAgBC,eAAe,CAAC,GAAK,iCAAiC,eAAiB,mBAAmBC,MAAM,CAAC,GAAK,iBAAiB,eAAiB,iBAAiBC,WAAW,CAAC,GAAK,cAAc,eAAiB,WAAWC,YAAY,CAAC,GAAK,eAAe,eAAiB,YAAYC,QAAQ,CAAC,GAAK,mBAAmB,eAAiB,WAAWC,OAAO,CAAC,GAAK,wBAAwB,eAAiB,iBAAiBC,aAAa,CAAC,GAAK,+BAA+B,eAAiB,kBAAkBC,MAAM,CAAC,GAAK,uBAAuB,eAAiB,eAAeC,QAAQ,CAAC,GAAK,yBAAyB,eAAiB,iBAA0gJ,UAAh9I,WAAK,IAAMC,GAAS,UAAoBC,GAAQ,UAAmBC,GAAK,SAAgBC,GAAI,SAAe,SAAAC,GAAO,OAAAA,EAAMtB,SAASuB,IAAI,UAAcC,GAAc,SAAe,SAAAF,GAAO,OAAAA,EAAMG,MAAMF,IAAI,cAAkBG,GAAS,SAAe,SAAAJ,GAAO,eAAYA,EAAMK,aAAiBC,GAAQ,UAAivBC,EAAaR,EAAIS,MAAM,CAAC,WAAW,SAAeC,EAAc,WAAc,WAAK,IAAIC,EAAeC,EAAsB,OAAyE,QAAlED,EAAe,SAAcR,EAAc,WAAW,gBAAmC,IAAjBQ,GAAiI,QAAjGC,EAAsBD,EAAeT,IAAI,SAASW,MAAK,SAAAC,GAAG,MAAwB,aAAxBA,EAAEZ,IAAI,SAASA,IAAI,aAAkD,IAAxBU,OAA/G,EAAqJA,EAAsBH,MAAM,CAAC,QAAQ,MAAM,CAACN,IAAkE,IAAlD,IAAAY,YAAU,WAAKlB,GAAS,aAAc,CAACA,KAAeU,EAAQ,OAAO,KAAK,IAAMS,EAAYT,EAAQU,cAAcV,EAAQW,SAAS,OAAmB,OAAK,KAAO,CAACC,MAAMpB,EAAKqB,cAAc5C,EAASC,UAAU4C,aAAY,EAAKC,YAAW,QAAO,GAAoB,OAAK,KAAK,CAACC,QAAQ,gBAAW,GAAoB,OAAK,KAAW,QAAG,GAAoB,OAAK,KAAU,CAACC,MAAMzB,EAAKqB,cAAc5C,EAASE,aAAyB,OAAK,KAAS,QAAG,GAAoB,OAAK,IAAK,QAAG,GAAoB,OAAK,IAAS,CAACyC,MAAMpB,EAAKqB,cAAc5C,EAASK,aAAa4C,QAA76C,WAAI,OAAA3B,EAAQ4B,KAAK,4BAA27C,GAAoB,OAAK,OAAO,QAAG,EAAOV,OAA6B,OAAK,KAAW,QAAG,GAAoB,OAAK,KAAU,CAACQ,MAAMzB,EAAKqB,cAAc5C,EAASgB,aAAyB,OAAK,KAAS,QAAG,GAAoB,OAAK,IAAK,QAAG,GAAoB,OAAK,IAAS,CAAC2B,MAAMpB,EAAKqB,cAAc5C,EAASiB,QAAQgC,QAAjgD,WAAI,OAAA3B,EAAQ4B,KAAK,eAAwhD,OAAK,IAAS,CAACP,MAAMpB,EAAKqB,cAAc5C,EAASmB,OAAO8B,QAA/iD,WAAI,OAAA3B,EAAQ4B,KAAK,aAAwjDrB,EAASsB,aAAyB,OAAK,IAAS,CAACR,MAAMpB,EAAKqB,cAAc5C,EAASkB,cAAc+B,QAAlnD,WAAI,OAAA3B,EAAQ4B,KAAK,qBAAkoDrB,EAAST,UAAsB,OAAK,IAAS,CAACuB,MAAMpB,EAAKqB,cAAc5C,EAASoB,SAAS6B,QAAjrD,WAAI,OAAA3B,EAAQ4B,KAAK,kBAA+rDrB,EAAS1B,UAAU0B,EAASpB,WAAwB,gBAAoB,WAAe,MAAkB,OAAK,KAAW,QAAG,GAAoB,OAAK,KAAU,CAACuC,MAAMzB,EAAKqB,cAAc5C,EAASG,cAA0B,OAAK,KAAS,QAAG,GAAoB,OAAK,IAAK,QAAG,EAAO0B,EAAS1B,UAAuB,gBAAoB,WAAe,MAAkB,OAAK,IAAS,CAACwC,MAAMpB,EAAKqB,cAAc5C,EAASM,aAAa2C,QAA1xF,WAAI,OAAA3B,EAAQ4B,KAAK,uBAA0yFhB,IAA4B,OAAK,IAAS,CAACS,MAAMpB,EAAKqB,cAAc5C,EAASO,gBAAgB0C,QAAr1F,WAAI,OAAA3B,EAAQ4B,KAAK,0BAAo3F,OAAK,IAAS,CAACP,MAAMpB,EAAKqB,cAAc5C,EAASQ,cAAcyC,QAAz4F,WAAI,OAAA3B,EAAQ4B,KAAK,wBAA+4F,EAAOlB,EAAaT,EAAKqB,cAAc5C,EAASc,YAAYS,EAAKqB,cAAc5C,EAASe,eAAec,EAASpB,WAAuB,OAAK,IAAS,CAACkC,MAAMpB,EAAKqB,cAAc5C,EAASS,UAAUwC,QAAviG,WAAI,OAAA3B,EAAQ4B,KAAK,2BAAmkG,OAAK,KAAW,QAAG,GAAoB,OAAK,KAAU,CAACF,MAAMzB,EAAKqB,cAAc5C,EAASI,iBAA6B,OAAK,KAAS,QAAG,GAAoB,OAAK,IAAY,MAAMyB,EAAS1B,UAAU0B,EAASjB,iBAA8B,gBAAoB,WAAe,MAAkB,OAAK,KAAW,QAAG,GAAoB,OAAK,KAAU,CAACoC,MAAMzB,EAAKqB,cAAc5C,EAASa,WAAuB,OAAK,KAAS,QAAG,GAAoB,OAAK,IAAK,QAAG,EAAOgB,EAAS1B,WAAuB,OAAK,IAAS,CAACwC,MAAMpB,EAAKqB,cAAc5C,EAASU,eAAeuC,QAAz/G,WAAI,OAAA3B,EAAQ4B,KAAK,wBAA0gHrB,EAASsB,aAAatB,EAASuB,eAA2B,OAAK,IAAS,CAACT,MAAMpB,EAAKqB,cAAc5C,EAASW,kBAAkBsC,QAAtlH,WAAI,OAAA3B,EAAQ4B,KAAK,0BAAqmHrB,EAASjB,iBAA6B,OAAK,IAAS,CAAC+B,MAAMpB,EAAKqB,cAAc5C,EAASY,gBAAgBqC,QAA7pH,WAAI,OAAA3B,EAAQ4B,KAAK,gC,qGCA54ElD,GAAS,QAAe,CAACqD,aAAa,CAAC,GAAK,yCAAyC,eAAiB,iBAAiBC,sBAAsB,CAAC,GAAK,2CAA2C,eAAiB,kCAAkCC,uBAAuB,CAAC,GAAK,4CAA4C,eAAiB,qBAAqBC,uBAAuB,CAAC,GAAK,4CAA4C,eAAiB,uBAAi/B,UAAv8B,WAAK,IAAoVC,EAA9UpC,GAAS,UAAuBE,GAAK,SAAgBtB,GAAS,SAAe,SAAAwB,GAAO,eAAYA,MAAciC,EAAoB,CAACC,QAAQpC,EAAKqB,cAAc5C,EAASsD,uBAAuBM,SAASrC,EAAKqB,cAAc5C,EAASuD,wBAAwBM,SAAStC,EAAKqB,cAAc5C,EAASwD,yBAA0H,OAAmB,OAAK,KAAK,CAACT,QAAQ,gBAAW,GAAoB,OAAK,KAAW,QAAG,GAAoB,OAAK,KAAU,CAACC,MAAMzB,EAAKqB,cAAc5C,EAASqD,kBAA8B,OAAK,KAAS,QAAG,GAAoB,OAAK,KAAW,CAACS,UAAU,sBAAiB,GAAoB,OAAK,IAAK,QAAG,GAAoB,OAAK,IAAS,CAACnB,MAAMpB,EAAKqB,cAAc5C,EAASqD,oBAAe,GAAoB,OAAK,KAAe,CAACU,MAAML,EAAoBM,aAAa/D,EAASyB,IAAI,gBAAgBuC,UAA3jBR,EAAmlB,CAAC,gBAAtkB,SAAAnB,GAAIjB,GAAS,QAAuBoC,EAAKnB,EAAE4B,OAAOC","sources":["webpack://mangane-fe/./app/soapbox/features/settings/index.tsx","webpack://mangane-fe/./app/soapbox/features/settings/media_display.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React,{useEffect}from'react';import{defineMessages,useIntl}from'react-intl';import{useDispatch}from'react-redux';import{useHistory}from'react-router-dom';import{fetchMfa}from'soapbox/actions/mfa';import List,{ListItem}from'soapbox/components/list';import{Card,CardBody,CardHeader,CardTitle,Column}from'soapbox/components/ui';import{useAppSelector,useOwnAccount}from'soapbox/hooks';import{ConfigDB}from'soapbox/utils/config_db';import{getFeatures}from'soapbox/utils/features';import Preferences from'../preferences';const messages=defineMessages({settings:{\"id\":\"settings.settings\",\"defaultMessage\":\"Settings\"},profile:{\"id\":\"settings.profile\",\"defaultMessage\":\"Profile\"},security:{\"id\":\"settings.security\",\"defaultMessage\":\"Security\"},preferences:{\"id\":\"settings.preferences\",\"defaultMessage\":\"Preferences\"},editProfile:{\"id\":\"settings.edit_profile\",\"defaultMessage\":\"Edit Profile\"},changeEmail:{\"id\":\"settings.change_email\",\"defaultMessage\":\"Change Email\"},changePassword:{\"id\":\"settings.change_password\",\"defaultMessage\":\"Change Password\"},configureMfa:{\"id\":\"settings.configure_mfa\",\"defaultMessage\":\"Configure MFA\"},sessions:{\"id\":\"settings.sessions\",\"defaultMessage\":\"Active sessions\"},deleteAccount:{\"id\":\"settings.delete_account\",\"defaultMessage\":\"Delete Account\"},accountMigration:{\"id\":\"settings.account_migration\",\"defaultMessage\":\"Move Account\"},accountAliases:{\"id\":\"navigation_bar.account_aliases\",\"defaultMessage\":\"Account aliases\"},other:{\"id\":\"settings.other\",\"defaultMessage\":\"Other options\"},mfaEnabled:{\"id\":\"mfa.enabled\",\"defaultMessage\":\"Enabled\"},mfaDisabled:{\"id\":\"mfa.disabled\",\"defaultMessage\":\"Disabled\"},content:{\"id\":\"settings.content\",\"defaultMessage\":\"Content\"},blocks:{\"id\":\"navigation_bar.blocks\",\"defaultMessage\":\"Blocked users\"},domainBlocks:{\"id\":\"navigation_bar.domain_blocks\",\"defaultMessage\":\"Hidden domains\"},mutes:{\"id\":\"navigation_bar.mutes\",\"defaultMessage\":\"Muted users\"},filters:{\"id\":\"navigation_bar.filters\",\"defaultMessage\":\"Muted words\"}});/** User settings page. */const Settings=()=>{const dispatch=useDispatch();const history=useHistory();const intl=useIntl();const mfa=useAppSelector(state=>state.security.get('mfa'));const configuration=useAppSelector(state=>state.admin.get('configs'));const features=useAppSelector(state=>getFeatures(state.instance));const account=useOwnAccount();const navigateToChangeEmail=()=>history.push('/settings/email');const navigateToChangePassword=()=>history.push('/settings/password');const navigateToMfa=()=>history.push('/settings/mfa');const navigateToSessions=()=>history.push('/settings/tokens');const navigateToEditProfile=()=>history.push('/settings/profile');const navigateToDeleteAccount=()=>history.push('/settings/account');const navigateToMoveAccount=()=>history.push('/settings/migration');const navigateToAliases=()=>history.push('/settings/aliases');const navigateToBlocks=()=>history.push('/blocks');const navigateToMutes=()=>history.push('/mutes');const navigateToDomainBlocks=()=>history.push('/domain_blocks');const navigateToFilters=()=>history.push('/filters');const isMfaEnabled=mfa.getIn(['settings','totp']);const isLdapEnabled=React.useMemo(()=>{var _ConfigDB$find,_ConfigDB$find$get$fi;return(_ConfigDB$find=ConfigDB.find(configuration,':pleroma',':ldap'))===null||_ConfigDB$find===void 0?void 0:(_ConfigDB$find$get$fi=_ConfigDB$find.get('value').find(e=>e.get('tuple').get(0)===':enabled'))===null||_ConfigDB$find$get$fi===void 0?void 0:_ConfigDB$find$get$fi.getIn(['tuple',1]);},[configuration]);useEffect(()=>{dispatch(fetchMfa());},[dispatch]);if(!account)return null;const displayName=account.display_name||account.username;return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.settings),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(Card,{variant:\"rounded\"},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.profile)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(List,{},void 0,/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.editProfile),onClick:navigateToEditProfile},void 0,/*#__PURE__*/_jsx(\"span\",{},void 0,displayName)))),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.content)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(List,{},void 0,/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.blocks),onClick:navigateToBlocks}),/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.mutes),onClick:navigateToMutes}),features.federating&&/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.domainBlocks),onClick:navigateToDomainBlocks}),features.filters&&/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.filters),onClick:navigateToFilters}))),(features.security||features.sessions)&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.security)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(List,{},void 0,features.security&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.changeEmail),onClick:navigateToChangeEmail}),!isLdapEnabled&&/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.changePassword),onClick:navigateToChangePassword}),/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.configureMfa),onClick:navigateToMfa},void 0,isMfaEnabled?intl.formatMessage(messages.mfaEnabled):intl.formatMessage(messages.mfaDisabled))),features.sessions&&/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.sessions),onClick:navigateToSessions})))),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.preferences)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(Preferences,{})),(features.security||features.accountAliases)&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.other)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(List,{},void 0,features.security&&/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.deleteAccount),onClick:navigateToDeleteAccount}),features.federating&&(features.accountMoving?/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.accountMigration),onClick:navigateToMoveAccount}):features.accountAliases&&/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.accountAliases),onClick:navigateToAliases})))))));};export default Settings;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{getSettings,changeSettingImmediate}from'soapbox/actions/settings';import List,{ListItem}from'soapbox/components/list';import{Card,CardBody,CardHeader,CardTitle}from'soapbox/components/ui';import{SimpleForm,SelectDropdown}from'soapbox/features/forms';import{useAppDispatch,useAppSelector}from'soapbox/hooks';const messages=defineMessages({mediaDisplay:{\"id\":\"preferences.fields.media_display_label\",\"defaultMessage\":\"Media display\"},display_media_default:{\"id\":\"preferences.fields.display_media.default\",\"defaultMessage\":\"Hide media marked as sensitive\"},display_media_hide_all:{\"id\":\"preferences.fields.display_media.hide_all\",\"defaultMessage\":\"Always hide media\"},display_media_show_all:{\"id\":\"preferences.fields.display_media.show_all\",\"defaultMessage\":\"Always show media\"}});const MediaDisplay=()=>{const dispatch=useAppDispatch();const intl=useIntl();const settings=useAppSelector(state=>getSettings(state));const displayMediaOptions={default:intl.formatMessage(messages.display_media_default),hide_all:intl.formatMessage(messages.display_media_hide_all),show_all:intl.formatMessage(messages.display_media_show_all)};const onSelectChange=path=>{return e=>{dispatch(changeSettingImmediate(path,e.target.value));};};return/*#__PURE__*/_jsx(Card,{variant:\"rounded\"},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.mediaDisplay)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(SimpleForm,{className:\"p-0 space-y-3\"},void 0,/*#__PURE__*/_jsx(List,{},void 0,/*#__PURE__*/_jsx(ListItem,{label:intl.formatMessage(messages.mediaDisplay)},void 0,/*#__PURE__*/_jsx(SelectDropdown,{items:displayMediaOptions,defaultValue:settings.get('displayMedia'),onChange:onSelectChange(['displayMedia'])}))))));};export default MediaDisplay;"],"names":["messages","settings","profile","security","preferences","editProfile","changeEmail","changePassword","configureMfa","sessions","deleteAccount","accountMigration","accountAliases","other","mfaEnabled","mfaDisabled","content","blocks","domainBlocks","mutes","filters","dispatch","history","intl","mfa","state","get","configuration","admin","features","instance","account","isMfaEnabled","getIn","isLdapEnabled","_ConfigDB$find","_ConfigDB$find$get$fi","find","e","useEffect","displayName","display_name","username","label","formatMessage","transparent","withHeader","variant","title","onClick","push","federating","accountMoving","mediaDisplay","display_media_default","display_media_hide_all","display_media_show_all","path","displayMediaOptions","default","hide_all","show_all","className","items","defaultValue","onChange","target","value"],"sourceRoot":""}