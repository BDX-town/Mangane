{"version":3,"file":"packs/js/features/chats/chat_room-d935c163e87183537605.chunk.js","mappings":";;;;;;;;;;;;;;;;;;;AAAA,sBAuEwB;AAvExB,IAAI,YAAY,GAAG,4EAA4E,CAAC;AAChD;AACC;AACe;AACjB;AACgB;AACf;AACC;AACiB;AACtB;AAC5C,IAAM,OAAO,GAAG,8DAAW,EAAE,CAAC;AAE9B,0BAA0B;AAC1B,IAAM,QAAQ,GAAG,cAAI;IAEjB,UAAM,GACJ,IAAI,OADA,CACC;IACT,IAAM,QAAQ,GAAG,6DAAc,EAAE,CAAC;IAClC,IAAM,UAAU,GAAG,6DAAc,CAAC,2DAAa,CAAC,CAAC;IACjD,IAAM,SAAS,GAAG,6CAAM,CAAC,IAAI,CAAC,CAAC;IAC/B,IAAM,IAAI,GAAG,6DAAc,CAAC,eAAK;QAC/B,IAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,8CAAY,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;QACzE,OAAO,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;IAEH,IAAM,UAAU,GAAG;QACjB,IAAI,kBAAkB,CAAC;QAEvB,CAAC,kBAAkB,GAAG,SAAS,CAAC,OAAO,CAAC,KAAK,IAAI,IAAI,kBAAkB,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;IAC3H,CAAC,CAAC;IAEF,IAAM,cAAc,GAAG,YAAE;QACvB,SAAS,CAAC,OAAO,GAAG,EAAE,CAAC;QACvB,UAAU,EAAE,CAAC;IACf,CAAC,CAAC;IAEF,IAAM,QAAQ,GAAG;QACf,IAAI,CAAC,IAAI;YAAE,OAAO;QAClB,QAAQ,CAAC,mEAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;IAClC,CAAC,CAAC;IAEF,gDAAS,CAAC;QACR,QAAQ,CAAC,gEAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;QACnC,QAAQ,EAAE,CAAC;IACb,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,kFAAkF;IAEvG,gDAAS,CAAC;QACR,QAAQ,EAAE,CAAC;IACb,CAAC,EAAE,CAAC,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IAC9D,IAAI,CAAC,IAAI;QAAE,OAAO,IAAI,CAAC;IACvB,OAAO,aAAa,iDAAmB,CAAC,yDAAM,EAAE;QAC9C,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,+DAAO,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;QACpD,MAAM,EAAE,KAAI;QACZ,QAAQ,EAAE;YACR,QAAQ,EAAE,YAAY;YACtB,UAAU,EAAE,EAAE;YACd,YAAY,EAAE,CAAC;SAChB;KACF,EAAE,aAAa,iDAAmB,CAAC,4DAAO,EAAE;QAC3C,MAAM,EAAE,IAAI,CAAC,EAAE;QACf,aAAa,EAAE,cAAc;QAC7B,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,KAAI;QACZ,QAAQ,EAAE;YACR,QAAQ,EAAE,YAAY;YACtB,UAAU,EAAE,EAAE;YACd,YAAY,EAAE,CAAC;SAChB;KACF,CAAC,CAAC,CAAC;AACN,CAAC,CAAC;AAEF,+DAAe,QAAQ,EAAC","sources":["webpack://mangane-fe/./app/soapbox/features/chats/chat-room.tsx"],"sourcesContent":["var _jsxFileName = \"/home/runner/work/Mangane/Mangane/app/soapbox/features/chats/chat-room.tsx\";\nimport { Map as ImmutableMap } from 'immutable';\nimport React, { useEffect, useRef } from 'react';\nimport { fetchChat, markChatRead } from 'soapbox/actions/chats';\nimport { Column } from 'soapbox/components/ui';\nimport { useAppSelector, useAppDispatch } from 'soapbox/hooks';\nimport { makeGetChat } from 'soapbox/selectors';\nimport { getAcct } from 'soapbox/utils/accounts';\nimport { displayFqn as getDisplayFqn } from 'soapbox/utils/state';\nimport ChatBox from './components/chat-box';\nconst getChat = makeGetChat();\n\n/** Fullscreen chat UI. */\nconst ChatRoom = _ref => {\n  let {\n    params\n  } = _ref;\n  const dispatch = useAppDispatch();\n  const displayFqn = useAppSelector(getDisplayFqn);\n  const inputElem = useRef(null);\n  const chat = useAppSelector(state => {\n    const chat = state.chats.items.get(params.chatId, ImmutableMap()).toJS();\n    return getChat(state, chat);\n  });\n\n  const focusInput = () => {\n    var _inputElem$current;\n\n    (_inputElem$current = inputElem.current) === null || _inputElem$current === void 0 ? void 0 : _inputElem$current.focus();\n  };\n\n  const handleInputRef = el => {\n    inputElem.current = el;\n    focusInput();\n  };\n\n  const markRead = () => {\n    if (!chat) return;\n    dispatch(markChatRead(chat.id));\n  };\n\n  useEffect(() => {\n    dispatch(fetchChat(params.chatId));\n    markRead();\n  }, [params.chatId]); // If this component is loaded at all, we can instantly mark new messages as read.\n\n  useEffect(() => {\n    markRead();\n  }, [chat === null || chat === void 0 ? void 0 : chat.unread]);\n  if (!chat) return null;\n  return /*#__PURE__*/React.createElement(Column, {\n    label: \"@\".concat(getAcct(chat.account, displayFqn)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ChatBox, {\n    chatId: chat.id,\n    onSetInputRef: handleInputRef,\n    autosize: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default ChatRoom;"],"names":[],"sourceRoot":""}