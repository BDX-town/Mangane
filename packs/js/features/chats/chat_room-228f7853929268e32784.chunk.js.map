{"version":3,"file":"packs/js/features/chats/chat_room-228f7853929268e32784.chunk.js","mappings":"uMAAyeA,GAAQ,UAC1N,UADiR,SAAAC,GAAW,IAAAC,EAAQD,EAAI,OAAOE,GAAS,UAAuBC,GAAW,QAAe,MAAqBC,GAAU,IAAAC,QAAO,MAAYC,GAAK,SAAe,SAAAC,GAAQ,IAAMD,EAAKC,EAAMC,MAAMC,MAAMC,IAAIT,EAAOU,QAAO,YAAgBC,OAAO,OAAOb,EAAQQ,EAAMD,MAAyOO,EAAS,WAASP,GAAYJ,GAAS,QAAaI,EAAKQ,MAC9/B,OADqgC,IAAAC,YAAU,WAAKb,GAAS,QAAUD,EAAOU,SAASE,MAAa,CAACZ,EAAOU,UACzpC,IAAAI,YAAU,WAAKF,MAAa,CAACP,MAAAA,OAA2B,EAAOA,EAAKU,SAAaV,GAAoC,OAAK,KAAO,CAACW,MAAM,IAAIC,QAAO,QAAQZ,EAAKa,QAAQhB,UAAc,GAAoB,OAAK,IAAQ,CAACQ,OAAOL,EAAKQ,GAAGM,cAD4vB,SAAAC,GAAhK,IAASC,EAA4JlB,EAAUmB,QAAQF,EAAlH,QAAxCC,EAAmBlB,EAAUmB,eAAsC,IAArBD,GAAmCA,EAAmBE,SAChsBC,UAAS,KAAhL","sources":["webpack://mangane-fe/./app/soapbox/features/chats/chat-room.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import{Map as ImmutableMap}from'immutable';import React,{useEffect,useRef}from'react';import{fetchChat,markChatRead}from'soapbox/actions/chats';import{Column}from'soapbox/components/ui';import{useAppSelector,useAppDispatch}from'soapbox/hooks';import{makeGetChat}from'soapbox/selectors';import{getAcct}from'soapbox/utils/accounts';import{displayFqn as getDisplayFqn}from'soapbox/utils/state';import ChatBox from'./components/chat-box';const getChat=makeGetChat();/** Fullscreen chat UI. */const ChatRoom=_ref=>{let{params}=_ref;const dispatch=useAppDispatch();const displayFqn=useAppSelector(getDisplayFqn);const inputElem=useRef(null);const chat=useAppSelector(state=>{const chat=state.chats.items.get(params.chatId,ImmutableMap()).toJS();return getChat(state,chat);});const focusInput=()=>{var _inputElem$current;(_inputElem$current=inputElem.current)===null||_inputElem$current===void 0?void 0:_inputElem$current.focus();};const handleInputRef=el=>{inputElem.current=el;focusInput();};const markRead=()=>{if(!chat)return;dispatch(markChatRead(chat.id));};useEffect(()=>{dispatch(fetchChat(params.chatId));markRead();},[params.chatId]);// If this component is loaded at all, we can instantly mark new messages as read.\nuseEffect(()=>{markRead();},[chat===null||chat===void 0?void 0:chat.unread]);if(!chat)return null;return/*#__PURE__*/_jsx(Column,{label:\"@\".concat(getAcct(chat.account,displayFqn))},void 0,/*#__PURE__*/_jsx(ChatBox,{chatId:chat.id,onSetInputRef:handleInputRef,autosize:true}));};export default ChatRoom;"],"names":["getChat","_ref","params","dispatch","displayFqn","inputElem","useRef","chat","state","chats","items","get","chatId","toJS","markRead","id","useEffect","unread","label","concat","account","onSetInputRef","el","_inputElem$current","current","focus","autosize"],"sourceRoot":""}