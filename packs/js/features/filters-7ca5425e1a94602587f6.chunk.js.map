{"version":3,"file":"packs/js/features/filters-7ca5425e1a94602587f6.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/filters/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchFilters,createFilter,deleteFilter}from'soapbox/actions/filters';import snackbar from'soapbox/actions/snackbar';import Icon from'soapbox/components/icon';import ScrollableList from'soapbox/components/scrollable_list';import{Button,CardHeader,CardTitle,Column,Form,FormActions,FormGroup,Input,Text}from'soapbox/components/ui';import{FieldsGroup,Checkbox}from'soapbox/features/forms';import{useAppDispatch,useAppSelector}from'soapbox/hooks';const messages=defineMessages({heading:{\"id\":\"column.filters\",\"defaultMessage\":\"Muted words\"},subheading_add_new:{\"id\":\"column.filters.subheading_add_new\",\"defaultMessage\":\"Add New Filter\"},keyword:{\"id\":\"column.filters.keyword\",\"defaultMessage\":\"Keyword or phrase\"},expires:{\"id\":\"column.filters.expires\",\"defaultMessage\":\"Expire after\"},expires_hint:{\"id\":\"column.filters.expires_hint\",\"defaultMessage\":\"Expiration dates are not currently supported\"},home_timeline:{\"id\":\"column.filters.home_timeline\",\"defaultMessage\":\"Home timeline\"},public_timeline:{\"id\":\"column.filters.public_timeline\",\"defaultMessage\":\"Public timeline\"},notifications:{\"id\":\"column.filters.notifications\",\"defaultMessage\":\"Notifications\"},conversations:{\"id\":\"column.filters.conversations\",\"defaultMessage\":\"Conversations\"},drop_header:{\"id\":\"column.filters.drop_header\",\"defaultMessage\":\"Drop instead of hide\"},drop_hint:{\"id\":\"column.filters.drop_hint\",\"defaultMessage\":\"Filtered posts will disappear irreversibly, even if filter is later removed\"},whole_word_header:{\"id\":\"column.filters.whole_word_header\",\"defaultMessage\":\"Whole word\"},whole_word_hint:{\"id\":\"column.filters.whole_word_hint\",\"defaultMessage\":\"When the keyword or phrase is alphanumeric only, it will only be applied if it matches the whole word\"},add_new:{\"id\":\"column.filters.add_new\",\"defaultMessage\":\"Add New Filter\"},create_error:{\"id\":\"column.filters.create_error\",\"defaultMessage\":\"Error adding filter\"},delete_error:{\"id\":\"column.filters.delete_error\",\"defaultMessage\":\"Error deleting filter\"},subheading_filters:{\"id\":\"column.filters.subheading_filters\",\"defaultMessage\":\"Current Filters\"},delete:{\"id\":\"column.filters.delete\",\"defaultMessage\":\"Delete\"}});// const expirations = {\n//   null: 'Never',\n//   // 3600: '30 minutes',\n//   // 21600: '1 hour',\n//   // 43200: '12 hours',\n//   // 86400 : '1 day',\n//   // 604800: '1 week',\n// };\nconst Filters=()=>{const intl=useIntl();const dispatch=useAppDispatch();const filters=useAppSelector(state=>state.filters);const[phrase,setPhrase]=useState('');const[expiresAt]=useState('');const[homeTimeline,setHomeTimeline]=useState(true);const[publicTimeline,setPublicTimeline]=useState(false);const[notifications,setNotifications]=useState(false);const[conversations,setConversations]=useState(false);const[irreversible,setIrreversible]=useState(false);const[wholeWord,setWholeWord]=useState(true);// const handleSelectChange = e => {\n//   this.setState({ [e.target.name]: e.target.value });\n// };\nconst handleAddNew=e=>{e.preventDefault();const context=[];if(homeTimeline){context.push('home');}if(publicTimeline){context.push('public');}if(notifications){context.push('notifications');}if(conversations){context.push('thread');}dispatch(createFilter(phrase,expiresAt,context,wholeWord,irreversible)).then(()=>{return dispatch(fetchFilters());}).catch(error=>{dispatch(snackbar.error(intl.formatMessage(messages.create_error)));});};const handleFilterDelete=e=>{dispatch(deleteFilter(e.currentTarget.dataset.value)).then(()=>{return dispatch(fetchFilters());}).catch(()=>{dispatch(snackbar.error(intl.formatMessage(messages.delete_error)));});};useEffect(()=>{dispatch(fetchFilters());},[]);const emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.filters\",defaultMessage:\"You haven't created any muted words yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"filter-settings-panel\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_add_new)})),/*#__PURE__*/_jsx(Form,{onSubmit:handleAddNew},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.keyword)},void 0,/*#__PURE__*/_jsx(Input,{required:true,type:\"text\",name:\"phrase\",onChange:_ref=>{let{target}=_ref;return setPhrase(target.value);}})),/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(Text,{tag:\"label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.context_header\",defaultMessage:\"Filter contexts\"})),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"xs\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.context_hint\",defaultMessage:\"One or multiple contexts where the filter should apply\"})),/*#__PURE__*/_jsx(\"div\",{className:\"two-col\"},void 0,/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.home_timeline),name:\"home_timeline\",checked:homeTimeline,onChange:_ref2=>{let{target}=_ref2;return setHomeTimeline(target.checked);}}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.public_timeline),name:\"public_timeline\",checked:publicTimeline,onChange:_ref3=>{let{target}=_ref3;return setPublicTimeline(target.checked);}}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.notifications),name:\"notifications\",checked:notifications,onChange:_ref4=>{let{target}=_ref4;return setNotifications(target.checked);}}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.conversations),name:\"conversations\",checked:conversations,onChange:_ref5=>{let{target}=_ref5;return setConversations(target.checked);}}))),/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.drop_header),hint:intl.formatMessage(messages.drop_hint),name:\"irreversible\",checked:irreversible,onChange:_ref6=>{let{target}=_ref6;return setIrreversible(target.checked);}}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.whole_word_header),hint:intl.formatMessage(messages.whole_word_hint),name:\"whole_word\",checked:wholeWord,onChange:_ref7=>{let{target}=_ref7;return setWholeWord(target.checked);}})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"primary\"},void 0,intl.formatMessage(messages.add_new)))),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_filters)})),/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"filters\",emptyMessage:emptyMessage},void 0,filters.map((filter,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"filter__container\"},i,/*#__PURE__*/_jsx(\"div\",{className:\"filter__details\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"filter__phrase\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_phrase_label\",defaultMessage:\"Keyword or phrase:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.phrase)),/*#__PURE__*/_jsx(\"div\",{className:\"filter__contexts\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_context_label\",defaultMessage:\"Filter contexts:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.context.map((context,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"context\"},i,context)))),/*#__PURE__*/_jsx(\"div\",{className:\"filter__details\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_details_label\",defaultMessage:\"Filter settings:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.irreversible?/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_drop\",defaultMessage:\"Drop\"})):/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_hide\",defaultMessage:\"Hide\"})),filter.whole_word&&/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_whole-word\",defaultMessage:\"Whole word\"}))))),/*#__PURE__*/_jsx(\"div\",{className:\"filter__delete\",role:\"button\",tabIndex:0,onClick:handleFilterDelete,\"data-value\":filter.id,\"aria-label\":intl.formatMessage(messages.delete)},void 0,/*#__PURE__*/_jsx(Icon,{className:\"filter__delete-icon\",src:require('@tabler/icons/x.svg')}),/*#__PURE__*/_jsx(\"span\",{className:\"filter__delete-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_delete\",defaultMessage:\"Delete\"})))))));};export default Filters;"],"names":["messages","heading","subheading_add_new","keyword","expires","expires_hint","home_timeline","public_timeline","notifications","conversations","drop_header","drop_hint","whole_word_header","whole_word_hint","add_new","create_error","delete_error","subheading_filters","delete","intl","dispatch","filters","state","useState","phrase","setPhrase","expiresAt","homeTimeline","setHomeTimeline","publicTimeline","setPublicTimeline","setNotifications","setConversations","irreversible","setIrreversible","wholeWord","setWholeWord","handleFilterDelete","e","currentTarget","dataset","value","then","catch","formatMessage","useEffect","emptyMessage","id","defaultMessage","className","label","title","onSubmit","preventDefault","context","push","error","labelText","required","type","name","onChange","_ref","target","tag","theme","size","checked","_ref2","_ref3","_ref4","_ref5","hint","_ref6","_ref7","scrollKey","map","filter","i","whole_word","role","tabIndex","onClick","src"],"sourceRoot":""}