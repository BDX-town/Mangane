(self.webpackChunkmangane_fe=self.webpackChunkmangane_fe||[]).push([[75],{1361:function(e,t,o){o(1);var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){if("undefined"!=typeof window){var e=Array.prototype.slice,t=Element.prototype.matches||Element.prototype.msMatchesSelector,o=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),r=function(){function r(e,t){i(this,r),this._inertManager=t,this._rootElement=e,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return n(r,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(null!==this._savedAriaHidden?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach((function(e){this._unmanageNode(e.node)}),this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(e){var t=this;d(e,(function(e){return t._visitNode(e)}));var o=document.activeElement;if(!document.body.contains(e)){for(var n=e,i=void 0;n;){if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){i=n;break}n=n.parentNode}i&&(o=i.activeElement)}e.contains(o)&&(o.blur(),o===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(e){if(e.nodeType===Node.ELEMENT_NODE){var n=e;n!==this._rootElement&&n.hasAttribute("inert")&&this._adoptInertRoot(n),(t.call(n,o)||n.hasAttribute("tabindex"))&&this._manageNode(n)}}},{key:"_manageNode",value:function(e){var t=this._inertManager.register(e,this);this._managedNodes.add(t)}},{key:"_unmanageNode",value:function(e){var t=this._inertManager.deregister(e,this);t&&this._managedNodes.delete(t)}},{key:"_unmanageSubtree",value:function(e){var t=this;d(e,(function(e){return t._unmanageNode(e)}))}},{key:"_adoptInertRoot",value:function(e){var t=this._inertManager.getInertRoot(e);t||(this._inertManager.setInert(e,!0),t=this._inertManager.getInertRoot(e)),t.managedNodes.forEach((function(e){this._manageNode(e.node)}),this)}},{key:"_onMutation",value:function(t,o){t.forEach((function(t){var o=t.target;if("childList"===t.type)e.call(t.addedNodes).forEach((function(e){this._makeSubtreeUnfocusable(e)}),this),e.call(t.removedNodes).forEach((function(e){this._unmanageSubtree(e)}),this);else if("attributes"===t.type)if("tabindex"===t.attributeName)this._manageNode(o);else if(o!==this._rootElement&&"inert"===t.attributeName&&o.hasAttribute("inert")){this._adoptInertRoot(o);var n=this._inertManager.getInertRoot(o);this._managedNodes.forEach((function(e){o.contains(e.node)&&n._manageNode(e.node)}))}}),this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return null!==this._savedAriaHidden}},{key:"savedAriaHidden",set:function(e){this._savedAriaHidden=e},get:function(){return this._savedAriaHidden}}]),r}(),a=function(){function e(t,o){i(this,e),this._node=t,this._overrodeFocusMethod=!1,this._inertRoots=new Set([o]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return n(e,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var e=this._node;null!==this._savedTabIndex?e.setAttribute("tabindex",this._savedTabIndex):e.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete e.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var e=this.node;if(t.call(e,o)){if(-1===e.tabIndex&&this.hasSavedTabIndex)return;e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex),e.setAttribute("tabindex","-1"),e.nodeType===Node.ELEMENT_NODE&&(e.focus=function(){},this._overrodeFocusMethod=!0)}else e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex,e.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(e){this._throwIfDestroyed(),this._inertRoots.add(e)}},{key:"removeInertRoot",value:function(e){this._throwIfDestroyed(),this._inertRoots.delete(e),0===this._inertRoots.size&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return null!==this._savedTabIndex}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(e){this._throwIfDestroyed(),this._savedTabIndex=e},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),e}(),s=function(){function o(e){if(i(this,o),!e)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=e,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(e.head||e.body||e.documentElement),"loading"===e.readyState?e.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return n(o,[{key:"setInert",value:function(e,t){if(t){if(this._inertRoots.has(e))return;var o=new r(e,this);if(e.setAttribute("inert",""),this._inertRoots.set(e,o),!this._document.body.contains(e))for(var n=e.parentNode;n;)11===n.nodeType&&l(n),n=n.parentNode}else{if(!this._inertRoots.has(e))return;this._inertRoots.get(e).destructor(),this._inertRoots.delete(e),e.removeAttribute("inert")}}},{key:"getInertRoot",value:function(e){return this._inertRoots.get(e)}},{key:"register",value:function(e,t){var o=this._managedNodes.get(e);return void 0!==o?o.addInertRoot(t):o=new a(e,t),this._managedNodes.set(e,o),o}},{key:"deregister",value:function(e,t){var o=this._managedNodes.get(e);return o?(o.removeInertRoot(t),o.destroyed&&this._managedNodes.delete(e),o):null}},{key:"_onDocumentLoaded",value:function(){e.call(this._document.querySelectorAll("[inert]")).forEach((function(e){this.setInert(e,!0)}),this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(o,n){var i=this;o.forEach((function(o){switch(o.type){case"childList":e.call(o.addedNodes).forEach((function(o){if(o.nodeType===Node.ELEMENT_NODE){var n=e.call(o.querySelectorAll("[inert]"));t.call(o,"[inert]")&&n.unshift(o),n.forEach((function(e){this.setInert(e,!0)}),i)}}),i);break;case"attributes":if("inert"!==o.attributeName)return;var n=o.target,r=n.hasAttribute("inert");i.setInert(n,r)}}),this)}}]),o}();if(!Element.prototype.hasOwnProperty("inert")){var c=new s(document);Object.defineProperty(Element.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(e){c.setInert(this,e)}})}}function d(e,t,o){if(e.nodeType==Node.ELEMENT_NODE){var n=e;t&&t(n);var i=n.shadowRoot;if(i)return void d(i,t,i);if("content"==n.localName){for(var r=n,a=r.getDistributedNodes?r.getDistributedNodes():[],s=0;s<a.length;s++)d(a[s],t,o);return}if("slot"==n.localName){for(var c=n,l=c.assignedNodes?c.assignedNodes({flatten:!0}):[],u=0;u<l.length;u++)d(l[u],t,o);return}}for(var f=e.firstChild;null!=f;)d(f,t,o),f=f.nextSibling}function l(e){if(!e.querySelector("style#inert-style, link#inert-style")){var t=document.createElement("style");t.setAttribute("id","inert-style"),t.textContent="\n[inert] {\n  pointer-events: none;\n  cursor: default;\n}\n\n[inert], [inert] * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",e.appendChild(t)}}}()},1230:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(344),r=o(0),a=o(1868),s=o(13),c=o(2),d=o(22),l=o(3);t.default=function(e){var t=e.limit,o=(0,l.TL)(),u=(0,l.CG)((function(e){var t;return(null===(t=e.user_lists.birthday_reminders.get(e.me))||void 0===t?void 0:t.items)||(0,i.OrderedSet)()})).slice(0,t),f=(0,r.useRef)(),m=function(){var e,t=new Date,n=t.getDate(),i=t.getMonth()+1;null===(e=o((0,s.xol)(i,n)))||void 0===e||e.then((function(){var e;f.current=setTimeout((function(){return m()}),(e=new Date,new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0).getTime()-e.getTime()))}))};return r.useEffect((function(){return m(),function(){f.current&&clearTimeout(f.current)}}),[]),u.isEmpty()?null:(0,n.Z)(c.$L,{title:(0,n.Z)(a.Z,{id:"birthday_panel.title",defaultMessage:"Birthdays"})},void 0,u.map((function(e){return(0,n.Z)(d.Z,{id:e},e)})))}},1256:function(e,t,o){"use strict";o.r(t),o.d(t,{ProfileHoverCard:function(){return w}});var n=o(1866),i=o(1852),r=(o(1),o(5)),a=o.n(r),s=o(0),c=o(1868),d=o(1877),l=o(1862),u=o(13),f=o(1859),m=o(532),v=o(199),p=o(43),h=o(34),g=o(3),Z=o(9),y=o(133),_=o(2),b=(0,Z.Tm)(),C=function(e){return function(){e((0,f.P_)())}},M=function(e){return function(){e((0,f.Ex)(!0))}},w=function(e){var t,o=e.visible,r=void 0===o||o,Z=(0,g.TL)(),w=(0,l.k6)(),E=(0,s.useState)(null),k=E[0],x=E[1],N=(0,g.CG)((function(e){return e.me})),S=(0,g.CG)((function(e){return e.profile_hover_card.accountId||void 0})),T=(0,g.CG)((function(e){return S&&b(e,S)})),O=(0,g.CG)((function(e){var t;return null===(t=e.profile_hover_card.ref)||void 0===t?void 0:t.current})),I=T?function(e){var t=[];return e.admin?t.push((0,i.Z)(m.Z,{slug:"admin",title:"Admin"},"admin")):e.moderator&&t.push((0,i.Z)(m.Z,{slug:"moderator",title:"Moderator"},"moderator")),e.getIn(["patron","is_patron"])&&t.push((0,i.Z)(m.Z,{slug:"patron",title:"Patron"},"patron")),e.donor&&t.push((0,i.Z)(m.Z,{slug:"donor",title:"Donor"},"donor")),t}(T):[];(0,s.useEffect)((function(){S&&Z((0,u.dmJ)([S]))}),[Z,S]),(0,s.useEffect)((function(){var e=w.listen((function(){y.Uv.cancel(),Z((0,f.Ex)())}));return function(){e()}}),[]);var A=(0,d.D)(O,k),D=A.styles,P=A.attributes;if(!T)return null;var R={__html:T.note_emojified},L=N!==T.id&&!0===(null===(t=T.relationship)||void 0===t?void 0:t.followed_by);return s.createElement("div",(0,n.Z)({className:a()({"absolute transition-opacity w-[320px] z-50 top-0 left-0":!0,"opacity-100":r,"opacity-0 pointer-events-none":!r}),ref:x,style:D.popper},P.popper,{onMouseEnter:C(Z),onMouseLeave:M(Z)}),(0,i.Z)(_.Zb,{variant:"rounded",className:"relative"},void 0,(0,i.Z)(_.eW,{},void 0,(0,i.Z)(_.Kq,{space:2},void 0,(0,i.Z)(p.Z,{fetchComponent:h.i1},void 0,(function(e){return(0,i.Z)(e,{accountId:T.get("id"),action:(0,i.Z)(v.Z,{account:T,small:!0}),badges:I})})),T.source.get("note","").length>0&&(0,i.Z)(_.xv,{size:"sm",dangerouslySetInnerHTML:R})),L&&(0,i.Z)("div",{className:"absolute top-2 left-2"},void 0,(0,i.Z)(m.Z,{slug:"opaque",title:(0,i.Z)(c.Z,{id:"account.follows_you",defaultMessage:"Follows you"})})))))};t.default=w},1254:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=(o(1),o(5)),r=o.n(i),a=o(0),s=o(1844),c=o(1845),d=o(1868),l=o(6),u=o(1867),f=o(31),m=o(14),v=o(1860),p=o(198),h=o(131),g=o(2),Z=o(888),y=o(3),_=o(9),b=(0,s.vU)({follow_requests:{id:"navigation_bar.follow_requests",defaultMessage:"Follow requests"},followers:{id:"account.followers",defaultMessage:"Followers"},follows:{id:"account.follows",defaultMessage:"Follows"},profile:{id:"account.profile",defaultMessage:"Profile"},preferences:{id:"navigation_bar.preferences",defaultMessage:"Preferences"},soapboxConfig:{id:"navigation_bar.soapbox_config",defaultMessage:"Soapbox config"},importData:{id:"navigation_bar.import_data",defaultMessage:"Import data"},accountMigration:{id:"navigation_bar.account_migration",defaultMessage:"Move account"},accountAliases:{id:"navigation_bar.account_aliases",defaultMessage:"Account aliases"},logout:{id:"navigation_bar.logout",defaultMessage:"Logout"},bookmarks:{id:"column.bookmarks",defaultMessage:"Bookmarks"},lists:{id:"column.lists",defaultMessage:"Lists"},invites:{id:"navigation_bar.invites",defaultMessage:"Invites"},developers:{id:"navigation.developers",defaultMessage:"Developers"},addAccount:{id:"profile_dropdown.add_account",defaultMessage:"Add an existing account"},direct:{id:"column.direct",defaultMessage:"Direct messages"},directory:{id:"navigation_bar.profile_directory",defaultMessage:"Profile directory"},dashboard:{id:"tabs_bar.dashboard",defaultMessage:"Dashboard"}}),C=function(e){var t=e.href,o=e.to,i=e.icon,r=e.text,a=e.onClick,s=(0,n.Z)(g.Ug,{space:2,alignItems:"center"},void 0,(0,n.Z)("div",{className:"bg-primary-50 dark:bg-slate-700 relative rounded inline-flex p-2"},void 0,(0,n.Z)(g.JO,{src:i,className:"text-primary-600 h-5 w-5"})),(0,n.Z)(g.xv,{tag:"span",weight:"medium",theme:"muted",className:"group-hover:text-gray-800 dark:group-hover:text-gray-200"},void 0,r));return o?(0,n.Z)(u.OL,{className:"group py-1 rounded-md",to:o,onClick:a},void 0,s):(0,n.Z)("a",{className:"group py-1 rounded-md",href:t,target:"_blank",onClick:a},void 0,s)},M=(0,_._H)();t.default=function(){var e=(0,c.Z)(),t=(0,l.I0)(),i=(0,y.uP)(),s=(0,y.hz)(),w=(0,_.Tm)(),E=(0,y.CG)((function(e){return e.instance})),k=(0,y.CG)((function(e){return e.me})),x=(0,y.CG)((function(e){return k?w(e,k):null})),N=(0,y.CG)((function(e){return M(e)})),S=(0,y.CG)((function(e){return e.sidebar.sidebarOpen})),T=(0,y.CG)((function(e){return(0,m.Gw)(e)})),O=(0,y.CG)((function(e){return e.user_lists.follow_requests.items.count()})),I=s.bubbleTimeline&&T.getIn(["public","bubble"]),A=a.useRef(null),D=a.useState(!1),P=D[0],R=D[1],L=function(){return t((0,v.Xp)())},U=function(){R(!1),L()},j=function(e){return function(o){o.preventDefault(),t((0,f.yD)(e.id))}};return a.useEffect((function(){t((0,f.Y)())}),[]),x?(0,n.Z)("div",{className:r()("sidebar-menu__root",{"sidebar-menu__root--visible":S})},void 0,(0,n.Z)("div",{className:r()({"fixed inset-0 bg-gray-600 bg-opacity-90 z-1000":!0,hidden:!S}),role:"button",onClick:U}),(0,n.Z)("div",{className:"sidebar-menu"},void 0,(0,n.Z)("div",{className:"relative overflow-y-scroll overflow-auto h-full w-full"},void 0,(0,n.Z)("div",{className:"p-4"},void 0,(0,n.Z)(g.Kq,{space:4},void 0,(0,n.Z)(g.Ug,{alignItems:"center",justifyContent:"between"},void 0,(0,n.Z)(u.rU,{to:"/",onClick:L},void 0,(0,n.Z)(h.Z,{alt:"Logo",className:"h-5 w-auto cursor-pointer"})),a.createElement(g.hU,{title:"close",onClick:U,src:o(26),ref:A,className:"text-gray-400 hover:text-gray-600"})),(0,n.Z)(g.Kq,{space:1},void 0,(0,n.Z)(u.rU,{to:"/@".concat(x.acct),onClick:L},void 0,(0,n.Z)(p.Z,{account:x,showProfileHoverCard:!1,withLinkToProfile:!1})),(0,n.Z)(g.Kq,{},void 0,(0,n.Z)("button",{type:"button",onClick:function(e){e.preventDefault(),R((function(e){return!e}))},className:"py-1"},void 0,(0,n.Z)(g.Ug,{alignItems:"center",justifyContent:"between"},void 0,(0,n.Z)(g.xv,{tag:"span",size:"sm",weight:"medium"},void 0,(0,n.Z)(d.Z,{id:"profile_dropdown.switch_account",defaultMessage:"Switch accounts"})),(0,n.Z)(g.JO,{src:o(763),className:r()("text-black dark:text-white transition-transform",{"rotate-180":P})}))),P&&(0,n.Z)("div",{className:"border-t border-solid border-gray-200"},void 0,N.map((function(e){return function(e){return(0,n.Z)("a",{href:"#",className:"block py-2",onClick:j(e)},e.id,(0,n.Z)("div",{className:"pointer-events-none"},void 0,(0,n.Z)(p.Z,{account:e,showProfileHoverCard:!1,withRelationship:!1,withLinkToProfile:!1})))}(e)})),(0,n.Z)(u.OL,{className:"flex py-2 space-x-1",to:"/login/add",onClick:U},void 0,(0,n.Z)(g.JO,{className:"dark:text-white",src:o(55)}),(0,n.Z)(g.xv,{},void 0,e.formatMessage(b.addAccount)))))),(0,n.Z)(Z.Z,{account:x,onClickHandler:U}),(0,n.Z)(g.Kq,{space:2},void 0,(0,n.Z)("hr",{}),(0,n.Z)(C,{to:"/@".concat(x.acct),icon:o(528),text:e.formatMessage(b.profile),onClick:L}),(0,n.Z)(C,{to:"/messages",icon:o(70),text:e.formatMessage(b.direct),onClick:L}),s.bookmarks&&(0,n.Z)(C,{to:"/bookmarks",icon:o(529),text:e.formatMessage(b.bookmarks),onClick:L}),s.lists&&(0,n.Z)(C,{to:"/lists",icon:o(153),text:e.formatMessage(b.lists),onClick:L}),s.profileDirectory&&(0,n.Z)(C,{to:"/directory",icon:o(845),text:e.formatMessage(b.directory),onClick:L}),T.get("isDeveloper")&&(0,n.Z)(C,{to:"/developers",icon:o(846),text:e.formatMessage(b.developers),onClick:L}),s.publicTimeline&&a.createElement(a.Fragment,null,(0,n.Z)("hr",{className:"dark:border-slate-700"}),(0,n.Z)(C,{to:"/timeline/local",icon:s.federating?i:o(135),text:s.federating?E.title:(0,n.Z)(d.Z,{id:"tabs_bar.all",defaultMessage:"All"}),onClick:L}),s.federating&&(0,n.Z)(C,{to:"/timeline/fediverse",icon:o(I?531:530),text:(0,n.Z)(d.Z,{id:"tabs_bar.fediverse",defaultMessage:"Explore"}),onClick:L})),(0,n.Z)("hr",{}),(x.locked||O>0)&&(0,n.Z)(C,{to:"/follow_requests",icon:o(152),text:e.formatMessage(b.follow_requests),onClick:L}),(0,n.Z)(C,{to:"/settings/preferences",icon:o(280),text:e.formatMessage(b.preferences),onClick:L}),x.admin&&(0,n.Z)(C,{to:"/soapbox/config",icon:o(280),text:e.formatMessage(b.soapboxConfig),onClick:L}),x.staff&&(0,n.Z)(C,{to:"/soapbox/admin",icon:o(847),text:e.formatMessage(b.dashboard),onClick:L}),s.import&&(0,n.Z)(C,{to:"/settings/import",icon:o(761),text:e.formatMessage(b.importData),onClick:L}),(0,n.Z)("hr",{}),(0,n.Z)(C,{to:"/logout",icon:o(533),text:e.formatMessage(b.logout),onClick:function(e){e.preventDefault(),t((0,f.ni)())}}))))))):null}},1257:function(e,t,o){"use strict";o.r(t),o.d(t,{StatusHoverCard:function(){return h}});var n=o(1866),i=o(1852),r=(o(1),o(5)),a=o.n(r),s=o(0),c=o(1877),d=o(1862),l=o(1861),u=o(54),f=o(155),m=o(3),v=o(860),p=o(2),h=function(e){var t=e.visible,o=void 0===t||t,r=(0,m.TL)(),h=(0,d.k6)(),g=(0,s.useState)(null),Z=g[0],y=g[1],_=(0,m.CG)((function(e){return e.status_hover_card.statusId||void 0})),b=(0,m.CG)((function(e){return e.statuses.get(_)})),C=(0,m.CG)((function(e){var t;return null===(t=e.status_hover_card.ref)||void 0===t?void 0:t.current}));(0,s.useEffect)((function(){_&&!b&&r((0,u.UK)(_))}),[_,b]),(0,s.useEffect)((function(){var e=h.listen((function(){v.g4.cancel(),r((0,l.SB)())}));return function(){e()}}),[]);var M=(0,c.D)(C,Z,{placement:"top"}),w=M.styles,E=M.attributes,k=(0,s.useCallback)((function(){return function(){r((0,l.Em)())}}),[]),x=(0,s.useCallback)((function(){return function(){r((0,l.SB)(!0))}}),[]);return _?s.createElement("div",(0,n.Z)({className:a()({"absolute transition-opacity w-[500px] z-50 top-0 left-0":!0,"opacity-100":o,"opacity-0 pointer-events-none":!o}),ref:y,style:w.popper},E.popper,{onMouseEnter:k(),onMouseLeave:x()}),(0,i.Z)(p.Zb,{className:"relative"},void 0,(0,i.Z)(p.eW,{},void 0,function(e){return(0,i.Z)(f.Z,{id:e,hoverable:!1,hideActionBar:!0,muted:!0},e)}(_)))):null};t.default=h},1231:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(1844),r=o(1845),a=o(1868),s=o(368),c=o(1854),d=o(2),l=o(3),u=o(9),f=(0,i.vU)({placeholder:{id:"account_note.placeholder",defaultMessage:"No comment provided"},save:{id:"account_note.save",defaultMessage:"Save"}}),m=(0,u.Tm)();t.default=function(){var e=(0,r.Z)(),t=(0,l.TL)(),o=(0,l.CG)((function(e){return e.account_notes.edit.isSubmitting})),i=(0,l.CG)((function(e){return m(e,e.account_notes.edit.account)})),u=(0,l.CG)((function(e){return e.account_notes.edit.comment})),v=function(){t((0,s.Td)())};return(0,n.Z)(d.u_,{title:(0,n.Z)(a.Z,{id:"account_note.target",defaultMessage:"Note for @{target}",values:{target:i.acct}}),onClose:function(){t((0,c.Mr)("ACCOUNT_NOTE"))},confirmationAction:v,confirmationText:e.formatMessage(f.save),confirmationDisabled:o},void 0,(0,n.Z)(d.xv,{theme:"muted"},void 0,(0,n.Z)(a.Z,{id:"account_note.hint",defaultMessage:"You can keep notes about this user for yourself (this will not be shared with them):"})),(0,n.Z)("textarea",{className:"setting-text light",placeholder:e.formatMessage(f.placeholder),value:u,onChange:function(e){t((0,s.zh)(e.target.value))},onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)&&v()},disabled:o,autoFocus:!0}))}},1218:function(e,t,o){"use strict";o.r(t);var n=o(1866),i=o(1852),r=o(5),a=o.n(r),s=o(0),c=o(1868),d=o(69),l=o(16),u=o(122),f=o(2),m=o(22),v=o(117);t.default=function(e){var t=e.status,o=e.actions,r=e.onClick,p=e.onClose,h=function(e,t){if(null===e)return(0,i.Z)("li",{className:"dropdown-menu__separator"},"sep-".concat(t));var o=e.icon,c=void 0===o?null:o,d=e.text,u=e.meta,f=void 0===u?null:u,m=e.active,v=void 0!==m&&m,p=e.href,h=void 0===p?"#":p,g=e.isLogout,Z=e.destructive,y="#"===h?"button":"a",_="#"===h?{onClick:r}:{href:h};return(0,i.Z)("li",{},"".concat(d,"-").concat(t),s.createElement(y,(0,n.Z)({},_,{rel:"noopener","data-index":t,className:a()({active:v,destructive:Z}),"data-method":g?"delete":null}),c&&(0,i.Z)(l.Z,{title:d,src:c,role:"presentation",tabIndex:-1}),(0,i.Z)("div",{},void 0,(0,i.Z)("div",{className:a()({"actions-modal__item-label":!!f})},void 0,d),(0,i.Z)("div",{},void 0,f))))};return(0,i.Z)(v.Z,{defaultStyle:{top:100},style:{top:(0,d.ST)(0)}},void 0,(function(e){var n=e.top;return(0,i.Z)("div",{className:"modal-root__modal actions-modal",style:{top:"".concat(n,"%")}},void 0,t&&(0,i.Z)(f.Kq,{space:2,className:"p-4 bg-gray-50 dark:bg-slate-800 border-b border-solid border-gray-200 dark:border-gray-700"},void 0,(0,i.Z)(m.Z,{id:t.account,showProfileHoverCard:!1,withLinkToProfile:!1,timestamp:t.created_at},t.account),(0,i.Z)(u.Z,{status:t})),(0,i.Z)("ul",{className:a()({"with-status":!!t})},void 0,o&&o.map(h),(0,i.Z)("li",{className:"dropdown-menu__separator"}),(0,i.Z)("li",{},void 0,(0,i.Z)("button",{type:"button",onClick:p},void 0,(0,i.Z)(c.Z,{id:"lightbox.close",defaultMessage:"Cancel"})))))}))}},559:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Z}});var n=o(1852),i=o(1868),r=o(20),a=o(2),s=o(1844),c=o(1845),d=o(76),l=o(100),u=o(16),f=o(216),m=o(3),v=o(9),p=(0,s.vU)({birthday:{id:"account.birthday",defaultMessage:"Born {date}"}}),h=(0,v.Tm)(),g=function(e){var t=e.accountId,i=(0,c.Z)(),r=(0,m.CG)((function(e){return h(e,t)}));if(!r)return null;var a=r.get("birthday");if(!a)return null;var s=i.formatDate(a,{day:"numeric",month:"short",year:"numeric"});return(0,n.Z)("div",{className:"account"},void 0,(0,n.Z)("div",{className:"account__wrapper"},void 0,(0,n.Z)(f.Z,{className:"account__display-name",title:r.get("acct"),href:"/@".concat(r.get("acct")),to:"/@".concat(r.get("acct"))},void 0,(0,n.Z)("div",{className:"account__display-name"},void 0,(0,n.Z)("div",{className:"account__avatar-wrapper"},void 0,(0,n.Z)(d.Z,{account:r,size:36})),(0,n.Z)(l.Z,{account:r}))),(0,n.Z)("div",{className:"flex items-center gap-0.5",title:i.formatMessage(p.birthday,{date:s})},void 0,(0,n.Z)(u.Z,{src:o(884)}),s)))},Z=function(e){var t,o=e.onClose,s=(0,m.CG)((function(e){var t;return null===(t=e.user_lists.birthday_reminders.get(e.me))||void 0===t?void 0:t.items}));if(s){var c=(0,n.Z)(i.Z,{id:"birthdays_modal.empty",defaultMessage:"None of your friends have birthday today."});t=(0,n.Z)(r.Z,{scrollKey:"birthdays",emptyMessage:c,itemClassName:"pb-3"},void 0,s.map((function(e){return(0,n.Z)(g,{accountId:e},e)})))}else t=(0,n.Z)(a.$j,{});return(0,n.Z)(a.u_,{title:(0,n.Z)(i.Z,{id:"column.birthdays",defaultMessage:"Birthdays"}),onClose:function(){o("BIRTHDAYS")}},void 0,t)}},1215:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(1844),r=o(1845),a=o(1868),s=o(16),c=o(2),d=o(880),l=(0,i.vU)({cancel_reblog:{id:"status.cancel_reblog_private",defaultMessage:"Un-repost"},reblog:{id:"status.reblog",defaultMessage:"Repost"}});t.default=function(e){var t=e.status,i=e.onReblog,u=e.onClose,f=(0,r.Z)(),m=t.reblogged?l.cancel_reblog:l.reblog;return(0,n.Z)(c.u_,{title:"Repost?",confirmationAction:function(){i(t),u()},confirmationText:f.formatMessage(m)},void 0,(0,n.Z)(c.Kq,{space:4},void 0,(0,n.Z)(d.Z,{status:t,hideActions:!0}),(0,n.Z)(c.xv,{},void 0,(0,n.Z)(a.Z,{id:"boost_modal.combo",defaultMessage:"You can press {combo} to skip this next time",values:{combo:(0,n.Z)("span",{},void 0,"Shift + ",(0,n.Z)(s.Z,{className:"inline-block align-middle",src:o(101)}))}}))))}},1224:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(1866),r=o(0),a=o(2);t.default=function(e){var t=e.onClose,o=e.component,s=e.componentProps,c=void 0===s?{}:s;return(0,n.Z)(a.u_,{onClose:t,title:""},void 0,r.createElement(o,(0,i.Z)({onClose:t},c)))}},1221:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(1844),r=o(1845),a=o(1868),s=o(19),c=o(1854),d=o(2),l=o(3),u=o(544),f=(0,i.vU)({close:{id:"lightbox.close",defaultMessage:"Close"},confirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},cancelEditing:{id:"confirmations.cancel_editing.confirm",defaultMessage:"Cancel editing"}});t.default=function(e){var t=e.onClose,i=(0,r.Z)(),m=(0,l.TL)(),v=(0,l.CG)((function(e){return e.compose.id})),p=(0,l.CG)((function(e){return e.compose.text})),h=(0,l.CG)((function(e){return e.compose.privacy})),g=(0,l.CG)((function(e){return e.compose.in_reply_to})),Z=(0,l.CG)((function(e){return e.compose.quote}));return(0,n.Z)(d.u_,{title:v?(0,n.Z)(a.Z,{id:"navigation_bar.compose_edit",defaultMessage:"Edit post"}):"direct"===h?(0,n.Z)(a.Z,{id:"navigation_bar.compose_direct",defaultMessage:"Direct message"}):g?(0,n.Z)(a.Z,{id:"navigation_bar.compose_reply",defaultMessage:"Reply to post"}):Z?(0,n.Z)(a.Z,{id:"navigation_bar.compose_quote",defaultMessage:"Quote post"}):(0,n.Z)(a.Z,{id:"navigation_bar.compose",defaultMessage:"Compose new post"}),onClose:function(){p?m((0,c.h7)("CONFIRM",{icon:o(99),heading:v?(0,n.Z)(a.Z,{id:"confirmations.cancel_editing.heading",defaultMessage:"Cancel post editing"}):(0,n.Z)(a.Z,{id:"confirmations.delete.heading",defaultMessage:"Delete post"}),message:v?(0,n.Z)(a.Z,{id:"confirmations.cancel_editing.message",defaultMessage:"Are you sure you want to cancel editing this post? All changes will be lost."}):(0,n.Z)(a.Z,{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this post?"}),confirm:i.formatMessage(v?f.cancelEditing:f.confirm),onConfirm:function(){m((0,c.Mr)("COMPOSE")),m((0,s.qY)())}})):t("COMPOSE")}},void 0,(0,n.Z)(u.Z,{}))}},1216:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=(o(1),o(0)),r=o(1868),a=o(2),s=o(98);t.default=function(e){var t=e.heading,o=e.message,c=e.confirm,d=e.onClose,l=e.onConfirm,u=e.secondary,f=e.onSecondary,m=e.onCancel,v=e.checkbox,p=(0,i.useState)(!1),h=p[0],g=p[1];return(0,n.Z)(a.u_,{title:t,confirmationAction:function(){d("CONFIRM"),l()},confirmationText:c,confirmationDisabled:v&&!h,confirmationTheme:"danger",cancelText:(0,n.Z)(r.Z,{id:"confirmation_modal.cancel",defaultMessage:"Cancel"}),cancelAction:function(){d("CONFIRM"),m&&m()},secondaryText:u,secondaryAction:f&&function(){d("CONFIRM"),f()}},void 0,(0,n.Z)("p",{className:"text-gray-600 dark:text-gray-300"},void 0,o),(0,n.Z)("div",{className:"mt-2"},void 0,v&&(0,n.Z)("div",{className:"confirmation-modal__checkbox"},void 0,(0,n.Z)(s.NA,{},void 0,(0,n.Z)(s.H_,{},void 0,(0,n.Z)(s.XZ,{onChange:function(e){g(e.target.checked)},label:v,checked:h}))))))}},1246:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(1868),r=o(2),a=o(3);t.default=function(){var e=(0,a.Dn)().singleUserMode,t=(0,a.CG)((function(e){return e.instance.title}));return(0,a.CG)((function(e){return e.me}))||e?null:(0,n.Z)("div",{"data-testid":"cta-banner",className:"hidden lg:block"},void 0,(0,n.Z)(r.jL,{theme:"frosted"},void 0,(0,n.Z)(r.Ug,{alignItems:"center",justifyContent:"between"},void 0,(0,n.Z)(r.Kq,{},void 0,(0,n.Z)(r.xv,{theme:"white",size:"xl",weight:"bold"},void 0,(0,n.Z)(i.Z,{id:"signup_panel.title",defaultMessage:"New to {site_title}?",values:{site_title:t}})),(0,n.Z)(r.xv,{theme:"white",weight:"medium",className:"opacity-90"},void 0,(0,n.Z)(i.Z,{id:"signup_panel.subtitle",defaultMessage:"Sign up now to discuss what's happening."}))),(0,n.Z)(r.Ug,{space:2,alignItems:"center"},void 0,(0,n.Z)(r.zx,{theme:"secondary",to:"/login"},void 0,(0,n.Z)(i.Z,{id:"account.login",defaultMessage:"Log in"})),(0,n.Z)(r.zx,{theme:"accent",to:"/signup"},void 0,(0,n.Z)(i.Z,{id:"account.register",defaultMessage:"Sign up"}))))))}},558:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Z}});var n=o(1852),i=(o(1),o(344)),r=o(0),a=o(1844),s=o(1845),c=o(1868),d=o(149),l=o(145),u=o(35),f=o(12),m=o(2),v=o(98),p=o(3),h=(0,o(9).Go)(),g=(0,a.vU)({mediaRemoval:{id:"edit_federation.media_removal",defaultMessage:"Strip media"},forceNsfw:{id:"edit_federation.force_nsfw",defaultMessage:"Force attachments to be marked sensitive"},unlisted:{id:"edit_federation.unlisted",defaultMessage:"Force posts unlisted"},followersOnly:{id:"edit_federation.followers_only",defaultMessage:"Hide posts except to followers"},save:{id:"edit_federation.save",defaultMessage:"Save"},success:{id:"edit_federation.success",defaultMessage:"{host} federation was updated"}}),Z=function(e){var t=e.host,o=e.onClose,a=(0,s.Z)(),Z=(0,p.TL)(),y=(0,p.CG)((function(e){return h(e,t)})),_=(0,r.useState)((0,i.Map)()),b=_[0],C=_[1];(0,r.useEffect)((function(){C(y.get("federation"))}),[y]);var M=function(e){return function(t){var o=t.target;C(b.set(e,o.checked))}},w=function(){Z(function(e,t){return function(o,n){return o((0,u.Q2)()).then((function(){var r=n().admin.get("configs"),a=function(e,t,o){return e.map((function(e,n){return o.get(n)?(0,i.Set)(e).add(t):(0,i.Set)(e).delete(t)}))}(l.Z.toSimplePolicy(r),e,t),s=l.Z.fromSimplePolicy(a);return o((0,u.rF)(s.toJS()))}))}}(t,b)).then((function(){return Z(f.ZP.success(a.formatMessage(g.success,{host:t})))})).catch((function(){})),o()},E=b.toJS(),k=E.avatar_removal,x=E.banner_removal,N=E.federated_timeline_removal,S=E.followers_only,T=E.media_nsfw,O=E.media_removal,I=E.reject,A=k&&x&&O;return(0,n.Z)(m.u_,{onClose:o,title:t,confirmationAction:w,confirmationText:a.formatMessage(g.save)},void 0,(0,n.Z)(v.NA,{onSubmit:w},void 0,(0,n.Z)(m.Kq,{space:2},void 0,(0,n.Z)(m.Ug,{space:2,alignItems:"center"},void 0,(0,n.Z)(d.Z,{checked:I,onChange:M("reject"),icons:!1,id:"reject"}),(0,n.Z)(m.xv,{theme:"muted",tag:"label",size:"sm",htmlFor:"reject"},void 0,(0,n.Z)(c.Z,{id:"edit_federation.reject",defaultMessage:"Reject all activities"}))),(0,n.Z)(m.Ug,{space:2,alignItems:"center"},void 0,(0,n.Z)(d.Z,{checked:A,onChange:function(e){var t=e.target.checked,o=b.merge({avatar_removal:t,banner_removal:t,media_removal:t});C(o)},icons:!1,id:"media_removal",disabled:I}),(0,n.Z)(m.xv,{theme:"muted",tag:"label",size:"sm",htmlFor:"media_removal"},void 0,(0,n.Z)(c.Z,{id:"edit_federation.media_removal",defaultMessage:"Strip media"}))),(0,n.Z)(m.Ug,{space:2,alignItems:"center"},void 0,(0,n.Z)(d.Z,{checked:T,onChange:M("media_nsfw"),icons:!1,id:"media_nsfw",disabled:I||O}),(0,n.Z)(m.xv,{theme:"muted",tag:"label",size:"sm",htmlFor:"media_nsfw"},void 0,(0,n.Z)(c.Z,{id:"edit_federation.force_nsfw",defaultMessage:"Force attachments to be marked sensitive"}))),(0,n.Z)(m.Ug,{space:2,alignItems:"center"},void 0,(0,n.Z)(d.Z,{checked:S,onChange:M("followers_only"),icons:!1,id:"followers_only",disabled:I}),(0,n.Z)(m.xv,{theme:"muted",tag:"label",size:"sm",htmlFor:"followers_only"},void 0,(0,n.Z)(c.Z,{id:"edit_federation.followers_only",defaultMessage:"Hide posts except to followers"}))),(0,n.Z)(m.Ug,{space:2,alignItems:"center"},void 0,(0,n.Z)(d.Z,{checked:N,onChange:M("federated_timeline_removal"),icons:!1,id:"federated_timeline_removal",disabled:I||S}),(0,n.Z)(m.xv,{theme:"muted",tag:"label",size:"sm",htmlFor:"federated_timeline_removal"},void 0,(0,n.Z)(c.Z,{id:"edit_federation.unlisted",defaultMessage:"Force posts unlisted"}))))))}},1226:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(0),r=o(1868),a=o(68),s=o(20),c=o(2),d=o(22),l=o(3);t.default=function(e){var t,o=e.onClose,u=e.statusId,f=(0,l.TL)(),m=(0,l.CG)((function(e){var t;return null===(t=e.user_lists.favourited_by.get(u))||void 0===t?void 0:t.items}));if((0,i.useEffect)((function(){f((0,a.eA)(u))}),[]),m){var v=(0,n.Z)(r.Z,{id:"empty_column.favourites",defaultMessage:"No one has liked this post yet. When someone does, they will show up here."});t=(0,n.Z)(s.Z,{scrollKey:"favourites",emptyMessage:v,itemClassName:"pb-3"},void 0,m.map((function(e){return(0,n.Z)(d.Z,{id:e},e)})))}else t=(0,n.Z)(c.$j,{});return(0,n.Z)(c.u_,{title:(0,n.Z)(r.Z,{id:"column.favourites",defaultMessage:"Likes"}),onClose:function(){o("FAVOURITES")}},void 0,t)}},1219:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return y}});var n,i,r,a=o(1852),s=o(1843),c=(o(1),o(5)),d=o.n(c),l=o(0),u=o(72),f=o.n(u),m=o(44),v=o(6),p=o(19),h=o(236),g=o(1309),Z=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),y=(0,v.$j)((function(e,t){var o=t.id;return{media:e.getIn(["compose","media_attachments"]).find((function(e){return e.get("id")===o}))}}),(function(e,t){var o=t.id;return{onSave:function(t,n){e((0,p.b2)(o,{focus:"".concat(t.toFixed(2),",").concat(n.toFixed(2))}))}}}))((r=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,s.Z)(t,"state",{x:0,y:0,focusX:0,focusY:0,dragging:!1}),(0,s.Z)(t,"handleMouseDown",(function(e){document.addEventListener("mousemove",t.handleMouseMove),document.addEventListener("mouseup",t.handleMouseUp),t.updatePosition(e),t.setState({dragging:!0})})),(0,s.Z)(t,"handleMouseMove",(function(e){t.updatePosition(e)})),(0,s.Z)(t,"handleMouseUp",(function(){document.removeEventListener("mousemove",t.handleMouseMove),document.removeEventListener("mouseup",t.handleMouseUp),t.setState({dragging:!1}),t.props.onSave(t.state.focusX,t.state.focusY)})),(0,s.Z)(t,"updatePosition",(function(e){var o=(0,h.getPointerPosition)(t.node,e),n=o.x,i=o.y,r=2*(n-.5),a=-2*(i-.5);t.setState({x:n,y:i,focusX:r,focusY:a})})),(0,s.Z)(t,"updatePositionFromMedia",(function(e){var o=e.getIn(["meta","focus","x"]),n=e.getIn(["meta","focus","y"]);if(o&&n){var i=o/2+.5,r=n/-2+.5;t.setState({x:i,y:r,focusX:o,focusY:n})}else t.setState({x:.5,y:.5,focusX:0,focusY:0})})),(0,s.Z)(t,"setRef",(function(e){t.node=e})),t}return Z(t,e),t.prototype.componentDidMount=function(){this.updatePositionFromMedia(this.props.media)},t.prototype.componentDidUpdate=function(e){var t=this.props.media;e.media.get("id")!==t.get("id")&&this.updatePositionFromMedia(t)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},t.prototype.render=function(){var e=this.props.media,t=this.state,o=t.x,n=t.y,i=t.dragging,r=e.getIn(["meta","original","width"])||null,s=e.getIn(["meta","original","height"])||null;return(0,a.Z)("div",{className:"modal-root__modal video-modal focal-point-modal"},void 0,l.createElement("div",{className:d()("focal-point",{dragging:i}),ref:this.setRef},(0,a.Z)(g.Z,{previewSrc:e.get("preview_url"),src:e.get("url"),width:r,height:s}),(0,a.Z)("div",{className:"focal-point__reticle",style:{top:"".concat(100*n,"%"),left:"".concat(100*o,"%")}}),(0,a.Z)("div",{className:"focal-point__overlay",onMouseDown:this.handleMouseDown})))},t}(m.ZP),(0,s.Z)(r,"propTypes",{media:f().map.isRequired}),i=r))||i},1247:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(0),r=o(1868),a=o(522),s=o(2),c=o(3),d=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"usd",notation:"compact"}).format(e/100)};t.default=function(){var e=(0,c.TL)(),t=(0,c.CG)((function(e){return e.patron.instance}));if((0,i.useEffect)((function(){e((0,a.vT)())}),[]),t.funding.isEmpty()||t.goals.isEmpty())return null;var o,l=t.getIn(["funding","amount"]),u=t.getIn(["goals","0","amount"]),f=t.getIn(["goals","0","text"]);o=l>=u?i.createElement(i.Fragment,null,(0,n.Z)("strong",{},void 0,d(u))," per month",(0,n.Z)("span",{className:"funding-panel__reached"},void 0,"â€” reached!")):i.createElement(i.Fragment,null,(0,n.Z)("strong",{},void 0,d(l)," out of ",d(u))," per month");var m=function(){var e;e=t.url,Object.assign(document.createElement("a"),{target:"_blank",href:e}).click()};return(0,n.Z)(s.$L,{title:(0,n.Z)(r.Z,{id:"patron.title",defaultMessage:"Funding Goal"}),onActionClick:m},void 0,(0,n.Z)("div",{className:"funding-panel__ratio"},void 0,(0,n.Z)(s.xv,{},void 0,o)),(0,n.Z)(s.ko,{progress:l/u}),(0,n.Z)("div",{className:"funding-panel__description"},void 0,(0,n.Z)(s.xv,{},void 0,f)),(0,n.Z)("div",{},void 0,(0,n.Z)(s.zx,{theme:"ghost",onClick:m},void 0,(0,n.Z)(r.Z,{id:"patron.donate",defaultMessage:"Donate"}))))}},1220:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(1868),r=o(2),a=o(3),s=o(15),c=function(e){var t=e.children;return(0,n.Z)("kbd",{className:"px-1.5 py-1 bg-primary-50 dark:bg-slate-700 border border-solid border-primary-200 rounded-md dark:border-slate-500 text-xs font-sans"},void 0,t)},d=function(e){var t=e.children;return(0,n.Z)("td",{className:"pb-3 px-2"},void 0,t)};t.default=function(e){var t=e.onClose,o=(0,a.CG)((function(e){return(0,s.N$)(e.instance)}));return(0,n.Z)(r.u_,{title:(0,n.Z)(i.Z,{id:"keyboard_shortcuts.heading",defaultMessage:"Keyboard shortcuts"}),onClose:t,width:"4xl"},void 0,(0,n.Z)("div",{className:"flex flex-col lg:flex-row text-xs"},void 0,(0,n.Z)("table",{},void 0,(0,n.Z)("thead",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)("th",{className:"pb-2 font-bold"},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.hotkey",defaultMessage:"Hotkey"})))),(0,n.Z)("tbody",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"r")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.reply",defaultMessage:"to reply"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"m")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.mention",defaultMessage:"to mention author"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"p")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.profile",defaultMessage:"to open author's profile"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"f")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.favourite",defaultMessage:"to like"}))),o.emojiReacts&&(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"e")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.react",defaultMessage:"to react"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"b")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.boost",defaultMessage:"to repost"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"enter"),", ",(0,n.Z)(c,{},void 0,"o")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.enter",defaultMessage:"to open post"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"a")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.open_media",defaultMessage:"to open media"}))))),(0,n.Z)("table",{},void 0,(0,n.Z)("thead",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)("th",{className:"pb-2 font-bold"},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.hotkey",defaultMessage:"Hotkey"})))),(0,n.Z)("tbody",{},void 0,o.spoilers&&(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"x")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.toggle_hidden",defaultMessage:"to show/hide text behind CW"}))),o.spoilers&&(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"h")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.toggle_sensitivity",defaultMessage:"to show/hide media"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"up"),", ",(0,n.Z)(c,{},void 0,"k")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.up",defaultMessage:"to move up in the list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"down"),", ",(0,n.Z)(c,{},void 0,"j")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.down",defaultMessage:"to move down in the list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"n")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.compose",defaultMessage:"to focus the compose textarea"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"alt")," + ",(0,n.Z)(c,{},void 0,"n")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.toot",defaultMessage:"to start a new post"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"backspace")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.back",defaultMessage:"to navigate back"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"s")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.search",defaultMessage:"to focus search"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"esc")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.unfocus",defaultMessage:"to un-focus compose textarea/search"}))))),(0,n.Z)("table",{},void 0,(0,n.Z)("thead",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)("th",{className:"pb-2 font-bold"},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.hotkey",defaultMessage:"Hotkey"})))),(0,n.Z)("tbody",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"g")," + ",(0,n.Z)(c,{},void 0,"h")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.home",defaultMessage:"to open home timeline"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"g")," + ",(0,n.Z)(c,{},void 0,"n")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.notifications",defaultMessage:"to open notifications column"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"g")," + ",(0,n.Z)(c,{},void 0,"f")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.favourites",defaultMessage:"to open likes list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"g")," + ",(0,n.Z)(c,{},void 0,"p")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.pinned",defaultMessage:"to open pinned posts list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"g")," + ",(0,n.Z)(c,{},void 0,"u")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.my_profile",defaultMessage:"to open your profile"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"g")," + ",(0,n.Z)(c,{},void 0,"b")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.blocked",defaultMessage:"to open blocked users list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"g")," + ",(0,n.Z)(c,{},void 0,"m")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.muted",defaultMessage:"to open muted users list"}))),o.followRequests&&(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"g")," + ",(0,n.Z)(c,{},void 0,"r")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.requests",defaultMessage:"to open follow requests list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)(d,{},void 0,(0,n.Z)(c,{},void 0,"?")),(0,n.Z)(d,{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.legend",defaultMessage:"to display this legend"})))))))}},1309:function(e,t,o){"use strict";o.d(t,{Z:function(){return g}});var n,i=o(1852),r=o(1843),a=(o(1),o(5)),s=o.n(a),c=o(0),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e,t){return{x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2}},u=function(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))},f=function(e,t,o){return Math.min(t,Math.max(e,o))},m=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,r.Z)(t,"state",{scale:1}),(0,r.Z)(t,"removers",[]),(0,r.Z)(t,"container",null),(0,r.Z)(t,"image",null),(0,r.Z)(t,"lastTouchEndTime",0),(0,r.Z)(t,"lastDistance",0),(0,r.Z)(t,"handleTouchStart",(function(e){2===e.touches.length&&(t.lastDistance=u.apply(void 0,e.touches))})),(0,r.Z)(t,"handleTouchMove",(function(e){var o=t.container,n=o.scrollTop,i=o.scrollHeight,r=o.clientHeight;if(1!==e.touches.length||n===i-r){if(2===e.touches.length){e.preventDefault(),e.stopPropagation();var a=u.apply(void 0,e.touches),s=l.apply(void 0,e.touches),c=f(1,4,t.state.scale*a/t.lastDistance);t.zoom(c,s),t.lastMidpoint=s,t.lastDistance=a}}else e.stopPropagation()})),(0,r.Z)(t,"handleClick",(function(e){e.stopPropagation();var o=t.props.onClick;o&&o()})),(0,r.Z)(t,"setContainerRef",(function(e){t.container=e})),(0,r.Z)(t,"setImageRef",(function(e){t.image=e})),t}return d(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.handleTouchStart;this.container.addEventListener("touchstart",t),this.removers.push((function(){return e.container.removeEventListener("touchstart",t)})),t=this.handleTouchMove,this.container.addEventListener("touchmove",t,{passive:!1}),this.removers.push((function(){return e.container.removeEventListener("touchend",t)}))},t.prototype.componentWillUnmount=function(){this.removeEventListeners()},t.prototype.removeEventListeners=function(){this.removers.forEach((function(e){return e()})),this.removers=[]},t.prototype.zoom=function(e,t){var o=this,n=this.state.scale,i=this.container,r=i.scrollLeft,a=i.scrollTop,s=(r+t.x)*e/n-t.x,c=(a+t.y)*e/n-t.y;this.setState({scale:e},(function(){o.container.scrollLeft=s,o.container.scrollTop=c}))},t.prototype.render=function(){var e=this.props,t=e.alt,o=e.src,n=this.state.scale,i=1===n?"hidden":"scroll";return c.createElement("div",{className:"zoomable-image",ref:this.setContainerRef,style:{overflow:i}},c.createElement("img",{role:"presentation",ref:this.setImageRef,alt:t,title:t,src:o,style:{transform:"scale(".concat(n,")"),transformOrigin:"0 0"},onClick:this.handleClick}))},t}(c.PureComponent),v=m;(0,r.Z)(m,"defaultProps",{alt:"",width:null,height:null});var p=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),h=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,r.Z)(t,"state",{loading:!0,error:!1,width:null}),(0,r.Z)(t,"removers",[]),(0,r.Z)(t,"canvas",null),(0,r.Z)(t,"loadPreviewCanvas",(function(e){var o=e.previewSrc,n=e.width,i=e.height;return new Promise((function(e,r){var a=new Image,s=function(){a.removeEventListener("error",c),a.removeEventListener("load",d)},c=function(){s(),r()},d=function(){s(),t.canvasContext.drawImage(a,0,0,n,i),e()};a.addEventListener("error",c),a.addEventListener("load",d),a.src=o,t.removers.push(s)}))})),(0,r.Z)(t,"loadOriginalImage",(function(e){var o=e.src;return new Promise((function(e,n){var i=new Image,r=function(){i.removeEventListener("error",a),i.removeEventListener("load",s)},a=function(){r(),n()},s=function(){r(),e()};i.addEventListener("error",a),i.addEventListener("load",s),i.src=o,t.removers.push(r)}))})),(0,r.Z)(t,"setCanvasRef",(function(e){t.canvas=e,e&&t.setState({width:e.offsetWidth})})),t}return p(t,e),Object.defineProperty(t.prototype,"canvasContext",{get:function(){return this.canvas?(this._canvasContext=this._canvasContext||this.canvas.getContext("2d"),this._canvasContext):null},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.loadImage(this.props)},t.prototype.componentDidUpdate=function(e){e.src!==this.props.src&&this.loadImage(this.props)},t.prototype.componentWillUnmount=function(){this.removeEventListeners()},t.prototype.loadImage=function(e){var t=this;this.removeEventListeners(),this.setState({loading:!0,error:!1}),Promise.all([e.previewSrc&&this.loadPreviewCanvas(e),this.hasSize()&&this.loadOriginalImage(e)].filter(Boolean)).then((function(){t.setState({loading:!1,error:!1}),t.clearPreviewCanvas()})).catch((function(){return t.setState({loading:!1,error:!0})}))},t.prototype.clearPreviewCanvas=function(){var e=this.canvas,t=e.width,o=e.height;this.canvasContext.clearRect(0,0,t,o)},t.prototype.removeEventListeners=function(){this.removers.forEach((function(e){return e()})),this.removers=[]},t.prototype.hasSize=function(){var e=this.props,t=e.width,o=e.height;return"number"==typeof t&&"number"==typeof o},t.prototype.render=function(){var e=this.props,t=e.alt,o=e.src,n=e.width,r=e.height,a=e.onClick,d=this.state.loading,l=s()("image-loader",{"image-loader--loading":d,"image-loader--amorphous":!this.hasSize()});return(0,i.Z)("div",{className:l},void 0,d?c.createElement("canvas",{className:"image-loader__preview-canvas",ref:this.setCanvasRef,width:n,height:r}):(0,i.Z)(v,{alt:t,src:o,onClick:a}))},t}(c.PureComponent),g=h;(0,r.Z)(h,"defaultProps",{alt:"",width:null,height:null})},556:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return A}});var n,i,r,a=o(1852),s=o(1843),c=(o(1),o(5)),d=o.n(c),l=o(10),u=o.n(l),f=o(72),m=o.n(f),v=o(44),p=o(1844),h=o(1846),g=o(1868),Z=o(1862),y=o(514),_=o(1866),b=o(0),C=o(60),M=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),w=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,s.Z)(t,"handleLoadedData",(function(){t.props.time&&(t.video.currentTime=t.props.time)})),(0,s.Z)(t,"setRef",(function(e){t.video=e})),(0,s.Z)(t,"handleClick",(function(e){e.stopPropagation();var o=t.props.onClick;o&&o()})),t}return M(t,e),t.prototype.componentDidMount=function(){this.video.addEventListener("loadeddata",this.handleLoadedData)},t.prototype.componentWillUnmount=function(){this.video.removeEventListener("loadeddata",this.handleLoadedData)},t.prototype.render=function(){var e=this.props,t=e.src,o=e.muted,n=e.controls,i=e.alt,r={};return(0,C.gn)()&&(r.playsInline="1"),(0,a.Z)("div",{className:"extended-video-player"},void 0,b.createElement("video",(0,_.Z)({ref:this.setRef,src:t,autoPlay:!0,role:"button",tabIndex:"0","aria-label":i,title:i,muted:o,controls:n,loop:!n,onClick:this.handleClick},r)))},t}(b.PureComponent),E=w,k=o(16),x=o(49),N=o(542),S=o(236),T=o(1309),O=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),I=(0,p.vU)({close:{id:"lightbox.close",defaultMessage:"Close"},previous:{id:"lightbox.previous",defaultMessage:"Previous"},next:{id:"lightbox.next",defaultMessage:"Next"}}),A=(0,h.ZP)(i=(0,Z.EN)((r=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,s.Z)(t,"state",{index:null,navigationHidden:!1}),(0,s.Z)(t,"handleSwipe",(function(e){t.setState({index:e%t.props.media.size})})),(0,s.Z)(t,"handleNextClick",(function(){t.setState({index:(t.getIndex()+1)%t.props.media.size})})),(0,s.Z)(t,"handlePrevClick",(function(){t.setState({index:(t.props.media.size+t.getIndex()-1)%t.props.media.size})})),(0,s.Z)(t,"handleChangeIndex",(function(e){var o=Number(e.currentTarget.getAttribute("data-index"));t.setState({index:o%t.props.media.size})})),(0,s.Z)(t,"handleKeyDown",(function(e){switch(e.key){case"ArrowLeft":t.handlePrevClick(),e.preventDefault(),e.stopPropagation();break;case"ArrowRight":t.handleNextClick(),e.preventDefault(),e.stopPropagation()}})),(0,s.Z)(t,"toggleNavigation",(function(){t.setState((function(e){return{navigationHidden:!e.navigationHidden}}))})),(0,s.Z)(t,"handleStatusClick",(function(e){if(0===e.button&&!e.ctrlKey&&!e.metaKey){e.preventDefault();var o=t.props,n=o.status,i=o.account.get("acct"),r=n.get("id");t.props.history.push("/@".concat(i,"/posts/").concat(r)),t.props.onClose(null,!0)}})),(0,s.Z)(t,"handleCloserClick",(function(e){var o=e.target,n=document.querySelector('.media-modal .react-swipeable-view-container > div[aria-hidden="false"]'),i=o===n||!n.contains(o),r=["zoomable-image"].some((function(e){return o.classList.contains(e)}));(i||r)&&t.props.onClose()})),t}return O(t,e),t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.handleKeyDown,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.handleKeyDown)},t.prototype.getIndex=function(){return null!==this.state.index?this.state.index:this.props.index},t.prototype.render=function(){var e=this,t=this.props,n=t.media,i=t.status,r=t.account,s=t.intl,c=t.onClose,l=this.state.navigationHidden,u=this.getIndex(),f=[],m=n.size>1&&(0,a.Z)("button",{tabIndex:"0",className:"media-modal__nav media-modal__nav--left",onClick:this.handlePrevClick,"aria-label":s.formatMessage(I.previous)},void 0,(0,a.Z)(k.Z,{src:o(378)})),v=n.size>1&&(0,a.Z)("button",{tabIndex:"0",className:"media-modal__nav  media-modal__nav--right",onClick:this.handleNextClick,"aria-label":s.formatMessage(I.next)},void 0,(0,a.Z)(k.Z,{src:o(479)}));n.size>1&&(f=n.map((function(t,o){var n=["media-modal__button"];return o===u&&n.push("media-modal__button--active"),(0,a.Z)("li",{className:"media-modal__page-dot"},o,(0,a.Z)("button",{tabIndex:"0",className:n.join(" "),onClick:e.handleChangeIndex,"data-index":o},void 0,o+1))})));var p=n.map((function(e){return"image"!==e.get("type")})).toArray(),h=n.map((function(t){var o=t.getIn(["meta","original","width"])||null,n=t.getIn(["meta","original","height"])||null,s=i&&r&&(0,a.Z)("a",{href:i.get("url"),onClick:e.handleStatusClick},void 0,(0,a.Z)(g.Z,{id:"lightbox.view_context",defaultMessage:"View context"}));if("image"===t.get("type"))return(0,a.Z)(T.Z,{previewSrc:t.get("preview_url"),src:t.get("url"),width:o,height:n,alt:t.get("description"),onClick:e.toggleNavigation},t.get("url"));if("video"===t.get("type")){var d=e.props.time;return(0,a.Z)(S.default,{preview:t.get("preview_url"),blurhash:t.get("blurhash"),src:t.get("url"),width:t.get("width"),height:t.get("height"),startTime:d||0,onCloseVideo:c,detailed:!0,link:s,alt:t.get("description")},t.get("url"))}return"audio"===t.get("type")?(0,a.Z)(N.default,{src:t.get("url"),alt:t.get("description"),poster:t.get("preview_url")!==t.get("url")?t.get("preview_url"):i&&i.getIn(["account","avatar_static"]),backgroundColor:t.getIn(["meta","colors","background"]),foregroundColor:t.getIn(["meta","colors","foreground"]),accentColor:t.getIn(["meta","colors","accent"]),duration:t.getIn(["meta","original","duration"],0)},t.get("url")):"gifv"===t.get("type")?(0,a.Z)(E,{src:t.get("url"),muted:!0,controls:!1,width:o,link:s,height:n,alt:t.get("description"),onClick:e.toggleNavigation},t.get("preview_url")):null})).toArray(),Z=d()("media-modal__navigation",{"media-modal__navigation--hidden":l});return(0,a.Z)("div",{className:"modal-root__modal media-modal"},void 0,(0,a.Z)("div",{className:"media-modal__closer",role:"presentation",onClick:this.handleCloserClick},void 0,(0,a.Z)(y.ZP,{style:{width:"100%",height:"100%"},containerStyle:{alignItems:"center"},onChangeIndex:this.handleSwipe,onSwitching:this.handleSwitching,index:u},void 0,h)),(0,a.Z)("div",{className:Z},void 0,(0,a.Z)(x.Z,{className:"media-modal__close",title:s.formatMessage(I.close),src:o(26),onClick:c}),m,v,i&&!p[u]&&(0,a.Z)("div",{className:d()("media-modal__meta",{"media-modal__meta--shifted":n.size>1})},void 0,(0,a.Z)("a",{href:i.get("url"),onClick:this.handleStatusClick},void 0,(0,a.Z)(g.Z,{id:"lightbox.view_context",defaultMessage:"View context"}))),(0,a.Z)("ul",{className:"media-modal__pagination"},void 0,f)))},t}(v.ZP),(0,s.Z)(r,"propTypes",{media:m().list.isRequired,status:m().record,account:m().record,index:u().number.isRequired,onClose:u().func.isRequired,intl:u().object.isRequired,history:u().object}),i=r))||i)||i},1228:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(344),r=o(0),a=o(1868),s=o(54),c=o(20),d=o(2),l=o(22),u=o(3),f=(0,o(9).TE)();t.default=function(e){var t,o=e.onClose,m=e.statusId,v=(0,u.TL)(),p=(0,u.CG)((function(e){return f(e,{id:m})})),h=p?(0,i.OrderedSet)(p.mentions.map((function(e){return e.get("id")}))):null;return(0,r.useEffect)((function(){v((0,s.wE)(m))}),[]),t=h?(0,n.Z)(c.Z,{scrollKey:"mentions",itemClassName:"pb-3"},void 0,h.map((function(e){return(0,n.Z)(l.Z,{id:e},e)}))):(0,n.Z)(d.$j,{}),(0,n.Z)(d.u_,{title:(0,n.Z)(a.Z,{id:"column.mentions",defaultMessage:"Mentions"}),onClose:function(){o("MENTIONS")}},void 0,t)}},1217:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(1844),r=o(1868),a=o(1846),s=o(2),c=(0,i.vU)({modalTitle:{id:"missing_description_modal.text",defaultMessage:"You have not entered a description for all attachments."},post:{id:"missing_description_modal.continue",defaultMessage:"Post"},cancel:{id:"missing_description_modal.cancel",defaultMessage:"Cancel"}});t.default=(0,a.ZP)((function(e){var t=e.onClose,o=e.onContinue,i=e.intl;return(0,n.Z)(s.u_,{title:i.formatMessage(c.modalTitle),confirmationAction:o,confirmationText:i.formatMessage(c.post),confirmationTheme:"danger",cancelText:i.formatMessage(c.cancel),cancelAction:t},void 0,(0,n.Z)("p",{className:"text-gray-600 dark:text-gray-300"},void 0,(0,n.Z)(r.Z,{id:"missing_description_modal.description",defaultMessage:"Continue anyway?"})))}))},1275:function(e,t,o){"use strict";o.r(t);var n,i=o(1852),r=(o(1),o(108),o(0)),a=o(1845),s=o(841),c=o(31),d=o(1854),l=o(12),u=o(95),f=o(2),m=o(3),v=o(18);!function(e){e.IDLE="IDLE",e.READY="READY",e.REQUESTED="REQUESTED",e.FAIL="FAIL",e.SUCCESS="SUCCESS"}(n||(n={})),t.default=function(e){var t=e.onClose,o=(0,m.TL)(),p=(0,a.Z)(),h=(0,m.CG)((function(e){return(0,v.hP)(e)})),g=(0,m.CG)((function(e){return e.instance.title})),Z=(0,m.CG)((function(e){return e.verification.isLoading})),y=(0,r.useState)(n.IDLE),_=y[0],b=y[1],C=(0,r.useState)(),M=C[0],w=C[1],E=(0,r.useState)(""),k=E[0],x=E[1],N=(0,r.useState)(!1),S=N[0],T=N[1],O=!!M,I=(0,r.useCallback)((function(e){w(e)}),[]),A=function(e){if(e.preventDefault(),!O)return b(n.IDLE),void o(l.ZP.error(p.formatMessage({id:"sms_verification.invalid",defaultMessage:"Please enter a valid phone number."})));o((0,u.R4)(M)).then((function(){o(l.ZP.success(p.formatMessage({id:"sms_verification.success",defaultMessage:"A verification code has been sent to your phone number."})))})).finally((function(){return b(n.REQUESTED)})).catch((function(){o(l.ZP.error(p.formatMessage({id:"sms_verification.fail",defaultMessage:"Failed to send SMS message to your phone number."})))}))},D=(0,r.useMemo)((function(){switch(_){case n.IDLE:return p.formatMessage({id:"sms_verification.modal.verify_sms",defaultMessage:"Verify SMS"});case n.READY:return p.formatMessage({id:"sms_verification.modal.verify_number",defaultMessage:"Verify phone number"});case n.REQUESTED:return p.formatMessage({id:"sms_verification.modal.verify_code",defaultMessage:"Verify code"});default:return null}}),[_]),P=function(){o((0,u.Tq)(k)).then((function(){b(n.SUCCESS),o((0,c.TK)(h)).then((function(){return o((0,d.Mr)("VERIFY_SMS"))}))})).catch((function(){return o(l.ZP.error(p.formatMessage({id:"sms_verification.invalid",defaultMessage:"Your SMS token has expired."})))}))};return(0,r.useEffect)((function(){6===k.length&&P()}),[k]),(0,i.Z)(f.u_,{title:p.formatMessage({id:"sms_verification.modal.verify_title",defaultMessage:"Verify your phone number"}),onClose:function(){return t("VERIFY_SMS")},cancelAction:_===n.IDLE?function(){return t("VERIFY_SMS")}:void 0,cancelText:"Skip for now",confirmationAction:function(e){switch(_){case n.IDLE:b(n.READY);break;case n.READY:A(e);break;case n.REQUESTED:P()}},confirmationText:D,secondaryAction:_===n.REQUESTED?function(e){T(!0),A(e)}:void 0,secondaryText:_===n.REQUESTED?p.formatMessage({id:"sms_verification.modal.resend_code",defaultMessage:"Resend verification code?"}):void 0,secondaryDisabled:S},void 0,(0,i.Z)(f.Kq,{space:4},void 0,function(){switch(_){case n.IDLE:return(0,i.Z)(f.xv,{theme:"muted"},void 0,p.formatMessage({id:"sms_verification.modal.verify_help_text",defaultMessage:"Verify your phone number to start using {instance}."},{instance:g}));case n.READY:return(0,i.Z)(f.cw,{labelText:"Phone Number"},void 0,(0,i.Z)(f.sb,{value:M,onChange:I,required:!0,autoFocus:!0}));case n.REQUESTED:return r.createElement(r.Fragment,null,(0,i.Z)(f.xv,{theme:"muted",size:"sm",align:"center"},void 0,p.formatMessage({id:"sms_verification.modal.enter_code",defaultMessage:"We sent you a 6-digit code via SMS. Enter it below."})),(0,i.Z)(s.Z,{value:k,onChange:x,numInputs:6,isInputNum:!0,shouldAutoFocus:!0,isDisabled:Z,containerStyle:"flex justify-center mt-2 space-x-4",inputStyle:"w-10i border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"}));default:return null}}()))}},1245:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(1868),r=o(2),a=o(3);t.default=function(){var e=(0,a.Dn)().singleUserMode,t=(0,a.CG)((function(e){return e.instance.title})),o=(0,a.CG)((function(e){return e.instance.registrations}));return(0,a.CG)((function(e){return e.me}))||e||!o?null:(0,n.Z)(r.Kq,{space:2},void 0,(0,n.Z)(r.Kq,{},void 0,(0,n.Z)(r.xv,{size:"lg",weight:"bold"},void 0,(0,n.Z)(i.Z,{id:"signup_panel.title",defaultMessage:"New to {site_title}?",values:{site_title:t}})),(0,n.Z)(r.xv,{theme:"muted",size:"sm"},void 0,(0,n.Z)(i.Z,{id:"signup_panel.subtitle",defaultMessage:"Sign up now to discuss."}))),(0,n.Z)(r.zx,{theme:"primary",block:!0,to:"/signup"},void 0,(0,n.Z)(i.Z,{id:"account.register",defaultMessage:"Sign up"})))}},1227:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=(o(1),o(344)),r=o(0),a=o(1844),s=o(1845),c=o(1868),d=o(68),l=o(20),u=o(2),f=o(22),m=o(3),v=o(833),p=(0,a.vU)({close:{id:"lightbox.close",defaultMessage:"Close"},all:{id:"reactions.all",defaultMessage:"All"}});t.default=function(e){var t=e.onClose,o=e.statusId,a=e.reaction,h=(0,m.TL)(),g=(0,s.Z)(),Z=(0,r.useState)(a),y=Z[0],_=Z[1],b=(0,m.CG)((function(e){var t,n,r=null===(t=e.user_lists.favourited_by.get(o))||void 0===t?void 0:t.items,a=null===(n=e.user_lists.reactions.get(o))||void 0===n?void 0:n.items;return r&&a&&(0,i.List)(null!=r&&r.size?[(0,v.T3)({accounts:r,count:r.size,name:"ðŸ‘"})]:[]).concat(a||[])}));(0,r.useEffect)((function(){h((0,d.eA)(o)),h((0,d._P)(o))}),[]);var C,M,w=r.useMemo((function(){if(!b)return null;if(y){var e=b.find((function(e){return e.name===y}));return null==e?void 0:e.accounts.map((function(t){return{id:t,reaction:e}}))}return b.map((function(e){var t=e.accounts,o=e.name,n=e.url;return t.map((function(e){return{id:e,reaction:(0,i.Map)({name:o,url:n})}}))})).flatten()}),[b,y]);if(w){var E=(0,n.Z)(c.Z,{id:"status.reactions.empty",defaultMessage:"No one has reacted to this post yet. When someone does, they will show up here."});C=r.createElement(r.Fragment,null,b.size>0&&(M=[{text:g.formatMessage(p.all),action:function(){return _("")},name:"all"}],b.forEach((function(e){return M.push({text:(0,n.Z)("div",{className:"flex items-center gap-1"},void 0,(0,n.Z)(u.SF,{className:"w-4 h-4",emoji:(0,i.Map)(e)}),e.count),action:function(){return _(e.name)},name:e.name})})),(0,n.Z)(u.mQ,{items:M,activeItem:y||"all"})),(0,n.Z)(l.Z,{scrollKey:"reactions",emptyMessage:E,className:"mt-4",itemClassName:"pb-3"},void 0,w.map((function(e){return(0,n.Z)(f.Z,{id:e.id,emoji:e.reaction},"".concat(e.id,"-").concat(e.reaction))}))))}else C=(0,n.Z)(u.$j,{});return(0,n.Z)(u.u_,{title:(0,n.Z)(c.Z,{id:"column.reactions",defaultMessage:"Reactions"}),onClose:function(){t("REACTIONS")}},void 0,C)}},1225:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(0),r=o(1868),a=o(68),s=o(54),c=o(20),d=o(2),l=o(22),u=o(3);t.default=function(e){var t,o=e.onClose,f=e.statusId,m=(0,u.TL)(),v=(0,u.CG)((function(e){var t;return null===(t=e.user_lists.reblogged_by.get(f))||void 0===t?void 0:t.items}));if((0,i.useEffect)((function(){m((0,a.rQ)(f)),m((0,s.UK)(f))}),[]),v){var p=(0,n.Z)(r.Z,{id:"status.reblogs.empty",defaultMessage:"No one has reposted this post yet. When someone does, they will show up here."});t=(0,n.Z)(c.Z,{scrollKey:"reblogs",emptyMessage:p,itemClassName:"pb-3"},void 0,v.map((function(e){return(0,n.Z)(l.Z,{id:e},e)})))}else t=(0,n.Z)(d.$j,{});return(0,n.Z)(d.u_,{title:(0,n.Z)(r.Z,{id:"column.reblogs",defaultMessage:"Reposts"}),onClose:function(){o("REBLOGS")}},void 0,t)}},557:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return _}});var n=o(1852),i=o(1868),r=o(2),a=o(3),s=o(521),c=o(9),d=(o(7),o(0)),l=o(1844),u=o(1845),f=o(13),m=o(19),v=o(76),p=o(100),h=o(49),g=(0,l.vU)({remove:{id:"reply_mentions.account.remove",defaultMessage:"Remove from mentions"},add:{id:"reply_mentions.account.add",defaultMessage:"Add to mentions"}}),Z=(0,c.Tm)(),y=function(e){var t,i=e.accountId,r=e.author,s=(0,u.Z)(),c=(0,a.TL)(),l=(0,a.CG)((function(e){return Z(e,i)})),y=(0,a.CG)((function(e){var t;return!!l&&(null===(t=e.compose.to)||void 0===t?void 0:t.includes(l.acct))}));return(0,d.useEffect)((function(){i&&!l&&c((0,f.$Gz)(i))}),[]),l?(t=y?(0,n.Z)(h.Z,{src:o(26),title:s.formatMessage(g.remove),onClick:function(){return c((0,m.rw)(i))}}):(0,n.Z)(h.Z,{src:o(55),title:s.formatMessage(g.add),onClick:function(){return c((0,m.kR)(i))}}),(0,n.Z)("div",{className:"account"},void 0,(0,n.Z)("div",{className:"account__wrapper"},void 0,(0,n.Z)("div",{className:"account__display-name"},void 0,(0,n.Z)("div",{className:"account__avatar-wrapper"},void 0,(0,n.Z)(v.Z,{account:l,size:36})),(0,n.Z)(p.Z,{account:l})),(0,n.Z)("div",{className:"account__relationship"},void 0,!r&&t)))):null},_=function(e){var t=e.onClose,d=(0,a.CG)((function(e){return(0,c.TE)()(e,{id:e.compose.in_reply_to})})),l=(0,a.CG)((function(e){return e.accounts.get(e.me)})),u=(0,s.Db)(d,l),f=(null==d?void 0:d.account).id;return(0,n.Z)(r.u_,{title:(0,n.Z)(i.Z,{id:"navigation_bar.in_reply_to",defaultMessage:"In reply to"}),onClose:function(){t("REPLY_MENTIONS")},closeIcon:o(378),closePosition:"left"},void 0,(0,n.Z)("div",{className:"reply-mentions-modal__accounts"},void 0,u.map((function(e){return(0,n.Z)(y,{accountId:e,author:f===e},e)}))))}},1222:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=(o(1),o(0)),r=o(1844),a=o(1845),s=o(1868),c=o(1862),d=o(68),l=o(12),u=o(2),f=o(3),m=(0,r.vU)({close:{id:"lightbox.close",defaultMessage:"Close"},accountPlaceholder:{id:"remote_interaction.account_placeholder",defaultMessage:"Enter your username@domain you want to act from"},userNotFoundError:{id:"remote_interaction.user_not_found_error",defaultMessage:"Couldn't find given user"}});t.default=function(e){var t,o,r=e.action,v=e.onClose,p=e.account,h=e.ap_id,g=(0,a.Z)(),Z=(0,c.k6)(),y=(0,f.TL)(),_=(0,f.Dn)().singleUserMode,b=(0,f.CG)((function(e){return e.instance.title})),C=(0,f.CG)((function(e){var t;return null===(t=e.accounts.get(p))||void 0===t?void 0:t.display_name})),M=(0,f.hz)(),w=(0,i.useState)(""),E=w[0],k=w[1],x=function(){v("UNAUTHORIZED")},N=function(){Z.push("/login"),x()},S=function(){Z.push("/signup"),x()};return r&&M.remoteInteractions&&M.federating?("FOLLOW"===r?(t=(0,n.Z)(s.Z,{id:"remote_interaction.follow_title",defaultMessage:"Follow {user} remotely",values:{user:C}}),o=(0,n.Z)(s.Z,{id:"remote_interaction.follow",defaultMessage:"Proceed to follow"})):"REPLY"===r?(t=(0,n.Z)(s.Z,{id:"remote_interaction.reply_title",defaultMessage:"Reply to a post remotely"}),o=(0,n.Z)(s.Z,{id:"remote_interaction.reply",defaultMessage:"Proceed to reply"})):"REBLOG"===r?(t=(0,n.Z)(s.Z,{id:"remote_interaction.reblog_title",defaultMessage:"Reblog a post remotely"}),o=(0,n.Z)(s.Z,{id:"remote_interaction.reblog",defaultMessage:"Proceed to repost"})):"FAVOURITE"===r?(t=(0,n.Z)(s.Z,{id:"remote_interaction.favourite_title",defaultMessage:"Like a post remotely"}),o=(0,n.Z)(s.Z,{id:"remote_interaction.favourite",defaultMessage:"Proceed to like"})):"POLL_VOTE"===r&&(t=(0,n.Z)(s.Z,{id:"remote_interaction.poll_vote_title",defaultMessage:"Vote in a poll remotely"}),o=(0,n.Z)(s.Z,{id:"remote_interaction.poll_vote",defaultMessage:"Proceed to vote"})),(0,n.Z)(u.u_,{title:t,onClose:x,confirmationAction:_?void 0:N,confirmationText:(0,n.Z)(s.Z,{id:"account.login",defaultMessage:"Log in"}),secondaryAction:S,secondaryText:(0,n.Z)(s.Z,{id:"account.register",defaultMessage:"Sign up"})},void 0,(0,n.Z)("div",{className:"remote-interaction-modal__content"},void 0,(0,n.Z)("form",{className:"simple_form remote-interaction-modal__fields",onSubmit:function(e){e.preventDefault(),y((0,d.OF)(h,E)).then((function(e){window.open(e,"_new","noopener,noreferrer"),v("UNAUTHORIZED")})).catch((function(e){"Couldn't find user"===e.message&&y(l.ZP.error(g.formatMessage(m.userNotFoundError)))}))}},void 0,(0,n.Z)("input",{type:"text",placeholder:g.formatMessage(m.accountPlaceholder),name:"remote_follow[acct]",value:E,autoCorrect:"off",autoCapitalize:"off",onChange:function(e){k(e.target.value)},required:!0}),(0,n.Z)(u.zx,{type:"submit",theme:"primary"},void 0,o)),(0,n.Z)("div",{className:"remote-interaction-modal__divider"},void 0,(0,n.Z)(u.xv,{align:"center"},void 0,(0,n.Z)(s.Z,{id:"remote_interaction.divider",defaultMessage:"or"}))),!_&&(0,n.Z)(u.xv,{size:"lg",weight:"medium"},void 0,(0,n.Z)(s.Z,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:b}}))))):(0,n.Z)(u.u_,{title:(0,n.Z)(s.Z,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:b}}),onClose:x,confirmationAction:N,confirmationText:(0,n.Z)(s.Z,{id:"account.login",defaultMessage:"Log in"}),secondaryAction:S,secondaryText:(0,n.Z)(s.Z,{id:"account.register",defaultMessage:"Sign up"})},void 0,(0,n.Z)(u.Kq,{},void 0,(0,n.Z)(u.xv,{},void 0,(0,n.Z)(s.Z,{id:"unauthorized_modal.text",defaultMessage:"You need to be logged in to do that."}))))}},1244:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=(o(7),o(1845)),r=o(1868),a=o(1867),s=o(76),c=o(96),d=o(2),l=o(118),u=o(3),f=o(9),m=o(53),v=o(1056),p=o(92),h=(0,f.Tm)();t.default=function(e){var t=e.accountId,o=e.action,f=e.badges,g=e.domain,Z=(0,i.Z)(),y=(0,u.CG)((function(e){return h(e,t)})),_=(0,u.CG)((function(e){return(0,p.$X)(e)}));if(!y)return null;var b={__html:y.get("display_name_html")},C=!y.get("acct").includes("@")&&g?"".concat(y.get("acct"),"@").concat(g):y.get("acct"),M=y.get("header"),w=y.get("verified");return(0,n.Z)("div",{className:"relative"},void 0,(0,n.Z)(d.Kq,{space:2},void 0,(0,n.Z)(d.Kq,{},void 0,(0,n.Z)("div",{className:"-mt-4 -mx-4 h-24 bg-gray-200 relative"},void 0,M&&(0,n.Z)(c.Z,{src:y.get("header"),className:"absolute inset-0 object-cover",alt:""})),(0,n.Z)(d.Ug,{justifyContent:"between"},void 0,(0,n.Z)(a.rU,{to:"/@".concat(y.get("acct")),title:C,className:"-mt-12 block"},void 0,(0,n.Z)(s.Z,{account:y,className:"h-20 w-20 bg-gray-50 ring-2 ring-white"})),o&&(0,n.Z)("div",{className:"mt-2"},void 0,o))),(0,n.Z)(d.Kq,{},void 0,(0,n.Z)(a.rU,{to:"/@".concat(y.get("acct"))},void 0,(0,n.Z)(d.Ug,{space:1,alignItems:"center"},void 0,(0,n.Z)(d.xv,{size:"lg",weight:"bold",dangerouslySetInnerHTML:b}),w&&(0,n.Z)(l.Z,{}),f&&f.length>0&&(0,n.Z)(d.Ug,{space:1,alignItems:"center"},void 0,f))),(0,n.Z)(d.xv,{size:"sm",theme:"muted"},void 0,"@",(0,m.F7)(y,_))),(0,n.Z)(d.Ug,{alignItems:"center",space:3},void 0,y.get("followers_count")>=0&&(0,n.Z)(a.rU,{to:"/@".concat(y.get("acct"),"/followers"),title:Z.formatNumber(y.get("followers_count"))},void 0,(0,n.Z)(d.Ug,{alignItems:"center",space:1},void 0,(0,n.Z)(d.xv,{theme:"primary",weight:"bold",size:"sm"},void 0,(0,v.w8)(y.get("followers_count"))),(0,n.Z)(d.xv,{weight:"bold",size:"sm"},void 0,(0,n.Z)(r.Z,{id:"account.followers",defaultMessage:"Followers"})))),y.get("following_count")>=0&&(0,n.Z)(a.rU,{to:"/@".concat(y.get("acct"),"/following"),title:Z.formatNumber(y.get("following_count"))},void 0,(0,n.Z)(d.Ug,{alignItems:"center",space:1},void 0,(0,n.Z)(d.xv,{theme:"primary",weight:"bold",size:"sm"},void 0,(0,v.w8)(y.get("following_count"))),(0,n.Z)(d.xv,{weight:"bold",size:"sm"},void 0,(0,n.Z)(r.Z,{id:"account.follows",defaultMessage:"Follows"})))))))}},1214:function(e,t,o){"use strict";o.r(t);var n=o(1852),i=o(1868),r=o(1862),a=o(236);t.default=function(e){var t=e.status,o=e.account,s=e.media,c=e.time,d=e.onClose,l=(0,r.k6)(),u=t&&o&&(0,n.Z)("a",{href:t.url,onClick:function(e){0!==e.button||e.ctrlKey||e.metaKey||(e.preventDefault(),l.push("/@".concat(o.acct,"/posts/").concat(t.id)))}},void 0,(0,n.Z)(i.Z,{id:"lightbox.view_context",defaultMessage:"View context"}));return(0,n.Z)("div",{className:"block w-full max-w-xl mx-auto overflow-hidden text-left align-middle transition-all transform shadow-xl rounded-2xl pointer-events-auto"},void 0,(0,n.Z)(a.default,{preview:s.preview_url,blurhash:s.blurhash,src:s.url,startTime:c,onCloseVideo:d,link:u,detailed:!0,alt:s.description}))}},574:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return j}});var n,i,r=o(6),a=o(19),s=o(1854),c=o(93),d=o(1866),l=o(1852),u=o(1843),f=(o(1),o(7),o(0)),m=o(5),v=o.n(m),p=o(1863),h=(o(1361),o(1844)),g=o(1868),Z=o(1846),y=o(1862),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function C(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach((function(t){(0,u.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var M=(0,h.vU)({confirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"}}),w=function(e){return[e.text.length>0,e.spoiler_text.length>0,e.media_attachments.size>0,null!==e.in_reply_to,null!==e.quote,null!==e.poll].some((function(e){return!0===e}))},E=(0,y.EN)(i=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,u.Z)(t,"state",{revealed:!!t.props.children}),(0,u.Z)(t,"activeElement",t.state.revealed?document.activeElement:null),(0,u.Z)(t,"handleKeyUp",(function(e){"Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||!t.props.children||t.handleOnClose()})),(0,u.Z)(t,"handleOnClose",(function(){var e=t.props,n=e.onOpenModal,i=e.onCloseModal,r=e.hasComposeContent,a=e.isEditing,s=e.intl,c=e.type,d=e.onCancelReplyCompose;r&&"COMPOSE"===c?n("CONFIRM",{icon:o(99),heading:a?(0,l.Z)(g.Z,{id:"confirmations.cancel_editing.heading",defaultMessage:"Cancel post editing"}):(0,l.Z)(g.Z,{id:"confirmations.delete.heading",defaultMessage:"Delete post"}),message:a?(0,l.Z)(g.Z,{id:"confirmations.cancel_editing.message",defaultMessage:"Are you sure you want to cancel editing this post? All changes will be lost."}):(0,l.Z)(g.Z,{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this post?"}),confirm:s.formatMessage(M.confirm),onConfirm:function(){return d()},onCancel:function(){return i("CONFIRM")}}):r&&"CONFIRM"===c?i("CONFIRM"):t.props.onClose()})),(0,u.Z)(t,"handleKeyDown",(function(e){if("Tab"===e.key){var o=Array.from(t.node.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter((function(e){return"none"!==window.getComputedStyle(e).display})),n=o.indexOf(e.target),i=void 0;(i=e.shiftKey?o[n-1]||o[o.length-1]:o[n+1]||o[0])&&(i.focus(),e.stopPropagation(),e.preventDefault())}})),(0,u.Z)(t,"getSiblings",(function(){return Array.apply(void 0,t.node.parentElement.childNodes).filter((function(e){return e!==t.node}))})),(0,u.Z)(t,"setRef",(function(e){t.node=e})),t}return _(t,e),t.prototype.componentDidMount=function(){window.addEventListener("keyup",this.handleKeyUp,!1),window.addEventListener("keydown",this.handleKeyDown,!1),this.history=this.props.history||(0,p.lX)()},t.prototype.componentDidUpdate=function(e){var t=this;this.props.children&&!e.children?(this.activeElement=document.activeElement,this.getSiblings().forEach((function(e){return e.setAttribute("inert",!0)})),this._handleModalOpen()):e.children||this.setState({revealed:!1}),!this.props.children&&e.children&&(this.activeElement.focus(),this.activeElement=null,this.getSiblings().forEach((function(e){return e.removeAttribute("inert")})),this._handleModalClose(e.type)),this.props.children&&(requestAnimationFrame((function(){t.setState({revealed:!0})})),this._ensureHistoryBuffer())},t.prototype.componentWillUnmount=function(){window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("keydown",this.handleKeyDown)},t.prototype._handleModalOpen=function(){var e=this;this._modalHistoryKey=Date.now(),this.unlistenHistory=this.history.listen((function(t,o){"POP"===o&&(e.handleOnClose(),e.props.onCancel&&e.props.onCancel())}))},t.prototype._handleModalClose=function(e){if(this.unlistenHistory&&this.unlistenHistory(),!["FAVOURITES","MENTIONS","REACTIONS","REBLOGS","MEDIA"].includes(e)){var t=this.history.location.state;t&&t.soapboxModalKey===this._modalHistoryKey&&this.history.goBack()}},t.prototype._ensureHistoryBuffer=function(){var e=this.history.location,t=e.pathname,o=e.state;o&&o.soapboxModalKey===this._modalHistoryKey||this.history.push(t,C(C({},o),{},{soapboxModalKey:this._modalHistoryKey}))},t.prototype.render=function(){var e=this.props,t=e.children,o=e.type,n=this.state.revealed,i=!!t;return i?f.createElement("div",{ref:this.setRef,className:v()({"fixed top-0 left-0 z-[100] w-full h-full overflow-x-hidden overflow-y-auto":!0,"pointer-events-none":!i}),style:{opacity:n?1:0}},(0,l.Z)("div",{role:"presentation",id:"modal-overlay",className:"fixed inset-0 bg-gray-600 bg-opacity-90",onClick:this.handleOnClose}),(0,l.Z)("div",{role:"dialog",className:v()({"my-2 mx-auto relative pointer-events-none flex items-center":!0,"p-4 md:p-0":"MEDIA"!==o}),style:{minHeight:"calc(100% - 3.5rem)"}},void 0,t)):f.createElement("div",{className:"z-50 transition-all",ref:this.setRef,style:{opacity:0}})},t}(f.PureComponent))||i,k=(0,Z.ZP)((0,r.$j)((function(e){return{hasComposeContent:w(e.compose),isEditing:null!==e.compose.id}}),(function(e){return{onOpenModal:function(t,o){e((0,s.h7)(t,o))},onCloseModal:function(t){e((0,s.Mr)(t))},onCancelReplyCompose:function(){e((0,s.Mr)("COMPOSE")),e((0,a.qY)())}}}))(E)),x=o(34),N=o(43),S=o(1845),T=o(49),O=(0,h.vU)({error:{id:"bundle_modal_error.message",defaultMessage:"Something went wrong while loading this page."},retry:{id:"bundle_modal_error.retry",defaultMessage:"Try again"},close:{id:"bundle_modal_error.close",defaultMessage:"Close"}}),I=function(e){var t=e.onRetry,o=e.onClose,n=(0,S.Z)();return(0,l.Z)("div",{className:"modal-root__modal error-modal"},void 0,(0,l.Z)("div",{className:"error-modal__body"},void 0,(0,l.Z)(T.Z,{title:n.formatMessage(O.retry),icon:"refresh",onClick:function(){t()},size:64}),n.formatMessage(O.error)),(0,l.Z)("div",{className:"error-modal__footer"},void 0,(0,l.Z)("div",{},void 0,(0,l.Z)("button",{onClick:o,className:"error-modal__nav onboarding-modal__skip"},void 0,n.formatMessage(O.close)))))},A=o(2),D=function(){return(0,l.Z)("div",{className:"modal-root__modal error-modal"},void 0,(0,l.Z)("div",{className:"error-modal__body"},void 0,(0,l.Z)(A.$j,{})),(0,l.Z)("div",{className:"error-modal__footer"},void 0,(0,l.Z)("div",{},void 0,(0,l.Z)("button",{className:"error-modal__nav onboarding-modal__skip"}))))},P=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),R={MEDIA:x.p3,VIDEO:x.Kd,BOOST:x.Zl,CONFIRM:x.cV,MISSING_DESCRIPTION:x.if,MUTE:x.z1,REPORT:x.yW,ACTIONS:x.VU,EMBED:x.V6,LIST_EDITOR:x.gL,FOCAL_POINT:x.in,LIST_ADDER:x.v7,HOTKEYS:x.C4,COMPOSE:x.C,REPLY_MENTIONS:x.OQ,UNAUTHORIZED:x.iq,CRYPTO_DONATE:x.v3,EDIT_FEDERATION:x.Jc,COMPONENT:x.HS,REBLOGS:x.jM,FAVOURITES:x.YP,REACTIONS:x.qP,MENTIONS:x.nO,LANDING_PAGE:x.Qk,BIRTHDAYS:x.cC,ACCOUNT_NOTE:x.SU,COMPARE_HISTORY:x.WI,VERIFY_SMS:x.Wt,FAMILIAR_FOLLOWERS:x.Um},L=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,u.Z)(t,"renderLoading",(function(e){return function(){return["MEDIA","VIDEO","BOOST","CONFIRM","ACTIONS"].includes(e)?null:(0,l.Z)(D,{})}})),(0,u.Z)(t,"renderError",(function(e){return f.createElement(I,(0,d.Z)({},e,{onClose:t.onClickClose}))})),(0,u.Z)(t,"onClickClose",(function(e){var o=t.props;(0,o.onClose)(o.type)})),t}return P(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return{visible:!!this.props.type}},t.prototype.componentDidUpdate=function(e,t,o){o.visible?document.body.classList.add("with-modals"):document.body.classList.remove("with-modals")},t.prototype.render=function(){var e=this,t=this.props,o=t.type,n=t.props,i=!!o;return(0,l.Z)(k,{onClose:this.onClickClose,type:o},void 0,i&&(0,l.Z)(N.Z,{fetchComponent:R[o],loading:this.renderLoading(o),error:this.renderError,renderDelay:200},void 0,(function(t){return f.createElement(t,(0,d.Z)({},n,{onClose:e.onClickClose}))})))},t}(f.PureComponent),U=L,j=(0,r.$j)((function(e){var t=e.get("modals").last({modalType:null,modalProps:{}});return{type:t.modalType,props:t.modalProps}}),(function(e){return{onClose:function(t){switch(t){case"COMPOSE":e((0,a.qY)());break;case"REPORT":e((0,c.Mq)())}e((0,s.Mr)(t))}}}))(U)},573:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return C}});var n,i=o(1852),r=o(1845),a=o(1862),s=o(80),c=o(2),d=o(3),l=o(0),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),f=function(e){function t(t){var o=e.call(this,t)||this;return o.getBarStyle=o.getBarStyle.bind(o),o.getActionStyle=o.getActionStyle.bind(o),o.getTitleStyle=o.getTitleStyle.bind(o),o.handleClick=o.handleClick.bind(o),t.onDismiss&&t.isActive&&(o.dismissTimeout=setTimeout(t.onDismiss,t.dismissAfter)),o}return u(t,e),t.prototype.componentWillReceiveProps=function(e){!1!==e.dismissAfter&&({}.hasOwnProperty.call(e,"isLast")||clearTimeout(this.dismissTimeout),e.onDismiss&&(e.isActive&&!this.props.isActive||e.dismissAfter&&!1===this.props.dismissAfter)&&(this.dismissTimeout=setTimeout(e.onDismiss,e.dismissAfter)))},t.prototype.componentWillUnmount=function(){this.props.dismissAfter&&clearTimeout(this.dismissTimeout)},t.prototype.getBarStyle=function(){if(!1===this.props.style)return{};var e=this.props,t=e.isActive,o=e.barStyle,n=e.activeBarStyle,i={position:"fixed",bottom:"2rem",left:"-100%",width:"auto",padding:"1rem",margin:0,color:"#fafafa",font:"1rem normal Roboto, sans-serif",borderRadius:"5px",background:"#212121",borderSizing:"border-box",boxShadow:"0 0 1px 1px rgba(10, 10, 11, .125)",cursor:"default",WebKitTransition:".5s cubic-bezier(0.89, 0.01, 0.5, 1.1)",MozTransition:".5s cubic-bezier(0.89, 0.01, 0.5, 1.1)",msTransition:".5s cubic-bezier(0.89, 0.01, 0.5, 1.1)",OTransition:".5s cubic-bezier(0.89, 0.01, 0.5, 1.1)",transition:".5s cubic-bezier(0.89, 0.01, 0.5, 1.1)",WebkitTransform:"translatez(0)",MozTransform:"translatez(0)",msTransform:"translatez(0)",OTransform:"translatez(0)",transform:"translatez(0)"};return t?Object.assign({},i,{left:"1rem"},o,n):Object.assign({},i,o)},t.prototype.getActionStyle=function(){return!1!==this.props.style?Object.assign({},{padding:"0.125rem",marginLeft:"1rem",color:"#f44336",font:".75rem normal Roboto, sans-serif",lineHeight:"1rem",letterSpacing:".125ex",textTransform:"uppercase",borderRadius:"5px",cursor:"pointer"},this.props.actionStyle):{}},t.prototype.getTitleStyle=function(){return!1!==this.props.style?Object.assign({},{fontWeight:"700",marginRight:".5rem"},this.props.titleStyle):{}},t.prototype.handleClick=function(){if(this.props.onClick&&"function"==typeof this.props.onClick)return this.props.onClick()},t.prototype.render=function(){var e="notification-bar";return this.props.isActive&&(e+=" ".concat(this.props.activeClassName)),this.props.className&&(e+=" ".concat(this.props.className)),(0,i.Z)("div",{className:e,style:this.getBarStyle()},void 0,(0,i.Z)("div",{className:"notification-bar-wrapper"},void 0,this.props.title?(0,i.Z)("span",{className:"notification-bar-title",style:this.getTitleStyle()},void 0,this.props.title):null,(0,i.Z)("span",{className:"notification-bar-message"},void 0,this.props.message),this.props.action?(0,i.Z)("span",{className:"notification-bar-action",onClick:this.handleClick,style:this.getActionStyle()},void 0,this.props.action):null))},t}(l.Component);f.defaultProps={isActive:!1,dismissAfter:2e3,activeClassName:"notification-bar-active"};var m=f,v=o(1866),p=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),h=function(e){function t(t){var o=e.call(this,t)||this;return o.state={isActive:!1},o.handleClick=o.handleClick.bind(o),o}return p(t,e),t.prototype.componentDidMount=function(){this.activeTimeout=setTimeout(this.setState.bind(this,{isActive:!0}),1),this.dismiss(this.props.dismissAfter)},t.prototype.componentWillReceiveProps=function(e){e.dismissAfter!==this.props.dismissAfter&&this.dismiss(e.dismissAfter)},t.prototype.componentWillUnmount=function(){clearTimeout(this.activeTimeout),clearTimeout(this.dismissTimeout)},t.prototype.dismiss=function(e){!1!==e&&(this.dismissTimeout=setTimeout(this.setState.bind(this,{isActive:!1}),e))},t.prototype.handleClick=function(){if(this.props.onClick&&"function"==typeof this.props.onClick)return this.props.onClick(this.setState.bind(this,{isActive:!1}))},t.prototype.render=function(){var e=this;return l.createElement(m,(0,v.Z)({},this.props,{onClick:this.handleClick,onDismiss:function(){return setTimeout(e.props.onDismiss,300)},isActive:this.state.isActive}))},t}(l.Component),g=h,Z=void 0;function y(e,t){return Object.assign({},t,{bottom:"".concat(2+4*e,"rem")})}var _=function(e){return(0,i.Z)("div",{className:"notification-list"},void 0,e.notifications.map((function(t,o){var n=0===o&&1===e.notifications.length,i=n||!e.dismissInOrder,r=e.barStyleFactory(o,t.barStyle,t),a=e.actionStyleFactory(o,t.actionStyle,t),s=e.activeBarStyleFactory(o,t.activeBarStyle,t),c=t.onClick||e.onClick,d=e.onDismiss,u=t.dismissAfter;return!1!==u&&(null==u&&(u=e.dismissAfter),i||(u+=1e3*o)),l.createElement(g,(0,v.Z)({},t,{key:t.key,isLast:n,action:t.action||e.action,dismissAfter:u,onDismiss:d.bind(Z,t),onClick:c.bind(Z,t),activeBarStyle:s,barStyle:r,actionStyle:a}))})))};_.defaultProps={activeBarStyleFactory:y,barStyleFactory:y,actionStyleFactory:function(e,t){return Object.assign({},t,{})},dismissInOrder:!0,dismissAfter:1e3,onClick:function(){}};var b=_,C=function(){var e=(0,r.Z)(),t=(0,a.k6)(),o=(0,d.TL)(),n=(0,d.CG)((function(e){return e.alerts})),l=function(t){switch(typeof t){case"string":return t;case"object":return e.formatMessage(t);default:return""}},u=function(e){o((0,s.OD)(e))},f=function(e,t,o){return Object.assign({},t,{bottom:"".concat(14+12*e+42*e,"px")})},m=n.toArray().map((function(e){e.actionLink&&(e=e.set("action",(function(){return t.push(e.actionLink)})));var o={message:l(e.message),title:l(e.title),key:e.key,className:"notification-bar-".concat(e.severity),activeClassName:"snackbar--active",dismissAfter:e.dismissAfter,style:!1};return e.action&&e.actionLabel&&(o.action=(0,i.Z)(c.zx,{theme:"ghost",size:"sm",onClick:e.action,text:l(e.actionLabel)})),o}));return(0,i.Z)("div",{role:"assertive","data-testid":"toast",className:"z-1000 fixed inset-0 flex items-end px-4 py-6 pointer-events-none pt-16 lg:pt-20 sm:items-start"},void 0,(0,i.Z)(b,{onDismiss:u,onClick:u,barStyleFactory:f,activeBarStyleFactory:f,notifications:m}))}}}]);
//# sourceMappingURL=ui-513fdaffde5484e5ed36.chunk.js.map