{"version":3,"file":"packs/js/features/account_timeline-8aa160ca7982813029d2.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/account_timeline/index.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/profile_fields_panel.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/profile_familiar_followers.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/profile_info_panel.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useEffect,useState}from'react';import{FormattedMessage}from'react-intl';import{useHistory}from'react-router-dom';import{fetchAccountByUsername}from'soapbox/actions/accounts';import{fetchPatronAccount}from'soapbox/actions/patron';import{expandAccountFeaturedTimeline,expandAccountTimeline}from'soapbox/actions/timelines';import MissingIndicator from'soapbox/components/missing_indicator';import StatusList from'soapbox/components/status_list';import{Card,CardBody,Spinner,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useFeatures,useSettings,useSoapboxConfig}from'soapbox/hooks';import{makeGetStatusIds,findAccountByUsername}from'soapbox/selectors';const getStatusIds=makeGetStatusIds();const AccountTimeline=_ref=>{let{params,withReplies=false}=_ref;const history=useHistory();const dispatch=useAppDispatch();const features=useFeatures();const settings=useSettings();const soapboxConfig=useSoapboxConfig();const account=useAppSelector(state=>findAccountByUsername(state,params.username));const[accountLoading,setAccountLoading]=useState(!account);const path=withReplies?\"\".concat(account===null||account===void 0?void 0:account.id,\":with_replies\"):account===null||account===void 0?void 0:account.id;const showPins=settings.getIn(['account_timeline','shows','pinned'])===true&&!withReplies;const statusIds=useAppSelector(state=>getStatusIds(state,{type:\"account:\".concat(path),prefix:'account_timeline'}));const featuredStatusIds=useAppSelector(state=>getStatusIds(state,{type:\"account:\".concat(account===null||account===void 0?void 0:account.id,\":pinned\"),prefix:'account_timeline'}));const isBlocked=useAppSelector(state=>state.relationships.getIn([account===null||account===void 0?void 0:account.id,'blocked_by'])===true);const unavailable=isBlocked&&!features.blockersVisible;const patronEnabled=soapboxConfig.getIn(['extensions','patron','enabled'])===true;const isLoading=useAppSelector(state=>state.getIn(['timelines',\"account:\".concat(path),'isLoading'])===true);const hasMore=useAppSelector(state=>state.getIn(['timelines',\"account:\".concat(path),'hasMore'])===true);const accountUsername=(account===null||account===void 0?void 0:account.username)||params.username;useEffect(()=>{dispatch(fetchAccountByUsername(params.username,history)).then(()=>setAccountLoading(false)).catch(()=>setAccountLoading(false));},[params.username]);useEffect(()=>{if(account&&!withReplies){dispatch(expandAccountFeaturedTimeline(account.id));}},[account===null||account===void 0?void 0:account.id,withReplies]);useEffect(()=>{if(account&&patronEnabled){dispatch(fetchPatronAccount(account.url));}},[account===null||account===void 0?void 0:account.url,patronEnabled]);useEffect(()=>{if(account){dispatch(expandAccountTimeline(account.id,{withReplies}));}},[account===null||account===void 0?void 0:account.id,withReplies]);const handleLoadMore=maxId=>{if(account){dispatch(expandAccountTimeline(account.id,{maxId,withReplies}));}};if(!account&&accountLoading){return/*#__PURE__*/_jsx(Spinner,{});}else if(!account){return/*#__PURE__*/_jsx(MissingIndicator,{nested:true});}if(unavailable){return/*#__PURE__*/_jsx(Card,{},void 0,/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(Text,{align:\"center\"},void 0,isBlocked?/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_blocked\",defaultMessage:\"You are blocked by @{accountUsername}.\",values:{accountUsername}}):/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_unavailable\",defaultMessage:\"Profile unavailable\"}))));}return/*#__PURE__*/_jsx(StatusList,{scrollKey:\"account_timeline\",statusIds:statusIds,featuredStatusIds:showPins?featuredStatusIds:undefined,isLoading:isLoading,hasMore:hasMore,onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_timeline\",defaultMessage:\"No posts here!\"})});};export default AccountTimeline;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import classNames from'classnames';import React from'react';import{defineMessages,useIntl}from'react-intl';import{Stack,HStack,Icon,Text}from'soapbox/components/ui';import BundleContainer from'soapbox/features/ui/containers/bundle_container';import{CryptoAddress}from'soapbox/features/ui/util/async-components';const getTicker=value=>(value.match(/\\$([a-zA-Z]*)/i)||[])[1];const isTicker=value=>Boolean(getTicker(value));const messages=defineMessages({linkVerifiedOn:{\"id\":\"account.link_verified_on\",\"defaultMessage\":\"Ownership of this link was checked on {date}\"},account_locked:{\"id\":\"account.locked_info\",\"defaultMessage\":\"This account privacy status is set to locked. The owner manually reviews who can follow them.\"},deactivated:{\"id\":\"account.deactivated\",\"defaultMessage\":\"Deactivated\"},bot:{\"id\":\"account.badges.bot\",\"defaultMessage\":\"Bot\"}});const dateFormatOptions={month:'short',day:'numeric',year:'numeric',hour12:false,hour:'2-digit',minute:'2-digit'};/** Renders a single profile field. */const ProfileField=_ref=>{let{field}=_ref;const intl=useIntl();if(isTicker(field.name)){return/*#__PURE__*/_jsx(BundleContainer,{fetchComponent:CryptoAddress},void 0,Component=>/*#__PURE__*/_jsx(Component,{ticker:getTicker(field.name).toLowerCase(),address:field.value_plain}));}return/*#__PURE__*/_jsx(\"dl\",{},void 0,/*#__PURE__*/_jsx(\"dt\",{title:field.name},void 0,/*#__PURE__*/_jsx(Text,{weight:\"bold\",tag:\"span\",dangerouslySetInnerHTML:{__html:field.name_emojified}})),/*#__PURE__*/_jsx(\"dd\",{className:classNames({'text-success-500':field.verified_at}),title:field.value_plain},void 0,/*#__PURE__*/_jsx(HStack,{space:2,alignItems:\"center\"},void 0,field.verified_at&&/*#__PURE__*/_jsx(\"span\",{className:\"flex-none\",title:intl.formatMessage(messages.linkVerifiedOn,{date:intl.formatDate(field.verified_at,dateFormatOptions)})},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/check.svg')})),/*#__PURE__*/_jsx(Text,{className:\"break-words overflow-hidden\",tag:\"span\",dangerouslySetInnerHTML:{__html:field.value_emojified}}))));};/** Custom profile fields for sidebar. */const ProfileFieldsPanel=_ref2=>{let{account}=_ref2;return/*#__PURE__*/_jsx(Stack,{space:4},void 0,account.fields.map((field,i)=>/*#__PURE__*/_jsx(ProfileField,{field:field},i)));};export default ProfileFieldsPanel;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import{OrderedSet as ImmutableOrderedSet}from'immutable';import React,{useEffect}from'react';import{FormattedList,FormattedMessage}from'react-intl';import{useDispatch}from'react-redux';import{Link}from'react-router-dom';import{fetchAccountFamiliarFollowers}from'soapbox/actions/familiar_followers';import{openModal}from'soapbox/actions/modals';import HoverRefWrapper from'soapbox/components/hover_ref_wrapper';import{Text}from'soapbox/components/ui';import VerificationBadge from'soapbox/components/verification_badge';import{useAppSelector,useFeatures}from'soapbox/hooks';import{makeGetAccount}from'soapbox/selectors';const getAccount=makeGetAccount();const ProfileFamiliarFollowers=_ref=>{let{account}=_ref;const dispatch=useDispatch();const me=useAppSelector(state=>state.me);const features=useFeatures();const familiarFollowerIds=useAppSelector(state=>{var _state$user_lists$fam;return((_state$user_lists$fam=state.user_lists.familiar_followers.get(account.id))===null||_state$user_lists$fam===void 0?void 0:_state$user_lists$fam.items)||ImmutableOrderedSet();});const familiarFollowers=useAppSelector(state=>familiarFollowerIds.slice(0,2).map(accountId=>getAccount(state,accountId)));useEffect(()=>{if(me&&features.familiarFollowers){dispatch(fetchAccountFamiliarFollowers(account.id));}},[]);const openFamiliarFollowersModal=()=>{dispatch(openModal('FAMILIAR_FOLLOWERS',{accountId:account.id}));};if(familiarFollowerIds.size===0){return null;}const accounts=familiarFollowers.map(account=>!!account&&/*#__PURE__*/_jsx(HoverRefWrapper,{accountId:account.id,inline:true},void 0,/*#__PURE__*/_jsx(Link,{className:\"mention\",to:\"/@\".concat(account.acct)},void 0,/*#__PURE__*/_jsx(\"span\",{dangerouslySetInnerHTML:{__html:account.display_name_html}}),account.verified&&/*#__PURE__*/_jsx(VerificationBadge,{})))).toArray();if(familiarFollowerIds.size>2){accounts.push(/*#__PURE__*/_jsx(\"span\",{className:\"hover:underline cursor-pointer\",role:\"presentation\",onClick:openFamiliarFollowersModal},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.familiar_followers.more\",defaultMessage:\"{count} {count, plural, one {other} other {others}} you follow\",values:{count:familiarFollowerIds.size-familiarFollowers.size}})));}return/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"sm\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.familiar_followers\",defaultMessage:\"Followed by {accounts}\",values:{accounts:/*#__PURE__*/_jsx(FormattedList,{type:\"conjunction\",value:accounts})}}));};export default ProfileFamiliarFollowers;","'use strict';import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url.js\";import\"core-js/modules/web.url-search-params.js\";import\"core-js/modules/es.array.includes.js\";import React from'react';import{defineMessages,useIntl,FormattedMessage}from'react-intl';import Badge from'soapbox/components/badge';import{Icon,HStack,Stack,Text}from'soapbox/components/ui';import VerificationBadge from'soapbox/components/verification_badge';import{useSoapboxConfig}from'soapbox/hooks';import{isLocal}from'soapbox/utils/accounts';import ProfileFamiliarFollowers from'./profile_familiar_followers';import ProfileStats from'./profile_stats';/** Basically ensure the URL isn't `javascript:alert('hi')` or something like that */const isSafeUrl=text=>{try{const url=new URL(text);return['http:','https:'].includes(url.protocol);}catch(e){return false;}};const messages=defineMessages({linkVerifiedOn:{\"id\":\"account.link_verified_on\",\"defaultMessage\":\"Ownership of this link was checked on {date}\"},account_locked:{\"id\":\"account.locked_info\",\"defaultMessage\":\"This account privacy status is set to locked. The owner manually reviews who can follow them.\"},deactivated:{\"id\":\"account.deactivated\",\"defaultMessage\":\"Deactivated\"},bot:{\"id\":\"account.badges.bot\",\"defaultMessage\":\"Bot\"}});/** User profile metadata, such as location, birthday, etc. */const ProfileInfoPanel=_ref=>{let{account,username}=_ref;const intl=useIntl();const{displayFqn}=useSoapboxConfig();const getStaffBadge=()=>{if(account!==null&&account!==void 0&&account.admin){return/*#__PURE__*/_jsx(Badge,{slug:\"admin\",title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.badges.admin\",defaultMessage:\"Admin\"})},\"staff\");}else if(account!==null&&account!==void 0&&account.moderator){return/*#__PURE__*/_jsx(Badge,{slug:\"moderator\",title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.badges.moderator\",defaultMessage:\"Moderator\"})},\"staff\");}else{return null;}};const getBadges=()=>{const staffBadge=getStaffBadge();const isPatron=account.getIn(['patron','is_patron'])===true;const badges=[];if(staffBadge){badges.push(staffBadge);}if(isPatron){badges.push(/*#__PURE__*/_jsx(Badge,{slug:\"patron\",title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.badges.patron\",defaultMessage:\"Patron\"})},\"patron\"));}if(account.donor){badges.push(/*#__PURE__*/_jsx(Badge,{slug:\"donor\",title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.badges.donor\",defaultMessage:\"Donor\"})},\"donor\"));}return badges;};const renderBirthday=()=>{const birthday=account.birthday;if(!birthday)return null;const formattedBirthday=intl.formatDate(birthday,{timeZone:'UTC',day:'numeric',month:'long',year:'numeric'});const date=new Date(birthday);const today=new Date();const hasBirthday=date.getDate()===today.getDate()&&date.getMonth()===today.getMonth();return/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/ballon.svg'),className:\"w-4 h-4 text-gray-800 dark:text-gray-200\"}),/*#__PURE__*/_jsx(Text,{size:\"sm\"},void 0,hasBirthday?/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.birthday_today\",defaultMessage:\"Birthday is today!\"}):/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.birthday\",defaultMessage:\"Born {date}\",values:{date:formattedBirthday}})));};if(!account){return/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 min-w-0 flex-1 sm:px-2\"},void 0,/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(HStack,{space:1,alignItems:\"center\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",theme:\"muted\"},void 0,\"@\",username)))));}const content={__html:account.note_emojified};const deactivated=!account.pleroma.get('is_active',true)===true;const displayNameHtml=deactivated?{__html:intl.formatMessage(messages.deactivated)}:{__html:account.display_name_html};const memberSinceDate=intl.formatDate(account.created_at,{month:'long',year:'numeric'});const verified=account.verified;const badges=getBadges();return/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 min-w-0 flex-1 sm:px-2\"},void 0,/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(HStack,{space:1,alignItems:\"center\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"lg\",weight:\"bold\",dangerouslySetInnerHTML:displayNameHtml}),verified&&/*#__PURE__*/_jsx(VerificationBadge,{}),account.bot&&/*#__PURE__*/_jsx(Badge,{slug:\"bot\",title:intl.formatMessage(messages.bot)}),badges.length>0&&/*#__PURE__*/_jsx(HStack,{space:1,alignItems:\"center\"},void 0,badges)),/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",theme:\"muted\"},void 0,\"@\",displayFqn?account.fqn:account.acct),account.locked&&/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/lock.svg'),alt:intl.formatMessage(messages.account_locked),className:\"w-4 h-4 text-gray-600\"}))),/*#__PURE__*/_jsx(ProfileStats,{account:account}),account.note.length>0&&account.note!=='<p></p>'&&/*#__PURE__*/_jsx(Text,{size:\"sm\",dangerouslySetInnerHTML:content}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col md:flex-row items-start md:flex-wrap md:items-center gap-2\"},void 0,isLocal(account)?/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/calendar.svg'),className:\"w-4 h-4 text-gray-800 dark:text-gray-200\"}),/*#__PURE__*/_jsx(Text,{size:\"sm\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.member_since\",defaultMessage:\"Joined {date}\",values:{date:memberSinceDate}}))):null,account.location?/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/map-pin.svg'),className:\"w-4 h-4 text-gray-800 dark:text-gray-200\"}),/*#__PURE__*/_jsx(Text,{size:\"sm\"},void 0,account.location)):null,account.website?/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/link.svg'),className:\"w-4 h-4 text-gray-800 dark:text-gray-200\"}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-[300px]\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",truncate:true},void 0,isSafeUrl(account.website)?/*#__PURE__*/_jsx(\"a\",{className:\"text-primary-600 dark:text-primary-400 hover:underline\",href:account.website,target:\"_blank\"},void 0,account.website):account.website))):null,renderBirthday()),/*#__PURE__*/_jsx(ProfileFamiliarFollowers,{account:account})));};export default ProfileInfoPanel;"],"names":["getStatusIds","_ref","params","withReplies","history","dispatch","features","settings","soapboxConfig","account","state","username","useState","accountLoading","setAccountLoading","path","concat","id","showPins","getIn","statusIds","type","prefix","featuredStatusIds","isBlocked","relationships","unavailable","blockersVisible","patronEnabled","isLoading","hasMore","accountUsername","useEffect","then","catch","url","align","defaultMessage","values","scrollKey","undefined","onLoadMore","maxId","emptyMessage","nested","getTicker","value","match","messages","linkVerifiedOn","account_locked","deactivated","bot","dateFormatOptions","month","day","year","hour12","hour","minute","ProfileField","field","intl","name","Boolean","fetchComponent","Component","ticker","toLowerCase","address","value_plain","title","weight","tag","dangerouslySetInnerHTML","__html","name_emojified","className","verified_at","space","alignItems","formatMessage","date","formatDate","src","value_emojified","_ref2","fields","map","i","getAccount","me","familiarFollowerIds","_state$user_lists$fam","user_lists","familiar_followers","get","items","familiarFollowers","slice","accountId","size","accounts","inline","to","acct","display_name_html","verified","toArray","push","role","onClick","count","theme","useIntl","displayFqn","content","note_emojified","displayNameHtml","pleroma","memberSinceDate","created_at","badges","staffBadge","admin","slug","moderator","isPatron","donor","getBadges","length","fqn","locked","alt","note","location","website","truncate","text","URL","includes","protocol","e","isSafeUrl","href","target","birthday","formattedBirthday","timeZone","Date","today","hasBirthday","getDate","getMonth","renderBirthday"],"sourceRoot":""}