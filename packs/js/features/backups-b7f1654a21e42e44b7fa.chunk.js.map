{"version":3,"file":"packs/js/features/backups-b7f1654a21e42e44b7fa.chunk.js","mappings":"0tBAAyMA,EAAU,CAAC,UAAU,OAAO,WAAW,SAAS,QACzP,2B,+CAAysB,OAA/pB,OAAoB,YAAAC,OAAA,WAAS,IAAMC,EAAYC,KAAKC,MAAOC,EAAmCH,EAAW,QAAtCI,EAA2BJ,EAAW,KAAjCK,EAAsBL,EAAW,SAAxBM,EAAaN,EAAW,OAAjBO,EAAMP,EAAW,KAACQ,GAAK,OAAyBR,EAAYF,GAAiBW,EAAeN,GAASA,EAAQO,QAAQ,KAAK,KAAK,OAAmB,gBAAoB,MAAO,OAAS,CAAC,kBAAkBD,EAAeE,UAAU,kBAAkBH,IAAmB,OAAK,MAAM,CAACG,UAAU,oBAAe,EAAOR,IAAsB,OAAK,IAAa,CAACC,KAAKA,EAAKE,OAAOA,EAAOM,KAAKT,EAAQM,eAAeA,IAAiBF,IAAmB,OAAK,MAAM,CAACI,UAAU,qBAAgB,GAAoB,OAAK,IAAa,CAACE,MAAMN,EAAKH,KAAK,aAAaU,KAAK,GAAGC,UAAU,YAAYV,IAAW,EAAzsB,CAA0C,iB,ICD8cW,GAAS,QAAe,CAACb,QAAQ,CAAC,GAAK,iBAAiB,eAAiB,WAAWc,OAAO,CAAC,GAAK,yBAAyB,eAAiB,iBAAiBC,aAAa,CAAC,GAAK,wBAAwB,eAAiB,8BAA8BC,mBAAmB,CAAC,GAAK,+BAA+B,eAAiB,mBAAmBC,QAAQ,CAAC,GAAK,kBAAkB,eAAiB,aAA2wD,EAAhvD,WAAK,IAAMC,GAAK,EAAAC,EAAA,KAAgBC,GAAS,UAAuBC,GAAQ,SAAe,SAAAC,GAAO,OAAAA,EAAMD,QAAQE,SAASC,QAAO,SAAAC,GAAQ,OAAAA,EAAOC,kBAAmB,GAAyB,IAAAC,WAAS,GAAjCC,EAAS,KAACC,EAAY,KAAuBC,EAAmB,SAAAC,GAAIX,GAAS,WAAgBW,EAAEC,mBAAmB,IAAAC,YAAU,WAAKb,GAAS,WAAgBc,MAAK,WAAKL,GAAa,MAAUM,OAAM,iBAAU,IAAI,IAAMC,EAAYR,GAA6B,IAAlBP,EAAQgB,QAAkBrB,GAAgC,OAAK,IAAI,CAACsB,KAAK,IAAIC,QAAQT,QAAoB,GAAoB,OAAK,KAAK,CAACU,IAAI,OAAOC,MAAM,UAAU9B,KAAK,KAAKH,UAAU,wBAAmB,EAAOU,EAAKwB,cAAc7B,EAASG,sBAAsB,OAAmB,OAAK,EAAO,CAAC2B,MAAMzB,EAAKwB,cAAc7B,EAASb,eAAU,GAAoB,OAAK,IAAe,CAAC4B,UAAUA,EAAUQ,YAAYA,EAAYQ,UAAU,UAAU7B,aAAaG,EAAKwB,cAAc7B,EAASE,aAAa,CAAC8B,OAAO7B,UAAsB,EAAOK,EAAQyB,KAAI,SAAArB,GAAS,IAAMsB,EAAW,IAAIC,KAAKvB,EAAOC,aAAauB,wBAAmBC,EAAU,CAACC,KAAK,UAAUC,MAAM,UAAUC,IAAI,UAAUC,KAAK,UAAUC,OAAO,YAAY,OAAmB,OAAK,MAAM,CAAC/C,UAAU,oFAAoFiB,EAAO+B,IAAgB,OAAK,MAAM,QAAG,EAAO/B,EAAOgC,WAAuB,OAAK,IAAI,CAACnB,KAAKb,EAAOiC,IAAIC,OAAO,eAAU,EAAOZ,IAAyB,OAAK,KAAK,CAACN,MAAM,eAAU,EAAOM,EAAW,MAAY7B,EAAKwB,cAAc7B,EAASI,YAAYQ,EAAOgC,YAAwB,OAAK,KAAQ,CAACG,UAAS,EAAMjD,KAAK,WAAuB,OAAK,MAAM,CAACH,UAAU,aAAQ,GAAoB,OAAK,KAAY,QAAG,GAAoB,OAAK,KAAO,CAACiC,MAAM,UAAUoB,SAASjC,EAAUW,QAAQT,QAAoB,EAAOZ,EAAKwB,cAAc7B,EAASC","sources":["webpack://mangane-fe/./app/soapbox/features/ui/components/better_column.js","webpack://mangane-fe/./app/soapbox/features/backups/index.tsx"],"sourcesContent":["import _extends from\"@babel/runtime/helpers/esm/extends\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";const _excluded=[\"heading\",\"icon\",\"children\",\"active\",\"menu\"];import\"core-js/modules/es.string.replace.js\";import React from'react';import{Column}from'soapbox/components/ui';import DropdownMenu from'soapbox/containers/dropdown_menu_container';import ColumnHeader from'./column_header';// Yes, there are 3 types of columns at this point, but this one is better, I swear\nexport default class BetterColumn extends React.PureComponent{render(){const _this$props=this.props,{heading,icon,children,active,menu}=_this$props,rest=_objectWithoutProperties(_this$props,_excluded);const columnHeaderId=heading&&heading.replace(/ /g,'-');return/*#__PURE__*/React.createElement(Column,_extends({\"aria-labelledby\":columnHeaderId,className:\"column--better\"},rest),/*#__PURE__*/_jsx(\"div\",{className:\"column__top\"},void 0,heading&&/*#__PURE__*/_jsx(ColumnHeader,{icon:icon,active:active,type:heading,columnHeaderId:columnHeaderId}),menu&&/*#__PURE__*/_jsx(\"div\",{className:\"column__menu\"},void 0,/*#__PURE__*/_jsx(DropdownMenu,{items:menu,icon:\"ellipsis-v\",size:18,direction:\"right\"}))),children);}}","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useEffect,useState}from'react';import{defineMessages,useIntl}from'react-intl';import{fetchBackups,createBackup}from'soapbox/actions/backups';import ScrollableList from'soapbox/components/scrollable_list';import{Button,FormActions,Text,Spinner}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';import Column from'../ui/components/better_column';const messages=defineMessages({heading:{\"id\":\"column.backups\",\"defaultMessage\":\"Backups\"},create:{\"id\":\"backups.actions.create\",\"defaultMessage\":\"Create backup\"},emptyMessage:{\"id\":\"backups.empty_message\",\"defaultMessage\":\"No backups found. {action}\"},emptyMessageAction:{\"id\":\"backups.empty_message.action\",\"defaultMessage\":\"Create one now?\"},pending:{\"id\":\"backups.pending\",\"defaultMessage\":\"Pending\"}});const Backups=()=>{const intl=useIntl();const dispatch=useAppDispatch();const backups=useAppSelector(state=>state.backups.toList().sortBy(backup=>backup.inserted_at));const[isLoading,setIsLoading]=useState(true);const handleCreateBackup=e=>{dispatch(createBackup());e.preventDefault();};useEffect(()=>{dispatch(fetchBackups()).then(()=>{setIsLoading(false);}).catch(()=>{});},[]);const showLoading=isLoading&&backups.count()===0;const emptyMessageAction=/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:handleCreateBackup},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",theme:\"primary\",size:\"sm\",className:\"hover:underline\"},void 0,intl.formatMessage(messages.emptyMessageAction)));return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(ScrollableList,{isLoading:isLoading,showLoading:showLoading,scrollKey:\"backups\",emptyMessage:intl.formatMessage(messages.emptyMessage,{action:emptyMessageAction})},void 0,backups.map(backup=>{const insertedAt=new Date(backup.inserted_at).toLocaleDateString(undefined,{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});return/*#__PURE__*/_jsx(\"div\",{className:\"p-2 mb-3 rounded bg-gray-100 dark:bg-slate-900 flex justify-between items-center\"},backup.id,/*#__PURE__*/_jsx(\"div\",{},void 0,backup.processed?/*#__PURE__*/_jsx(\"a\",{href:backup.url,target:\"_blank\"},void 0,insertedAt):/*#__PURE__*/_jsx(Text,{theme:\"subtle\"},void 0,insertedAt,\"\\xA0-\\xA0\",intl.formatMessage(messages.pending))),!backup.processed&&/*#__PURE__*/_jsx(Spinner,{withText:false,size:15}));})),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\"},void 0,/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{theme:\"primary\",disabled:isLoading,onClick:handleCreateBackup},void 0,intl.formatMessage(messages.create)))));};export default Backups;"],"names":["_excluded","render","_this$props","this","props","heading","icon","children","active","menu","rest","columnHeaderId","replace","className","type","items","size","direction","messages","create","emptyMessage","emptyMessageAction","pending","intl","useIntl","dispatch","backups","state","toList","sortBy","backup","inserted_at","useState","isLoading","setIsLoading","handleCreateBackup","e","preventDefault","useEffect","then","catch","showLoading","count","href","onClick","tag","theme","formatMessage","label","scrollKey","action","map","insertedAt","Date","toLocaleDateString","undefined","year","month","day","hour","minute","id","processed","url","target","withText","disabled"],"sourceRoot":""}