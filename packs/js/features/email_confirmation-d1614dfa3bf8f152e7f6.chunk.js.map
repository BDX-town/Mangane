{"version":3,"file":"packs/js/features/email_confirmation-d1614dfa3bf8f152e7f6.chunk.js","mappings":"0NAAogBA,EAA8B,UAA9BA,EAA6C,OAAcC,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,6BAA6B,eAAiB,oCAA0CC,EAAM,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,sBAIjlB,UAJ+nB,WAAK,IAAMC,GAAK,SAAgBC,GAAS,UAAsB,EAAmB,WAAjW,QAA+UC,EAAM,KAACC,EAAS,KAI/1B,OAJ+3B,aAAgB,WAAQT,GAAOO,GAAS,QAAoBP,IAAQU,MAAK,WAAKD,EAAUZ,GAAkBU,EAAS,aAAiBD,EAAKK,cAAcb,EAASC,cAAca,OAAM,SAAAC,GAAiC,GAAzBJ,EAAUZ,GAAkBgB,EAAMC,SAASC,KAAKF,MAAM,CAAC,IAAMG,GAAQ,IAAAC,GAAkBJ,EAAMC,SAASC,KAAKF,OAAON,EAAS,WAAeS,UAI9sC,CAAChB,IAAYA,GAAOQ,IAASX,GAAkBW,IAASX,GAA8E,OAAK,KAAQ,KAAzD,OAAK,KAAS,CAACqB,GAAG","sources":["webpack://mangane-fe/./app/soapbox/features/email_confirmation/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url-search-params.js\";import*as React from'react';import{defineMessages,useIntl}from'react-intl';import{Redirect}from'react-router-dom';import{confirmChangedEmail}from'soapbox/actions/security';import snackbar from'soapbox/actions/snackbar';import{Spinner}from'soapbox/components/ui';import{useAppDispatch}from'soapbox/hooks';import{buildErrorMessage}from'soapbox/utils/errors';const Statuses={IDLE:'IDLE',SUCCESS:'SUCCESS',FAIL:'FAIL'};const messages=defineMessages({success:{\"id\":\"email_confirmation.success\",\"defaultMessage\":\"Your email has been confirmed!\"}});const token=new URLSearchParams(window.location.search).get('confirmation_token');const EmailConfirmation=()=>{const intl=useIntl();const dispatch=useAppDispatch();const[status,setStatus]=React.useState(Statuses.IDLE);React.useEffect(()=>{if(token){dispatch(confirmChangedEmail(token)).then(()=>{setStatus(Statuses.SUCCESS);dispatch(snackbar.success(intl.formatMessage(messages.success)));}).catch(error=>{setStatus(Statuses.FAIL);if(error.response.data.error){const message=buildErrorMessage(error.response.data.error);dispatch(snackbar.error(message// intl.formatMessage({\n//   id: 'email_confirmation.fail',\n//   defaultMessage,\n// }),\n));}});}},[token]);if(!token||status===Statuses.SUCCESS||status===Statuses.FAIL){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(Spinner,{});};export default EmailConfirmation;"],"names":["Statuses","messages","success","token","URLSearchParams","window","location","search","get","intl","dispatch","status","setStatus","then","formatMessage","catch","error","response","data","message","b","to"],"sourceRoot":""}