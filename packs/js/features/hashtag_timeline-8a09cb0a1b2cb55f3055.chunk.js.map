{"version":3,"file":"packs/js/features/hashtag_timeline-8a09cb0a1b2cb55f3055.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./node_modules/lodash/isEqual.js","webpack://mangane-fe/./app/soapbox/components/column_header.js","webpack://mangane-fe/./app/soapbox/features/hashtag_timeline/index.js"],"sourcesContent":["var baseIsEqual = require('./_baseIsEqual');\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\n\n\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;","'use strict';import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _class;import\"core-js/modules/web.dom-collections.iterator.js\";import React from'react';import{withRouter}from'react-router-dom';// import classNames from 'classnames';\n// import { injectIntl, defineMessages } from 'react-intl';\n// import Icon from 'soapbox/components/icon';\nimport SubNavigation from'soapbox/components/sub_navigation';// const messages = defineMessages({\n//   show: { id: 'column_header.show_settings', defaultMessage: 'Show settings' },\n//   hide: { id: 'column_header.hide_settings', defaultMessage: 'Hide settings' },\n// });\nlet ColumnHeader=withRouter(_class=class ColumnHeader extends React.PureComponent{constructor(){super(...arguments);_defineProperty(this,\"state\",{collapsed:true,animating:false});_defineProperty(this,\"historyBack\",()=>{var _window$history;if(((_window$history=window.history)===null||_window$history===void 0?void 0:_window$history.length)===1){this.props.history.push('/');}else{this.props.history.goBack();}});_defineProperty(this,\"handleToggleClick\",e=>{e.stopPropagation();this.setState({collapsed:!this.state.collapsed,animating:true});});_defineProperty(this,\"handleBackClick\",()=>{this.historyBack();});_defineProperty(this,\"handleTransitionEnd\",()=>{this.setState({animating:false});});}render(){const{title}=this.props;return/*#__PURE__*/_jsx(SubNavigation,{message:title});}// render() {\n//   const { title, icon, active, children, extraButton, intl: { formatMessage } } = this.props;\n//   const { collapsed, animating } = this.state;\n//\n//   const wrapperClassName = classNames('column-header__wrapper', {\n//     'active': active,\n//   });\n//\n//   const buttonClassName = classNames('column-header', {\n//     'active': active,\n//   });\n//\n//   const collapsibleClassName = classNames('column-header__collapsible', {\n//     'collapsed': collapsed,\n//     'animating': animating,\n//   });\n//\n//   const collapsibleButtonClassName = classNames('column-header__button', {\n//     'active': !collapsed,\n//   });\n//\n//   let extraContent, collapseButton;\n//\n//   if (children) {\n//     extraContent = (\n//       <div key='extra-content' className='column-header__collapsible__extra'>\n//         {children}\n//       </div>\n//     );\n//   }\n//\n//   const collapsedContent = [\n//     extraContent,\n//   ];\n//\n//   if (children) {\n//     collapseButton = <button className={collapsibleButtonClassName} title={formatMessage(collapsed ? messages.show : messages.hide)} aria-label={formatMessage(collapsed ? messages.show : messages.hide)} aria-pressed={collapsed ? 'false' : 'true'} onClick={this.handleToggleClick}><Icon id='cog' /></button>;\n//   }\n//\n//   const hasTitle = icon && title;\n//\n//   return (\n//     <div className={wrapperClassName}>\n//       <h1 className={buttonClassName}>\n//         {hasTitle && (\n//           <button>\n//             <Icon id={icon} fixedWidth className='column-header__icon' />\n//             {title}\n//           </button>\n//         )}\n//\n//         <div className='column-header__buttons'>\n//           {extraButton}\n//           {collapseButton}\n//         </div>\n//       </h1>\n//\n//       <div className={collapsibleClassName} tabIndex={collapsed ? -1 : null} onTransitionEnd={this.handleTransitionEnd}>\n//         <div className='column-header__collapsible-inner'>\n//           {(!collapsed || animating) && collapsedContent}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n})||_class;export{ColumnHeader as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class;import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/es.array.includes.js\";import isEqual from'lodash/isEqual';import React from'react';import{FormattedMessage}from'react-intl';import{connect}from'react-redux';import{connectHashtagStream}from'../../actions/streaming';import{expandHashtagTimeline,clearTimeline}from'../../actions/timelines';import ColumnHeader from'../../components/column_header';import{Column}from'../../components/ui';import Timeline from'../ui/components/timeline';const mapStateToProps=(state,props)=>({hasUnread:state.getIn(['timelines',\"hashtag:\".concat(props.params.id),'unread'])>0});let HashtagTimeline=(_dec=connect(mapStateToProps),_dec(_class=class HashtagTimeline extends React.PureComponent{constructor(){super(...arguments);_defineProperty(this,\"disconnects\",[]);_defineProperty(this,\"title\",()=>{const title=[\"#\".concat(this.props.params.id)];// TODO: wtf is all this?\n// It exists in Mastodon's codebase, but undocumented\nif(this.additionalFor('any')){title.push(' ',/*#__PURE__*/_jsx(FormattedMessage,{id:\"hashtag.column_header.tag_mode.any\",values:{additional:this.additionalFor('any')},defaultMessage:\"or {additional}\"},\"any\"));}if(this.additionalFor('all')){title.push(' ',/*#__PURE__*/_jsx(FormattedMessage,{id:\"hashtag.column_header.tag_mode.all\",values:{additional:this.additionalFor('all')},defaultMessage:\"and {additional}\"},\"all\"));}if(this.additionalFor('none')){title.push(' ',/*#__PURE__*/_jsx(FormattedMessage,{id:\"hashtag.column_header.tag_mode.none\",values:{additional:this.additionalFor('none')},defaultMessage:\"without {additional}\"},\"none\"));}return title;});_defineProperty(this,\"additionalFor\",mode=>{const{tags}=this.props.params;if(tags&&(tags[mode]||[]).length>0){return tags[mode].map(tag=>tag.value).join('/');}else{return'';}});_defineProperty(this,\"handleLoadMore\",maxId=>{const{id,tags}=this.props.params;this.props.dispatch(expandHashtagTimeline(id,{maxId,tags}));});}_subscribe(dispatch,id){let tags=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const any=(tags.any||[]).map(tag=>tag.value);const all=(tags.all||[]).map(tag=>tag.value);const none=(tags.none||[]).map(tag=>tag.value);[id,...any].map(tag=>{this.disconnects.push(dispatch(connectHashtagStream(id,tag,status=>{const tags=status.tags.map(tag=>tag.name);return all.filter(tag=>tags.includes(tag)).length===all.length&&none.filter(tag=>tags.includes(tag)).length===0;})));});}_unsubscribe(){this.disconnects.map(disconnect=>disconnect());this.disconnects=[];}componentDidMount(){const{dispatch}=this.props;const{id,tags}=this.props.params;this._subscribe(dispatch,id,tags);dispatch(expandHashtagTimeline(id,{tags}));}componentDidUpdate(prevProps){const{dispatch}=this.props;const{id,tags}=this.props.params;const{id:prevId,tags:prevTags}=prevProps.params;if(id!==prevId||!isEqual(tags,prevTags)){this._unsubscribe();this._subscribe(dispatch,id,tags);dispatch(clearTimeline(\"hashtag:\".concat(id)));dispatch(expandHashtagTimeline(id,{tags}));}}componentWillUnmount(){this._unsubscribe();}render(){const{hasUnread}=this.props;const{id}=this.props.params;return/*#__PURE__*/_jsx(Column,{label:\"#\".concat(id),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pt-4 sm:p-0\"},void 0,/*#__PURE__*/_jsx(ColumnHeader,{active:hasUnread,title:this.title()})),/*#__PURE__*/_jsx(Timeline,{scrollKey:\"hashtag_timeline\",timelineId:\"hashtag:\".concat(id),onLoadMore:this.handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.hashtag\",defaultMessage:\"There is nothing in this hashtag yet.\"}),divideType:\"space\"}));}})||_class);export{HashtagTimeline as default};"],"names":["baseIsEqual","module","exports","value","other","_class","ColumnHeader","arguments","collapsed","animating","_window$history","window","history","length","props","push","goBack","e","stopPropagation","setState","state","historyBack","render","title","this","message","HashtagTimeline","hasUnread","getIn","concat","params","id","_dec","additionalFor","values","additional","defaultMessage","mode","tags","map","tag","join","maxId","dispatch","_subscribe","undefined","any","all","none","disconnects","status","name","filter","includes","_unsubscribe","disconnect","componentDidMount","componentDidUpdate","prevProps","prevId","prevTags","componentWillUnmount","label","transparent","withHeader","className","active","scrollKey","timelineId","onLoadMore","handleLoadMore","emptyMessage","divideType"],"sourceRoot":""}