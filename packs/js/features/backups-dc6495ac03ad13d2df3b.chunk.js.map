{"version":3,"file":"packs/js/features/backups-dc6495ac03ad13d2df3b.chunk.js","mappings":"yuBAAyMA,EAAU,CAAC,UAAU,OAAO,WAAW,SAAS,QACzP,2B,+CAAysB,OAA/pB,OAAoB,YAAAC,OAAA,WAAS,IAAMC,EAAYC,KAAKC,MAAOC,EAAmCH,EAAW,QAAtCI,EAA2BJ,EAAW,KAAjCK,EAAsBL,EAAW,SAAxBM,EAAaN,EAAW,OAAjBO,EAAMP,EAAW,KAACQ,GAAK,OAAyBR,EAAYF,GAAiBW,EAAeN,GAASA,EAAQO,QAAQ,KAAK,KAAK,OAAmB,gBAAoB,MAAO,OAAS,CAAC,kBAAkBD,EAAeE,UAAU,kBAAkBH,IAAmB,OAAK,MAAM,CAACG,UAAU,oBAAe,EAAOR,IAAsB,OAAK,IAAa,CAACC,KAAKA,EAAKE,OAAOA,EAAOM,KAAKT,EAAQM,eAAeA,IAAiBF,IAAmB,OAAK,MAAM,CAACI,UAAU,qBAAgB,GAAoB,OAAK,IAAa,CAACE,MAAMN,EAAKH,KAAK,aAAaU,KAAK,GAAGC,UAAU,YAAYV,IAAW,EAAzsB,CAA0C,iB,ICD8aW,GAAS,QAAe,CAACb,QAAQ,CAAC,GAAK,iBAAiB,eAAiB,WAAWc,OAAO,CAAC,GAAK,yBAAyB,eAAiB,iBAAiBC,aAAa,CAAC,GAAK,wBAAwB,eAAiB,8BAA8BC,mBAAmB,CAAC,GAAK,+BAA+B,eAAiB,mBAAmBC,QAAQ,CAAC,GAAK,kBAAkB,eAAiB,aAAy1C,EAA9zC,WAAK,IAAMC,GAAK,EAAAC,EAAA,KAAgBC,GAAS,UAAuBC,GAAQ,SAAe,SAAAC,GAAO,OAAAA,EAAMD,QAAQE,SAASC,QAAO,SAAAC,GAAQ,OAAAA,EAAOC,kBAAmB,GAAyB,IAAAC,WAAS,GAAjCC,EAAS,KAACC,EAAY,KAAuBC,EAAmB,SAAAC,GAAIX,GAAS,WAAgBW,EAAEC,mBAAmK,IAAAC,YAAU,WAAKb,GAAS,WAAgBc,MAAK,WAAKL,GAAa,MAASM,OAAM,iBAAU,IAAI,IAAMC,EAAYR,GAA6B,IAAlBP,EAAQgB,QAAkBrB,GAAgC,OAAK,IAAI,CAACsB,KAAK,IAAIC,QAAQT,QAAoB,EAAOZ,EAAKsB,cAAc3B,EAASG,qBAAqB,OAAmB,OAAK,EAAO,CAACf,KAAK,iBAAiBwC,MAAMvB,EAAKsB,cAAc3B,EAASb,SAASI,KAA3e,CAAC,CAACsC,KAAKxB,EAAKsB,cAAc3B,EAASC,QAAQ6B,OAAOb,EAAmB7B,KAAK,EAAQ,YAAgb,GAAoB,OAAK,IAAe,CAAC2B,UAAUA,EAAUQ,YAAYA,EAAYQ,UAAU,UAAU7B,aAAaG,EAAKsB,cAAc3B,EAASE,aAAa,CAAC4B,OAAO3B,UAAsB,EAAOK,EAAQwB,KAAI,SAAApB,GAAqB,cAAK,MAAM,CAACjB,UAAU,IAAW,SAAS,CAAC,mBAAmBiB,EAAOqB,aAAarB,EAAOsB,GAAGtB,EAAOqB,WAAuB,OAAK,IAAI,CAACR,KAAKb,EAAOuB,IAAIC,OAAO,eAAU,EAAOxB,EAAOC,cAA0B,OAAK,MAAM,QAAG,EAAOR,EAAKsB,cAAc3B,EAASI,SAAS,KAAKQ,EAAOC","sources":["webpack://mangane-fe/./app/soapbox/features/ui/components/better_column.js","webpack://mangane-fe/./app/soapbox/features/backups/index.tsx"],"sourcesContent":["import _extends from\"@babel/runtime/helpers/esm/extends\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";const _excluded=[\"heading\",\"icon\",\"children\",\"active\",\"menu\"];import\"core-js/modules/es.string.replace.js\";import React from'react';import{Column}from'soapbox/components/ui';import DropdownMenu from'soapbox/containers/dropdown_menu_container';import ColumnHeader from'./column_header';// Yes, there are 3 types of columns at this point, but this one is better, I swear\nexport default class BetterColumn extends React.PureComponent{render(){const _this$props=this.props,{heading,icon,children,active,menu}=_this$props,rest=_objectWithoutProperties(_this$props,_excluded);const columnHeaderId=heading&&heading.replace(/ /g,'-');return/*#__PURE__*/React.createElement(Column,_extends({\"aria-labelledby\":columnHeaderId,className:\"column--better\"},rest),/*#__PURE__*/_jsx(\"div\",{className:\"column__top\"},void 0,heading&&/*#__PURE__*/_jsx(ColumnHeader,{icon:icon,active:active,type:heading,columnHeaderId:columnHeaderId}),menu&&/*#__PURE__*/_jsx(\"div\",{className:\"column__menu\"},void 0,/*#__PURE__*/_jsx(DropdownMenu,{items:menu,icon:\"ellipsis-v\",size:18,direction:\"right\"}))),children);}}","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import classNames from'classnames';import React,{useEffect,useState}from'react';import{defineMessages,useIntl}from'react-intl';import{fetchBackups,createBackup}from'soapbox/actions/backups';import ScrollableList from'soapbox/components/scrollable_list';import{useAppDispatch,useAppSelector}from'soapbox/hooks';import Column from'../ui/components/better_column';const messages=defineMessages({heading:{\"id\":\"column.backups\",\"defaultMessage\":\"Backups\"},create:{\"id\":\"backups.actions.create\",\"defaultMessage\":\"Create backup\"},emptyMessage:{\"id\":\"backups.empty_message\",\"defaultMessage\":\"No backups found. {action}\"},emptyMessageAction:{\"id\":\"backups.empty_message.action\",\"defaultMessage\":\"Create one now?\"},pending:{\"id\":\"backups.pending\",\"defaultMessage\":\"Pending\"}});const Backups=()=>{const intl=useIntl();const dispatch=useAppDispatch();const backups=useAppSelector(state=>state.backups.toList().sortBy(backup=>backup.inserted_at));const[isLoading,setIsLoading]=useState(true);const handleCreateBackup=e=>{dispatch(createBackup());e.preventDefault();};const makeColumnMenu=()=>{return[{text:intl.formatMessage(messages.create),action:handleCreateBackup,icon:require('@tabler/icons/plus.svg')}];};useEffect(()=>{dispatch(fetchBackups()).then(()=>{setIsLoading(true);}).catch(()=>{});},[]);const showLoading=isLoading&&backups.count()===0;const emptyMessageAction=/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:handleCreateBackup},void 0,intl.formatMessage(messages.emptyMessageAction));return/*#__PURE__*/_jsx(Column,{icon:\"cloud-download\",label:intl.formatMessage(messages.heading),menu:makeColumnMenu()},void 0,/*#__PURE__*/_jsx(ScrollableList,{isLoading:isLoading,showLoading:showLoading,scrollKey:\"backups\",emptyMessage:intl.formatMessage(messages.emptyMessage,{action:emptyMessageAction})},void 0,backups.map(backup=>/*#__PURE__*/_jsx(\"div\",{className:classNames('backup',{'backup--pending':!backup.processed})},backup.id,backup.processed?/*#__PURE__*/_jsx(\"a\",{href:backup.url,target:\"_blank\"},void 0,backup.inserted_at):/*#__PURE__*/_jsx(\"div\",{},void 0,intl.formatMessage(messages.pending),\": \",backup.inserted_at)))));};export default Backups;"],"names":["_excluded","render","_this$props","this","props","heading","icon","children","active","menu","rest","columnHeaderId","replace","className","type","items","size","direction","messages","create","emptyMessage","emptyMessageAction","pending","intl","useIntl","dispatch","backups","state","toList","sortBy","backup","inserted_at","useState","isLoading","setIsLoading","handleCreateBackup","e","preventDefault","useEffect","then","catch","showLoading","count","href","onClick","formatMessage","label","text","action","scrollKey","map","processed","id","url","target"],"sourceRoot":""}