{"version":3,"file":"packs/js/features/conversations-de22614b6cb44fc02f06.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/conversations/components/conversation.tsx","webpack://mangane-fe/./app/soapbox/features/conversations/components/conversations_list.tsx","webpack://mangane-fe/./app/soapbox/features/conversations/index.tsx"],"sourcesContent":["var _jsxFileName = \"/home/runner/work/Mangane/Mangane/app/soapbox/features/conversations/components/conversation.tsx\";\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { markConversationRead } from 'soapbox/actions/conversations';\nimport StatusContainer from 'soapbox/containers/status_container';\nimport { useAppDispatch, useAppSelector } from 'soapbox/hooks';\n\nconst Conversation = _ref => {\n  let {\n    conversationId,\n    onMoveUp,\n    onMoveDown\n  } = _ref;\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n  const {\n    accounts,\n    unread,\n    lastStatusId\n  } = useAppSelector(state => {\n    const conversation = state.conversations.items.find(x => x.id === conversationId);\n    return {\n      accounts: conversation.accounts.map(accountId => state.accounts.get(accountId, null)),\n      unread: conversation.unread,\n      lastStatusId: conversation.last_status || null\n    };\n  });\n\n  const handleClick = () => {\n    if (unread) {\n      dispatch(markConversationRead(conversationId));\n    }\n\n    history.push(\"/statuses/\".concat(lastStatusId));\n  };\n\n  const handleHotkeyMoveUp = () => {\n    onMoveUp(conversationId);\n  };\n\n  const handleHotkeyMoveDown = () => {\n    onMoveDown(conversationId);\n  };\n\n  if (lastStatusId === null) {\n    return null;\n  }\n\n  return (\n    /*#__PURE__*/\n    // @ts-ignore\n    React.createElement(StatusContainer, {\n      id: lastStatusId,\n      unread: unread,\n      otherAccounts: accounts,\n      onMoveUp: handleHotkeyMoveUp,\n      onMoveDown: handleHotkeyMoveDown,\n      onClick: handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }\n    })\n  );\n};\n\nexport default Conversation;","var _jsxFileName = \"/home/runner/work/Mangane/Mangane/app/soapbox/features/conversations/components/conversations_list.tsx\";\nimport debounce from 'lodash/debounce';\nimport React, { useRef } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { expandConversations } from 'soapbox/actions/conversations';\nimport ScrollableList from 'soapbox/components/scrollable_list';\nimport { useAppDispatch, useAppSelector } from 'soapbox/hooks';\nimport Conversation from '../components/conversation';\n\nconst ConversationsList = () => {\n  const dispatch = useAppDispatch();\n  const ref = useRef(null);\n  const conversations = useAppSelector(state => state.conversations.items);\n  const isLoading = useAppSelector(state => state.conversations.isLoading);\n\n  const getCurrentIndex = id => conversations.findIndex(x => x.id === id);\n\n  const handleMoveUp = id => {\n    const elementIndex = getCurrentIndex(id) - 1;\n    selectChild(elementIndex);\n  };\n\n  const handleMoveDown = id => {\n    const elementIndex = getCurrentIndex(id) + 1;\n    selectChild(elementIndex);\n  };\n\n  const selectChild = index => {\n    var _ref$current;\n\n    (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.scrollIntoView({\n      index,\n      behavior: 'smooth',\n      done: () => {\n        const element = document.querySelector(\"#direct-list [data-index=\\\"\".concat(index, \"\\\"] .focusable\"));\n\n        if (element) {\n          element.focus();\n        }\n      }\n    });\n  };\n\n  const handleLoadOlder = debounce(() => {\n    const maxId = conversations.getIn([-1, 'id']);\n    if (maxId) dispatch(expandConversations({\n      maxId\n    }));\n  }, 300, {\n    leading: true\n  });\n  return /*#__PURE__*/React.createElement(ScrollableList, {\n    onLoadMore: handleLoadOlder,\n    id: \"direct-list\",\n    scrollKey: \"direct\",\n    ref: ref,\n    isLoading: isLoading,\n    showLoading: isLoading && conversations.size === 0,\n    emptyMessage: /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"empty_column.direct\",\n      defaultMessage: \"You don't have any direct messages yet. When you send or receive one, it will show up here.\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, conversations.map(item => /*#__PURE__*/React.createElement(Conversation, {\n    key: item.id,\n    conversationId: item.id,\n    onMoveUp: handleMoveUp,\n    onMoveDown: handleMoveDown,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default ConversationsList;","var _jsxFileName = \"/home/runner/work/Mangane/Mangane/app/soapbox/features/conversations/index.tsx\";\nimport React, { useEffect } from 'react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { directComposeById } from 'soapbox/actions/compose';\nimport { mountConversations, unmountConversations, expandConversations } from 'soapbox/actions/conversations';\nimport { connectDirectStream } from 'soapbox/actions/streaming';\nimport AccountSearch from 'soapbox/components/account_search';\nimport { Column } from 'soapbox/components/ui';\nimport { useAppDispatch } from 'soapbox/hooks';\nimport ConversationsList from './components/conversations_list';\nconst messages = defineMessages({\n  title: {\n    \"id\": \"column.direct\",\n    \"defaultMessage\": \"Direct messages\"\n  },\n  searchPlaceholder: {\n    \"id\": \"direct.search_placeholder\",\n    \"defaultMessage\": \"Send a message to\\u2026\"\n  }\n});\n\nconst ConversationsTimeline = () => {\n  const intl = useIntl();\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    dispatch(mountConversations());\n    dispatch(expandConversations());\n    const disconnect = dispatch(connectDirectStream());\n    return () => {\n      dispatch(unmountConversations());\n      disconnect();\n    };\n  }, []);\n\n  const handleSuggestion = accountId => {\n    dispatch(directComposeById(accountId));\n  };\n\n  return /*#__PURE__*/React.createElement(Column, {\n    label: intl.formatMessage(messages.title),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AccountSearch, {\n    placeholder: intl.formatMessage(messages.searchPlaceholder),\n    onSelected: handleSuggestion,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ConversationsList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default ConversationsTimeline;"],"names":[],"sourceRoot":""}