{"version":3,"file":"packs/js/features/followers-92e6e228f3f9ba3ba378.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/followers/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import debounce from'lodash/debounce';import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{fetchAccount,fetchFollowers,expandFollowers,fetchAccountByUsername}from'soapbox/actions/accounts';import MissingIndicator from'soapbox/components/missing_indicator';import ScrollableList from'soapbox/components/scrollable_list';import{Spinner}from'soapbox/components/ui';import AccountContainer from'soapbox/containers/account_container';import{findAccountByUsername}from'soapbox/selectors';import{getFollowDifference}from'soapbox/utils/accounts';import{getFeatures}from'soapbox/utils/features';import Column from'../ui/components/column';const messages=defineMessages({heading:{\"id\":\"column.followers\",\"defaultMessage\":\"Followers\"}});const mapStateToProps=(state,_ref)=>{var _account,_account$pleroma,_state$user_lists$fol,_state$user_lists$fol2;let{params,withReplies=false}=_ref;const username=params.username||'';const me=state.get('me');const accountFetchError=(state.getIn(['accounts',-1,'username'])||'').toLowerCase()===username.toLowerCase();const features=getFeatures(state.get('instance'));let accountId=-1;let account=null;if(accountFetchError){accountId=null;}else{account=findAccountByUsername(state,username);accountId=account?account.getIn(['id'],null):-1;}const diffCount=getFollowDifference(state,accountId,'followers');const isBlocked=state.getIn(['relationships',accountId,'blocked_by'],false);const unavailable=me===accountId?false:isBlocked&&!features.blockersVisible||((_account=account)===null||_account===void 0?void 0:(_account$pleroma=_account.pleroma)===null||_account$pleroma===void 0?void 0:_account$pleroma.get('hide_followers'));return{accountId,unavailable,isAccount:!!state.getIn(['accounts',accountId]),accountIds:(_state$user_lists$fol=state.user_lists.followers.get(accountId))===null||_state$user_lists$fol===void 0?void 0:_state$user_lists$fol.items,hasMore:!!((_state$user_lists$fol2=state.user_lists.followers.get(accountId))!==null&&_state$user_lists$fol2!==void 0&&_state$user_lists$fol2.next),diffCount};};let Followers=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_class2=class Followers extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"handleLoadMore\",debounce(()=>{if(this.props.accountId&&this.props.accountId!==-1){this.props.dispatch(expandFollowers(this.props.accountId));}},300,{leading:true}));}componentDidMount(){const{params:{username},accountId}=this.props;if(accountId&&accountId!==-1){this.props.dispatch(fetchAccount(accountId));this.props.dispatch(fetchFollowers(accountId));}else{this.props.dispatch(fetchAccountByUsername(username));}}componentDidUpdate(prevProps){const{accountId,dispatch}=this.props;if(accountId&&accountId!==-1&&accountId!==prevProps.accountId&&accountId){dispatch(fetchAccount(accountId));dispatch(fetchFollowers(accountId));}}render(){const{intl,accountIds,hasMore,diffCount,isAccount,accountId,unavailable}=this.props;if(!isAccount&&accountId!==-1){return/*#__PURE__*/_jsx(MissingIndicator,{});}if(accountId===-1||!accountIds){return/*#__PURE__*/_jsx(Spinner,{});}if(unavailable){return/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_unavailable\",defaultMessage:\"Profile unavailable\"}));}return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading),transparent:true},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"followers\",hasMore:hasMore,diffCount:diffCount,onLoadMore:this.handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.followers.empty\",defaultMessage:\"No one follows this user yet.\"}),itemClassName:\"pb-4\"},void 0,accountIds.map(id=>/*#__PURE__*/_jsx(AccountContainer,{id:id,withNote:false},id))));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired,params:PropTypes.object.isRequired,dispatch:PropTypes.func.isRequired,accountIds:ImmutablePropTypes.orderedSet,hasMore:PropTypes.bool,diffCount:PropTypes.number,isAccount:PropTypes.bool,unavailable:PropTypes.bool}),_class2))||_class)||_class);export{Followers as default};"],"names":["_class","_class2","messages","heading","Followers","state","_ref","_account","_account$pleroma","_state$user_lists$fol","_state$user_lists$fol2","accountId","params","username","me","get","accountFetchError","getIn","toLowerCase","features","account","diffCount","isBlocked","unavailable","blockersVisible","pleroma","isAccount","accountIds","user_lists","followers","items","hasMore","next","_dec","arguments","props","dispatch","leading","componentDidMount","this","componentDidUpdate","prevProps","render","intl","className","id","defaultMessage","label","formatMessage","transparent","scrollKey","onLoadMore","handleLoadMore","emptyMessage","itemClassName","map","withNote"],"sourceRoot":""}