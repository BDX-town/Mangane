{"version":3,"file":"packs/js/features/aliases-a834684a0121e7386c5f.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/aliases/components/account.tsx","webpack://mangane-fe/./app/soapbox/features/aliases/components/search.tsx","webpack://mangane-fe/./app/soapbox/features/aliases/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.includes.js\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{addToAliases}from'soapbox/actions/aliases';import Avatar from'soapbox/components/avatar';import DisplayName from'soapbox/components/display-name';import IconButton from'soapbox/components/icon_button';import{useAppDispatch,useAppSelector}from'soapbox/hooks';import{makeGetAccount}from'soapbox/selectors';import{getFeatures}from'soapbox/utils/features';const messages=defineMessages({add:{\"id\":\"aliases.account.add\",\"defaultMessage\":\"Create alias\"}});const getAccount=makeGetAccount();const Account=_ref=>{let{accountId,aliases}=_ref;const intl=useIntl();const dispatch=useAppDispatch();const account=useAppSelector(state=>getAccount(state,accountId));const added=useAppSelector(state=>{const instance=state.instance;const features=getFeatures(instance);const account=getAccount(state,accountId);const apId=account===null||account===void 0?void 0:account.pleroma.get('ap_id');const name=features.accountMoving?account===null||account===void 0?void 0:account.acct:apId;return aliases.includes(name);});const me=useAppSelector(state=>state.me);const handleOnAdd=()=>dispatch(addToAliases(account));if(!account)return null;let button;if(!added&&accountId!==me){button=/*#__PURE__*/_jsx(\"div\",{className:\"account__relationship\"},void 0,/*#__PURE__*/_jsx(IconButton,{src:require('@tabler/icons/plus.svg'),title:intl.formatMessage(messages.add),onClick:handleOnAdd}));}return/*#__PURE__*/_jsx(\"div\",{className:\"account\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__wrapper\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__display-name\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__avatar-wrapper\"},void 0,/*#__PURE__*/_jsx(Avatar,{account:account,size:36})),/*#__PURE__*/_jsx(DisplayName,{account:account})),button));};export default Account;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import classNames from'classnames';import React from'react';import{defineMessages,useIntl}from'react-intl';import{useDispatch}from'react-redux';import{fetchAliasesSuggestions,clearAliasesSuggestions,changeAliasesSuggestions}from'soapbox/actions/aliases';import Icon from'soapbox/components/icon';import{Button}from'soapbox/components/ui';import{useAppSelector}from'soapbox/hooks';const messages=defineMessages({search:{\"id\":\"aliases.search\",\"defaultMessage\":\"Search your old account\"},searchTitle:{\"id\":\"tabs_bar.search\",\"defaultMessage\":\"Search\"}});const Search=()=>{const dispatch=useDispatch();const intl=useIntl();const value=useAppSelector(state=>state.aliases.suggestions.value);const handleChange=e=>{dispatch(changeAliasesSuggestions(e.target.value));};const handleKeyUp=e=>{if(e.keyCode===13){dispatch(fetchAliasesSuggestions(value));}};const handleSubmit=()=>{dispatch(fetchAliasesSuggestions(value));};const handleClear=()=>{dispatch(clearAliasesSuggestions());};const hasValue=value.length>0;return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-1\"},void 0,/*#__PURE__*/_jsx(\"label\",{className:\"flex-grow relative\"},void 0,/*#__PURE__*/_jsx(\"span\",{style:{display:'none'}},void 0,intl.formatMessage(messages.search)),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full sm:text-sm dark:bg-slate-800 dark:text-white dark:placeholder:text-gray-500 focus:ring-indigo-500 focus:border-indigo-500 rounded-full\",type:\"text\",value:value,onChange:handleChange,onKeyUp:handleKeyUp,placeholder:intl.formatMessage(messages.search)}),/*#__PURE__*/_jsx(\"div\",{role:\"button\",tabIndex:0,className:\"search__icon\",onClick:handleClear},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/backspace.svg'),\"aria-label\":intl.formatMessage(messages.search),className:classNames('svg-icon--backspace',{active:hasValue})}))),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit},void 0,intl.formatMessage(messages.searchTitle)));};export default Search;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React,{useEffect}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchAliases,removeFromAliases}from'soapbox/actions/aliases';import Icon from'soapbox/components/icon';import ScrollableList from'soapbox/components/scrollable_list';import{CardHeader,CardTitle,Column,HStack,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';import{makeGetAccount}from'soapbox/selectors';import{getFeatures}from'soapbox/utils/features';import Account from'./components/account';import Search from'./components/search';const messages=defineMessages({heading:{\"id\":\"column.aliases\",\"defaultMessage\":\"Account aliases\"},subheading_add_new:{\"id\":\"column.aliases.subheading_add_new\",\"defaultMessage\":\"Add New Alias\"},create_error:{\"id\":\"column.aliases.create_error\",\"defaultMessage\":\"Error creating alias\"},delete_error:{\"id\":\"column.aliases.delete_error\",\"defaultMessage\":\"Error deleting alias\"},subheading_aliases:{\"id\":\"column.aliases.subheading_aliases\",\"defaultMessage\":\"Current aliases\"},delete:{\"id\":\"column.aliases.delete\",\"defaultMessage\":\"Delete\"}});const getAccount=makeGetAccount();const Aliases=()=>{const intl=useIntl();const dispatch=useAppDispatch();const aliases=useAppSelector(state=>{const me=state.me;const account=getAccount(state,me);const instance=state.instance;const features=getFeatures(instance);if(features.accountMoving)return state.aliases.aliases.items;return account.pleroma.get('also_known_as');});const searchAccountIds=useAppSelector(state=>state.aliases.suggestions.items);const loaded=useAppSelector(state=>state.aliases.suggestions.loaded);useEffect(()=>{dispatch(fetchAliases);},[]);const handleFilterDelete=e=>{dispatch(removeFromAliases(e.currentTarget.dataset.value));};const emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases\",defaultMessage:\"You haven't created any account alias yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"aliases-settings-panel\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_add_new)})),/*#__PURE__*/_jsx(Search,{}),loaded&&searchAccountIds.size===0?/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases.suggestions\",defaultMessage:\"There are no account suggestions available for the provided term.\"})):/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts\"},void 0,searchAccountIds.map(accountId=>/*#__PURE__*/_jsx(Account,{accountId:accountId,aliases:aliases},accountId))),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_aliases)})),/*#__PURE__*/_jsx(\"div\",{className:\"aliases-settings-panel\"},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"aliases\",emptyMessage:emptyMessage},void 0,aliases.map((alias,i)=>/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",justifyContent:\"between\",space:1,className:\"p-2\"},i,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.account_label\",defaultMessage:\"Old account:\"})),' ',/*#__PURE__*/_jsx(Text,{tag:\"span\"},void 0,alias)),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",role:\"button\",tabIndex:0,onClick:handleFilterDelete,\"data-value\":alias,\"aria-label\":intl.formatMessage(messages.delete)},void 0,/*#__PURE__*/_jsx(Icon,{className:\"mr-1.5\",src:require('@tabler/icons/x.svg')}),/*#__PURE__*/_jsx(Text,{weight:\"bold\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.aliases_list_delete\",defaultMessage:\"Unlink alias\"}))))))));};export default Aliases;"],"names":["messages","add","getAccount","_ref","button","accountId","aliases","intl","useIntl","dispatch","account","state","added","instance","features","apId","pleroma","get","name","accountMoving","acct","includes","me","className","src","title","formatMessage","onClick","size","search","searchTitle","value","suggestions","hasValue","length","style","display","type","onChange","e","target","onKeyUp","keyCode","placeholder","role","tabIndex","active","heading","subheading_add_new","create_error","delete_error","subheading_aliases","delete","items","searchAccountIds","loaded","useEffect","handleFilterDelete","currentTarget","dataset","emptyMessage","id","defaultMessage","label","map","scrollKey","alias","i","alignItems","justifyContent","space","tag","theme","weight"],"sourceRoot":""}