{"version":3,"file":"packs/js/features/filters-e295fd4a5e25b1679c9e.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/filters/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import React,{useEffect,useState}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchFilters,createFilter,deleteFilter}from'soapbox/actions/filters';import snackbar from'soapbox/actions/snackbar';import Icon from'soapbox/components/icon';import{Button,CardHeader,CardTitle,Column,Form,FormActions,FormGroup,Input}from'soapbox/components/ui';import{FieldsGroup,Checkbox}from'soapbox/features/forms';import{useAppDispatch,useAppSelector}from'soapbox/hooks';const messages=defineMessages({heading:{\"id\":\"column.filters\",\"defaultMessage\":\"Muted words\"},subheading_add_new:{\"id\":\"column.filters.subheading_add_new\",\"defaultMessage\":\"Add New Filter\"},keyword:{\"id\":\"column.filters.keyword\",\"defaultMessage\":\"Keyword or phrase\"},expires:{\"id\":\"column.filters.expires\",\"defaultMessage\":\"Expire after\"},expires_hint:{\"id\":\"column.filters.expires_hint\",\"defaultMessage\":\"Expiration dates are not currently supported\"},home_timeline:{\"id\":\"column.filters.home_timeline\",\"defaultMessage\":\"Home timeline\"},public_timeline:{\"id\":\"column.filters.public_timeline\",\"defaultMessage\":\"Public timeline\"},notifications:{\"id\":\"column.filters.notifications\",\"defaultMessage\":\"Also apply for notifications\"},conversations:{\"id\":\"column.filters.conversations\",\"defaultMessage\":\"Conversations\"},drop_notifications:{\"id\":\"column.filters.drop_notifications\",\"defaultMessage\":\"Will also hide status in notifications\"},drop_header:{\"id\":\"column.filters.drop_header\",\"defaultMessage\":\"Drop instead of hide\"},drop_hint:{\"id\":\"column.filters.drop_hint\",\"defaultMessage\":\"Filtered posts will disappear irreversibly, even if filter is later removed\"},whole_word_header:{\"id\":\"column.filters.whole_word_header\",\"defaultMessage\":\"Whole word\"},whole_word_hint:{\"id\":\"column.filters.whole_word_hint\",\"defaultMessage\":\"When the keyword or phrase is alphanumeric only, it will only be applied if it matches the whole word\"},add_new:{\"id\":\"column.filters.add_new\",\"defaultMessage\":\"Add New Filter\"},create_error:{\"id\":\"column.filters.create_error\",\"defaultMessage\":\"Error adding filter\"},delete_error:{\"id\":\"column.filters.delete_error\",\"defaultMessage\":\"Error deleting filter\"},subheading_filters:{\"id\":\"column.filters.subheading_filters\",\"defaultMessage\":\"Current Filters\"},delete:{\"id\":\"column.filters.delete\",\"defaultMessage\":\"Delete\"}});const Filters=()=>{const intl=useIntl();const dispatch=useAppDispatch();const filters=useAppSelector(state=>state.filters);const[phrase,setPhrase]=useState('');const[expiresAt]=useState('');const[irreversible,setIrreversible]=useState(false);const[wholeWord,setWholeWord]=useState(true);const handleAddNew=e=>{e.preventDefault();dispatch(createFilter(phrase,expiresAt,[],wholeWord,irreversible)).then(()=>{return dispatch(fetchFilters());}).catch(error=>{dispatch(snackbar.error(intl.formatMessage(messages.create_error)));});};const handleFilterDelete=filter=>{dispatch(deleteFilter(filter.id)).then(()=>{return dispatch(fetchFilters());}).catch(()=>{dispatch(snackbar.error(intl.formatMessage(messages.delete_error)));});};useEffect(()=>{dispatch(fetchFilters());},[]);const emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.filters\",defaultMessage:\"You haven't created any muted words yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"filter-settings-panel\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_add_new)})),/*#__PURE__*/_jsx(Form,{onSubmit:handleAddNew},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.keyword)},void 0,/*#__PURE__*/_jsx(Input,{required:true,type:\"text\",name:\"phrase\",onChange:_ref=>{let{target}=_ref;return setPhrase(target.value);}})),/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-2\"},void 0,/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.drop_header),hint:intl.formatMessage(messages.drop_hint),name:\"irreversible\",checked:irreversible,onChange:_ref2=>{let{target}=_ref2;return setIrreversible(target.checked);}}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.whole_word_header),hint:intl.formatMessage(messages.whole_word_hint),name:\"whole_word\",checked:wholeWord,onChange:_ref3=>{let{target}=_ref3;return setWholeWord(target.checked);}}))),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"primary\"},void 0,intl.formatMessage(messages.add_new)))),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_filters)})),/*#__PURE__*/_jsx(\"div\",{},void 0,filters.size===0&&/*#__PURE__*/_jsx(\"div\",{},void 0,emptyMessage),filters.map((filter,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"filter__container rounded bg-gray-100 dark:bg-slate-900 p-2 my-3\"},i,/*#__PURE__*/_jsx(\"div\",{className:\"\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"pr-1 text-gray-600 dark:text-gray-400\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_phrase_label\",defaultMessage:\"Keyword or phrase:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.phrase)),/*#__PURE__*/_jsx(\"div\",{className:\"\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"pr-1 text-gray-600 dark:text-gray-400\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_details_label\",defaultMessage:\"Filter settings:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.irreversible?/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_drop\",defaultMessage:\"Drop\"})):/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_hide\",defaultMessage:\"Hide\"})),filter.whole_word&&/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_whole-word\",defaultMessage:\"Whole word\"}))))),/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Button,{theme:\"ghost\",onClick:()=>handleFilterDelete(filter),\"aria-label\":intl.formatMessage(messages.delete)},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end gap-1\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_delete\",defaultMessage:\"Delete\"}),/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/x.svg')}))))))));};export default Filters;"],"names":["messages","heading","subheading_add_new","keyword","expires","expires_hint","home_timeline","public_timeline","notifications","conversations","drop_notifications","drop_header","drop_hint","whole_word_header","whole_word_hint","add_new","create_error","delete_error","subheading_filters","delete","intl","dispatch","filters","state","useState","phrase","setPhrase","expiresAt","irreversible","setIrreversible","wholeWord","setWholeWord","useEffect","emptyMessage","id","defaultMessage","className","label","formatMessage","title","onSubmit","e","preventDefault","then","catch","error","labelText","required","type","name","onChange","_ref","target","value","hint","checked","_ref2","_ref3","theme","size","map","filter","i","whole_word","onClick","handleFilterDelete","src"],"sourceRoot":""}