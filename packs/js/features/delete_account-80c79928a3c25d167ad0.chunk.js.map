{"version":3,"file":"packs/js/features/delete_account-80c79928a3c25d167ad0.chunk.js","mappings":"wMAA+eA,GAAS,QAAe,CAACC,mBAAmB,CAAC,GAAK,iCAAiC,eAAiB,YAAYC,aAAa,CAAC,GAAK,0BAA0B,eAAiB,kBAAkBC,WAAW,CAAC,GAAK,uBAAuB,eAAiB,iSAAiSC,gBAAgB,CAAC,GAAK,6BAA6B,eAAiB,4HAA4HC,aAAa,CAAC,GAAK,yBAAyB,eAAiB,kBAAkBC,qBAAqB,CAAC,GAAK,kCAAkC,eAAiB,iCAAiCC,kBAAkB,CAAC,GAAK,+BAA+B,eAAiB,8BAAi+C,UAA/6C,WAAK,IAAMC,GAAK,SAAgBC,GAAS,UAAuBC,GAAS,UAAmB,EAAuB,WAAe,IAArCC,EAAQ,KAACC,EAAW,KAA0B,EAAuB,YAAe,GAArCC,EAAS,KAACC,EAAU,KAA8BC,EAAkB,eAAkB,SAAAC,GAAQA,EAAMC,UAAUL,EAAYI,EAAME,OAAOC,SAAS,IAAUC,EAAa,eAAkB,WAAKN,GAAW,GAAML,GAAS,QAAcE,IAAWU,MAAK,WAAKT,EAAY,IAAIH,EAAS,aAAiBD,EAAKc,cAActB,EAASM,2BAA2BiB,SAAQ,WAAKT,GAAW,MAAUU,OAAM,WAAKZ,EAAY,IAAIH,EAAS,WAAeD,EAAKc,cAActB,EAASO,0BAA0B,CAACI,EAASF,EAASD,IAAO,OAAmB,OAAK,KAAK,CAACiB,QAAQ,gBAAW,GAAoB,OAAK,KAAW,CAACC,SAAS,kBAAa,GAAoB,OAAK,KAAU,CAACC,MAAMnB,EAAKc,cAActB,EAASE,kBAA8B,OAAK,KAAS,QAAG,GAAoB,OAAK,IAAI,CAAC0B,UAAU,2BAAsB,EAAOpB,EAAKc,cAAcZ,EAASmB,WAAW7B,EAASG,WAAWH,EAASI,mBAA+B,OAAK,KAAK,CAAC0B,SAASV,QAAc,GAAoB,OAAK,KAAU,CAACW,UAAUvB,EAAKc,cAActB,EAASC,0BAAqB,GAAoB,OAAK,KAAM,CAAC+B,KAAK,WAAWC,KAAK,WAAWC,SAASnB,EAAkBI,MAAMR,MAAyB,OAAK,KAAY,QAAG,GAAoB,OAAK,KAAO,CAACqB,KAAK,SAASG,MAAM,SAASC,SAASvB,QAAW,EAAOL,EAAKc,cAActB,EAASK","sources":["webpack://mangane-fe/./app/soapbox/features/delete_account/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/es.promise.finally.js\";import*as React from'react';import{defineMessages,useIntl}from'react-intl';import{deleteAccount}from'soapbox/actions/security';import snackbar from'soapbox/actions/snackbar';import{Button,Card,CardBody,CardHeader,CardTitle,Form,FormActions,FormGroup,Input}from'soapbox/components/ui';import{useAppDispatch,useFeatures}from'soapbox/hooks';const messages=defineMessages({passwordFieldLabel:{\"id\":\"security.fields.password.label\",\"defaultMessage\":\"Password\"},deleteHeader:{\"id\":\"security.headers.delete\",\"defaultMessage\":\"Delete Account\"},deleteText:{\"id\":\"security.text.delete\",\"defaultMessage\":\"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone. Your account will be destroyed from this server, and a deletion request will be sent to other servers. It's not guaranteed that all servers will purge your account.\"},localDeleteText:{\"id\":\"security.text.delete.local\",\"defaultMessage\":\"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone.\"},deleteSubmit:{\"id\":\"security.submit.delete\",\"defaultMessage\":\"Delete Account\"},deleteAccountSuccess:{\"id\":\"security.delete_account.success\",\"defaultMessage\":\"Account successfully deleted.\"},deleteAccountFail:{\"id\":\"security.delete_account.fail\",\"defaultMessage\":\"Account deletion failed.\"}});const DeleteAccount=()=>{const intl=useIntl();const dispatch=useAppDispatch();const features=useFeatures();const[password,setPassword]=React.useState('');const[isLoading,setLoading]=React.useState(false);const handleInputChange=React.useCallback(event=>{event.persist();setPassword(event.target.value);},[]);const handleSubmit=React.useCallback(()=>{setLoading(true);dispatch(deleteAccount(password)).then(()=>{setPassword('');dispatch(snackbar.success(intl.formatMessage(messages.deleteAccountSuccess)));}).finally(()=>{setLoading(false);}).catch(()=>{setPassword('');dispatch(snackbar.error(intl.formatMessage(messages.deleteAccountFail)));});},[password,dispatch,intl]);return/*#__PURE__*/_jsx(Card,{variant:\"rounded\"},void 0,/*#__PURE__*/_jsx(CardHeader,{backHref:\"/settings\"},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.deleteHeader)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mb-4\"},void 0,intl.formatMessage(features.federating?messages.deleteText:messages.localDeleteText)),/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.passwordFieldLabel)},void 0,/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",onChange:handleInputChange,value:password})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"danger\",disabled:isLoading},void 0,intl.formatMessage(messages.deleteSubmit))))));};export default DeleteAccount;"],"names":["messages","passwordFieldLabel","deleteHeader","deleteText","localDeleteText","deleteSubmit","deleteAccountSuccess","deleteAccountFail","intl","dispatch","features","password","setPassword","isLoading","setLoading","handleInputChange","event","persist","target","value","handleSubmit","then","formatMessage","finally","catch","variant","backHref","title","className","federating","onSubmit","labelText","type","name","onChange","theme","disabled"],"sourceRoot":""}