{"version":3,"file":"packs/js/features/remote_timeline-d870460869b311b19efe.chunk.js","mappings":"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","sources":["webpack://mangane-fe/./app/soapbox/features/remote_timeline/index.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/instance_info_panel.tsx","webpack://mangane-fe/./app/soapbox/features/ui/components/instance_moderation_panel.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React,{useEffect,useRef}from'react';import{FormattedMessage}from'react-intl';import{connectRemoteStream}from'soapbox/actions/streaming';import{expandRemoteTimeline}from'soapbox/actions/timelines';import SubNavigation from'soapbox/components/sub_navigation';import Column from'soapbox/features/ui/components/column';import{useAppDispatch,useAppSelector,useSettings}from'soapbox/hooks';import{isMobile}from'soapbox/is_mobile';import{makeGetRemoteInstance}from'soapbox/selectors';import Timeline from'../ui/components/timeline';import{ButtonPin}from'./components/button-pin';const Heading=_ref=>{let{instance}=_ref;const getRemoteInstance=makeGetRemoteInstance();const meta=useAppSelector(s=>getRemoteInstance(s,instance));return/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 items-center\"},void 0,meta.get('favicon')&&/*#__PURE__*/_jsx(\"img\",{alt:\"\".concat(instance,\" favicon\"),src:meta.get('favicon'),width:24,height:24}),instance,/*#__PURE__*/_jsx(ButtonPin,{instance:instance,width:20,height:20}));};/** View statuses from a remote instance. */const RemoteTimeline=_ref2=>{let{params}=_ref2;const dispatch=useAppDispatch();const instance=params===null||params===void 0?void 0:params.instance;const settings=useSettings();const stream=useRef(null);const timelineId='remote';const onlyMedia=!!settings.getIn(['remote','other','onlyMedia']);const disconnect=()=>{if(stream.current){stream.current();}};const handleLoadMore=maxId=>{dispatch(expandRemoteTimeline(instance,{maxId,onlyMedia}));};useEffect(()=>{disconnect();dispatch(expandRemoteTimeline(instance,{onlyMedia,maxId:undefined}));if(!isMobile(window.innerWidth)){stream.current=dispatch(connectRemoteStream(instance,{onlyMedia}));return()=>{disconnect();stream.current=null;};}},[onlyMedia]);const completeTimelineId=\"\".concat(timelineId).concat(onlyMedia?':media':'',\":\").concat(instance);return/*#__PURE__*/_jsx(\"div\",{className:\"pt-3\"},void 0,/*#__PURE__*/_jsx(Column,{label:instance,transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pt-1 sm:p-0\"},void 0,/*#__PURE__*/_jsx(SubNavigation,{},void 0,/*#__PURE__*/_jsx(Heading,{instance:instance}))),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 px-4 sm:p-0\"},void 0,instance&&/*#__PURE__*/_jsx(FormattedMessage,{id:\"remote_timeline.filter_message\",defaultMessage:\"You are viewing the local timeline of {instance}.\",values:{instance}})),/*#__PURE__*/_jsx(Timeline,{scrollKey:\"\".concat(timelineId,\"_\").concat(instance,\"_timeline\"),timelineId:completeTimelineId,onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.remote\",defaultMessage:\"There is nothing here! Manually follow users from {instance} to fill it up.\",values:{instance}}),divideType:\"space\"})));};export default RemoteTimeline;","'use strict';import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.includes.js\";import React from'react';import{useIntl,defineMessages}from'react-intl';import{pinHost,unpinHost}from'soapbox/actions/remote_timeline';import{Widget}from'soapbox/components/ui';import{useAppSelector,useAppDispatch,useSettings}from'soapbox/hooks';import{makeGetRemoteInstance}from'soapbox/selectors';const getRemoteInstance=makeGetRemoteInstance();const messages=defineMessages({pinHost:{\"id\":\"remote_instance.pin_host\",\"defaultMessage\":\"Pin {host}\"},unpinHost:{\"id\":\"remote_instance.unpin_host\",\"defaultMessage\":\"Unpin {host}\"}});/** Widget that displays information about a remote instance to users. */const InstanceInfoPanel=_ref=>{let{host}=_ref;const intl=useIntl();const dispatch=useAppDispatch();const settings=useSettings();const remoteInstance=useAppSelector(state=>getRemoteInstance(state,host));const pinned=settings.getIn(['remote_timeline','pinnedHosts']).includes(host);const handlePinHost=()=>{if(!pinned){dispatch(pinHost(host));}else{dispatch(unpinHost(host));}};if(!remoteInstance)return null;return/*#__PURE__*/_jsx(Widget,{title:remoteInstance.get('host'),onActionClick:handlePinHost,actionIcon:pinned?require('@tabler/icons/pinned-off.svg'):require('@tabler/icons/pin.svg'),actionTitle:intl.formatMessage(pinned?messages.unpinHost:messages.pinHost,{host})});};export default InstanceInfoPanel;","'use strict';import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{useIntl,defineMessages,FormattedMessage}from'react-intl';import{openModal}from'soapbox/actions/modals';import{Widget}from'soapbox/components/ui';import DropdownMenu from'soapbox/containers/dropdown_menu_container';import InstanceRestrictions from'soapbox/features/federation_restrictions/components/instance_restrictions';import{useAppSelector,useAppDispatch,useOwnAccount}from'soapbox/hooks';import{makeGetRemoteInstance}from'soapbox/selectors';const getRemoteInstance=makeGetRemoteInstance();const messages=defineMessages({editFederation:{\"id\":\"remote_instance.edit_federation\",\"defaultMessage\":\"Edit federation\"}});/** Widget for moderators to manage a remote instance. */const InstanceModerationPanel=_ref=>{let{host}=_ref;const intl=useIntl();const dispatch=useAppDispatch();const account=useOwnAccount();const remoteInstance=useAppSelector(state=>getRemoteInstance(state,host));const handleEditFederation=()=>{dispatch(openModal('EDIT_FEDERATION',{host}));};const makeMenu=()=>{return[{text:intl.formatMessage(messages.editFederation),action:handleEditFederation,icon:require('@tabler/icons/edit.svg')}];};const menu=makeMenu();return/*#__PURE__*/_jsx(Widget,{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"remote_instance.federation_panel.heading\",defaultMessage:\"Federation Restrictions\"}),action:account!==null&&account!==void 0&&account.admin?/*#__PURE__*/_jsx(DropdownMenu,{items:menu,src:require('@tabler/icons/dots-vertical.svg')}):undefined},void 0,/*#__PURE__*/_jsx(InstanceRestrictions,{remoteInstance:remoteInstance}));};export default InstanceModerationPanel;"],"names":["Heading","_ref","instance","getRemoteInstance","meta","s","className","get","alt","concat","src","width","height","_ref2","params","dispatch","settings","stream","useRef","timelineId","onlyMedia","getIn","disconnect","current","useEffect","maxId","undefined","window","innerWidth","completeTimelineId","label","transparent","withHeader","id","defaultMessage","values","scrollKey","onLoadMore","emptyMessage","divideType","messages","pinHost","unpinHost","host","intl","remoteInstance","state","pinned","includes","title","onActionClick","actionIcon","actionTitle","formatMessage","editFederation","account","menu","text","action","icon","admin","items"],"sourceRoot":""}