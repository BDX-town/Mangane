{"version":3,"file":"packs/js/features/search-41ede19c286dcb079ca5.chunk.js","mappings":"yTAA4oB,EAAjY,WAAK,OAAmB,OAAK,MAAM,CAACA,UAAU,gBAAW,GAAoB,OAAK,MAAM,CAACA,UAAU,yBAAoB,GAAoB,OAAK,OAAO,CAACA,UAAU,8BAAyB,GAAoB,OAAK,MAAM,CAACA,UAAU,gCAA2B,GAAoB,OAAK,IAAkB,CAACC,KAAK,OAAmB,OAAK,IAAuB,CAACC,UAAU,EAAEC,UAAU,S,UCAvK,EAA1Q,WAAK,IAAMC,GAAO,QAAsB,GAAG,IAAI,OAAmB,OAAK,MAAM,CAACJ,UAAU,4BAAuB,GAAoB,OAAK,MAAM,CAACA,UAAU,qBAAgB,GAAoB,OAAK,MAAM,CAACA,UAAU,2BAAsB,GAAO,QAAaI,O,gBCA4iBC,GAAS,QAAe,CAACC,SAAS,CAAC,GAAK,0BAA0B,eAAiB,UAAUC,SAAS,CAAC,GAAK,0BAA0B,eAAiB,SAASC,SAAS,CAAC,GAAK,0BAA0B,eAAiB,cAEogC,EAFl+B,WAAK,IAAIC,EAAqoEC,EAAhnEC,GAAK,IAAAC,QAAO,MAAYC,GAAK,EAAAC,EAAA,KAAgBC,GAAS,UAAuBC,GAAM,SAAe,SAAAC,GAAO,OAAAA,EAAMC,OAAOC,kBAAsBC,GAAQ,SAAe,SAAAH,GAAO,OAAAA,EAAMC,OAAOE,WAAeC,GAAY,SAAe,SAAAJ,GAAO,OAAAA,EAAMI,YAAYC,SAAaC,GAAiB,SAAe,SAAAN,GAAO,OAAAA,EAAMO,kBAAkBF,SAAaG,GAAO,SAAe,SAAAR,GAAO,OAAAA,EAAMQ,OAAOH,SAAaI,GAAU,SAAe,SAAAT,GAAO,OAAAA,EAAMC,OAAOQ,aAAiBC,GAAe,SAAe,SAAAV,GAAO,OAAAA,EAAMC,OAAOU,UAAcC,GAAgB,SAAe,SAAAZ,GAAO,OAAAA,EAAMC,OAAOY,aAAiBC,GAAQ,SAAe,SAAAd,GAAQ,IAAIe,EAAoB,OAAkE,QAA3DA,EAAoBf,EAAMX,SAAS2B,IAAIJ,UAAgD,IAAtBG,OAA6B,EAAOA,EAAoBE,QAAkIC,EAAa,SAAAC,GAAiB,OAAArB,GAAS,QAAUqB,KAA4aC,EAAgB,SAAAC,GAAK,IAAIC,EAAY,OAAiC,QAA1BA,EAAYC,SAAkC,IAAdD,OAAqB,EAAOA,EAAYE,SAASC,WAAU,SAAAC,GAAK,OAAAA,IAAML,MAAYM,EAAa,SAAAN,GAAK,GAAIE,EAAJ,CAAsB,IAAMK,EAAaR,EAAgBC,GAAI,EAAEQ,EAAYD,KAAsBE,EAAe,SAAAT,GAAK,GAAIE,EAAJ,CAAsB,IAAMK,EAAaR,EAAgBC,GAAI,EAAEQ,EAAYD,KAAsBC,EAAY,SAAAE,GAAQ,IAAIC,EAA6C,QAA9BA,EAActC,EAAKuC,eAAiC,IAAhBD,GAA8BA,EAAcE,eAAe,CAACH,MAAK,EAACI,SAAS,SAASC,KAAK,WAAK,IAAMC,EAAQC,SAASC,cAAc,gCAAiCC,OAAOT,EAAM,kBAAmBM,MAAAA,GAAwCA,EAAQI,aAAc,IAAAC,YAAU,WAAK5C,GAAS,aAA2B,IAAsB,IAAsB6C,EAAWC,EAAgErB,EAAtvClB,EAAypCwC,GAAQ,EAA0CC,EAAqB,IAE96E,MAFm+E,aAAjBpC,IAA6BmC,EAAQ1C,EAAQ4C,gBAAgBJ,EAAOxC,EAAQ6C,eAAeF,EAAqB,EAAsB3C,EAAQd,UAAUc,EAAQd,SAASL,KAAK,EAAGS,EAAcU,EAAQd,SAAS4D,KAAI,SAAApC,GAAwB,cAAK,IAAiB,CAACQ,GAAGR,GAAWA,MAAsBJ,IAAWL,GAAcA,EAAY8C,UAA8IP,IAAQC,GAA8B,OAAK,MAAM,CAAC7D,UAAU,+BAA0B,GAAoB,OAAK,IAAiB,CAACsC,GAAG,+BAA+B8B,eAAe,2CAA6CC,OAAO,CAACC,KAAKtD,OAA/WN,EAAcW,EAAY6C,KAAI,SAAAK,GAAyB,cAAK,IAAiB,CAACjC,GAAGiC,EAAWxC,SAASwC,EAAWxC,aAA+R,aAAjBJ,IAA6BmC,EAAQ1C,EAAQoD,gBAAgBZ,EAAOxC,EAAQqD,eAAkBrD,EAAQb,UAAUa,EAAQb,SAASN,KAAK,GAAGS,EAAcU,EAAQb,SAAS2D,KAAI,SAAAQ,GACl4I,cAAK,IAAgB,CAACpC,GAAGoC,EAASC,SAAS/B,EAAagC,WAAW7B,GAAgB2B,MAAWlC,EAAWpB,EAAQb,UAAmBmB,IAAWH,GAAmBA,EAAiB4C,UAChDP,IAAQC,GAA8B,OAAK,MAAM,CAAC7D,UAAU,+BAA0B,GAAoB,OAAK,IAAiB,CAACsC,GAAG,+BAA+B8B,eAAe,0CAA4CC,OAAO,CAACC,KAAKtD,QADhLN,EAAca,EAAiB2C,KAAI,SAAAQ,GACjO,cAAK,IAAgB,CAACpC,GAAGoC,EAASC,SAAS/B,EAAagC,WAAW7B,GAAgB2B,MAAWlC,EAAWjB,IAAqS,aAAjBI,IAA6BmC,EAAQ1C,EAAQyD,gBAAgBjB,EAAOxC,EAAQ0D,eAAef,EAAqB,EAAsB3C,EAAQZ,UAAUY,EAAQZ,SAASP,KAAK,EAAGS,EAAcU,EAAQZ,SAAS0D,KAAI,SAAAa,GAAsB,cAAK,IAAQ,CAACA,QAAQA,GAASA,EAAQC,SAAiBtD,IAAWL,GAAcA,EAAY8C,UAAiHP,IAAQC,GAA8B,OAAK,MAAM,CAAC7D,UAAU,+BAA0B,GAAoB,OAAK,IAAiB,CAACsC,GAAG,+BAA+B8B,eAAe,6CAA+CC,OAAO,CAACC,KAAKtD,OAApVN,EAAce,EAAOyC,KAAI,SAAAa,GAAsB,cAAK,IAAQ,CAACA,QAAQA,GAASA,EAAQC,UAA6R,gBAAoB,WAAe,KAAKnD,GAA6B,OAAK,KAAO,CAAC7B,UAAU,4EAA4EiF,MAAM,QAAG,GAAoB,OAAK,IAAW,CAACC,cAAc,UAAUC,IAAI,EAAQ,IAAuBC,QAFoyB,WAAI,OAAArE,GAAS,eAExwB,OAAK,KAAK,QAAG,GAAoB,OAAK,IAAiB,CAACuB,GAAG,gCAAgC8B,eAAe,4CAA4CC,OAAO,CAACnC,KAAKH,QAF8tBT,EAAM,CAAC,CAAC+D,KAAKxE,EAAKyE,cAAcjF,EAASE,UAAUgF,OAAO,WAAI,OAAApD,EAAa,aAAY6C,KAAK,YAAY,CAACK,KAAKxE,EAAKyE,cAAcjF,EAASC,UAAUiF,OAAO,WAAI,OAAApD,EAAa,aAAY6C,KAAK,YAAY,CAACK,KAAKxE,EAAKyE,cAAcjF,EAASG,UAAU+E,OAAO,WAAI,OAAApD,EAAa,aAAY6C,KAAK,cAAgC,OAAK,KAAK,CAAC1D,MAAMA,EAAMkE,WAAW7D,KAE/hCkC,GAA+B,gBAAoB,IAAe,CAACvB,GAAG,iBAAiBmD,IAAI9E,EAAKgC,IAAIhB,EAAe+D,UAAU,GAAGjC,OAAO9B,EAAe,KAAK8B,OAAOzC,GAAO2E,UAAUjE,IAAYkC,EAAOgC,YAAYlE,IAAYkC,IAA0C,QAAhCnD,EAAeC,SAAwC,IAAjBD,OAAwB,EAAOA,EAAe0D,WAAWL,QAAQA,EAAQ+B,WAF+J,WAAI,OAAA9E,GAAS,QAAaY,KAE/JoC,qBAAqBA,EAAqB+B,iBAAiB,GAAG9F,UAAU,IAAW,CAAC,8DAA+E,aAAjB2B,IAA8BoE,cAAc,IAAW,CAAC,OAAwB,aAAjBpE,EAA4B,OAAwB,aAAjBA,KAA+BjB,GAAe,MCF35D,GAAS,QAAe,CAACsF,QAAQ,CAAC,GAAK,gBAAgB,eAAiB,YAAqT,EAAxR,WAAK,IAAMnF,GAAK,EAAAC,EAAA,KAAU,OAAmB,OAAK,KAAO,CAACmF,YAAW,EAAMC,MAAMrF,EAAKyE,cAAc,EAASU,eAAU,GAAoB,OAAK,MAAM,CAAChG,UAAU,kBAAa,GAAoB,OAAK,IAAO,CAACmG,WAAU,EAAKC,YAAW,KAAoB,OAAK,EAAc","sources":["webpack://mangane-fe/./app/soapbox/features/placeholder/components/placeholder_account.tsx","webpack://mangane-fe/./app/soapbox/features/placeholder/components/placeholder_hashtag.tsx","webpack://mangane-fe/./app/soapbox/features/compose/components/search_results.tsx","webpack://mangane-fe/./app/soapbox/features/search/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import PlaceholderAvatar from'./placeholder_avatar';import PlaceholderDisplayName from'./placeholder_display_name';/** Fake account to display while data is loading. */const PlaceholderAccount=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"account\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__wrapper\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"account__display-name\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__avatar-wrapper\"},void 0,/*#__PURE__*/_jsx(PlaceholderAvatar,{size:36})),/*#__PURE__*/_jsx(PlaceholderDisplayName,{minLength:3,maxLength:25}))));};export default PlaceholderAccount;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{generateText,randomIntFromInterval}from'../utils';/** Fake hashtag to display while data is loading. */const PlaceholderHashtag=()=>{const length=randomIntFromInterval(15,30);return/*#__PURE__*/_jsx(\"div\",{className:\"placeholder-hashtag\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"trends__item\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"trends__item__name\"},void 0,generateText(length))));};export default PlaceholderHashtag;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import classNames from'classnames';import React,{useEffect,useRef}from'react';import{FormattedMessage,defineMessages,useIntl}from'react-intl';import{clearSearch,expandSearch,setFilter}from'soapbox/actions/search';import{fetchTrendingStatuses}from'soapbox/actions/trending_statuses';import Hashtag from'soapbox/components/hashtag';import IconButton from'soapbox/components/icon_button';import ScrollableList from'soapbox/components/scrollable_list';import{HStack,Tabs,Text}from'soapbox/components/ui';import AccountContainer from'soapbox/containers/account_container';import StatusContainer from'soapbox/containers/status_container';import PlaceholderAccount from'soapbox/features/placeholder/components/placeholder_account';import PlaceholderHashtag from'soapbox/features/placeholder/components/placeholder_hashtag';import PlaceholderStatus from'soapbox/features/placeholder/components/placeholder_status';import{useAppDispatch,useAppSelector}from'soapbox/hooks';const messages=defineMessages({accounts:{\"id\":\"search_results.accounts\",\"defaultMessage\":\"People\"},statuses:{\"id\":\"search_results.statuses\",\"defaultMessage\":\"Posts\"},hashtags:{\"id\":\"search_results.hashtags\",\"defaultMessage\":\"Hashtags\"}});const SearchResults=()=>{var _searchResults;const node=useRef(null);const intl=useIntl();const dispatch=useAppDispatch();const value=useAppSelector(state=>state.search.submittedValue);const results=useAppSelector(state=>state.search.results);const suggestions=useAppSelector(state=>state.suggestions.items);const trendingStatuses=useAppSelector(state=>state.trending_statuses.items);const trends=useAppSelector(state=>state.trends.items);const submitted=useAppSelector(state=>state.search.submitted);const selectedFilter=useAppSelector(state=>state.search.filter);const filterByAccount=useAppSelector(state=>state.search.accountId);const account=useAppSelector(state=>{var _state$accounts$get;return(_state$accounts$get=state.accounts.get(filterByAccount))===null||_state$accounts$get===void 0?void 0:_state$accounts$get.acct;});const handleLoadMore=()=>dispatch(expandSearch(selectedFilter));const handleClearSearch=()=>dispatch(clearSearch());const selectFilter=newActiveFilter=>dispatch(setFilter(newActiveFilter));const renderFilterBar=()=>{const items=[{text:intl.formatMessage(messages.statuses),action:()=>selectFilter('statuses'),name:'statuses'},{text:intl.formatMessage(messages.accounts),action:()=>selectFilter('accounts'),name:'accounts'},{text:intl.formatMessage(messages.hashtags),action:()=>selectFilter('hashtags'),name:'hashtags'}];return/*#__PURE__*/_jsx(Tabs,{items:items,activeItem:selectedFilter});};const getCurrentIndex=id=>{var _resultsIds;return(_resultsIds=resultsIds)===null||_resultsIds===void 0?void 0:_resultsIds.keySeq().findIndex(key=>key===id);};const handleMoveUp=id=>{if(!resultsIds)return;const elementIndex=getCurrentIndex(id)-1;selectChild(elementIndex);};const handleMoveDown=id=>{if(!resultsIds)return;const elementIndex=getCurrentIndex(id)+1;selectChild(elementIndex);};const selectChild=index=>{var _node$current;(_node$current=node.current)===null||_node$current===void 0?void 0:_node$current.scrollIntoView({index,behavior:'smooth',done:()=>{const element=document.querySelector(\"#search-results [data-index=\\\"\".concat(index,\"\\\"] .focusable\"));element===null||element===void 0?void 0:element.focus();}});};useEffect(()=>{dispatch(fetchTrendingStatuses());},[]);let searchResults;let hasMore=false;let loaded;let noResultsMessage;let placeholderComponent=PlaceholderStatus;let resultsIds;if(selectedFilter==='accounts'){hasMore=results.accountsHasMore;loaded=results.accountsLoaded;placeholderComponent=PlaceholderAccount;if(results.accounts&&results.accounts.size>0){searchResults=results.accounts.map(accountId=>/*#__PURE__*/_jsx(AccountContainer,{id:accountId},accountId));}else if(!submitted&&suggestions&&!suggestions.isEmpty()){searchResults=suggestions.map(suggestion=>/*#__PURE__*/_jsx(AccountContainer,{id:suggestion.account},suggestion.account));}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.accounts\",defaultMessage:\"There are no people results for \\\"{term}\\\"\",values:{term:value}}));}}if(selectedFilter==='statuses'){hasMore=results.statusesHasMore;loaded=results.statusesLoaded;if(results.statuses&&results.statuses.size>0){searchResults=results.statuses.map(statusId=>/*#__PURE__*/ // @ts-ignore\n_jsx(StatusContainer,{id:statusId,onMoveUp:handleMoveUp,onMoveDown:handleMoveDown},statusId));resultsIds=results.statuses;}else if(!submitted&&trendingStatuses&&!trendingStatuses.isEmpty()){searchResults=trendingStatuses.map(statusId=>/*#__PURE__*/ // @ts-ignore\n_jsx(StatusContainer,{id:statusId,onMoveUp:handleMoveUp,onMoveDown:handleMoveDown},statusId));resultsIds=trendingStatuses;}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.statuses\",defaultMessage:\"There are no posts results for \\\"{term}\\\"\",values:{term:value}}));}}if(selectedFilter==='hashtags'){hasMore=results.hashtagsHasMore;loaded=results.hashtagsLoaded;placeholderComponent=PlaceholderHashtag;if(results.hashtags&&results.hashtags.size>0){searchResults=results.hashtags.map(hashtag=>/*#__PURE__*/_jsx(Hashtag,{hashtag:hashtag},hashtag.name));}else if(!submitted&&suggestions&&!suggestions.isEmpty()){searchResults=trends.map(hashtag=>/*#__PURE__*/_jsx(Hashtag,{hashtag:hashtag},hashtag.name));}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.hashtags\",defaultMessage:\"There are no hashtags results for \\\"{term}\\\"\",values:{term:value}}));}}return/*#__PURE__*/React.createElement(React.Fragment,null,filterByAccount?/*#__PURE__*/_jsx(HStack,{className:\"mb-4 pb-4 px-2 border-solid border-b border-gray-200 dark:border-gray-800\",space:2},void 0,/*#__PURE__*/_jsx(IconButton,{iconClassName:\"h-5 w-5\",src:require('@tabler/icons/x.svg'),onClick:handleClearSearch}),/*#__PURE__*/_jsx(Text,{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"search_results.filter_message\",defaultMessage:\"You are searching for posts from @{acct}.\",values:{acct:account}}))):renderFilterBar(),noResultsMessage||/*#__PURE__*/React.createElement(ScrollableList,{id:\"search-results\",ref:node,key:selectedFilter,scrollKey:\"\".concat(selectedFilter,\":\").concat(value),isLoading:submitted&&!loaded,showLoading:submitted&&!loaded&&((_searchResults=searchResults)===null||_searchResults===void 0?void 0:_searchResults.isEmpty()),hasMore:hasMore,onLoadMore:handleLoadMore,placeholderComponent:placeholderComponent,placeholderCount:20,className:classNames({'divide-gray-200 dark:divide-slate-700 divide-solid divide-y':selectedFilter==='statuses'}),itemClassName:classNames({'pb-4':selectedFilter==='accounts','pb-3':selectedFilter==='hashtags'})},searchResults||[]));};export default SearchResults;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{Column}from'soapbox/components/ui';import Search from'soapbox/features/compose/components/search';import SearchResults from'soapbox/features/compose/components/search_results';const messages=defineMessages({heading:{\"id\":\"column.search\",\"defaultMessage\":\"Search\"}});const SearchPage=()=>{const intl=useIntl();return/*#__PURE__*/_jsx(Column,{withHeader:false,label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\"},void 0,/*#__PURE__*/_jsx(Search,{autoFocus:true,autoSubmit:true}),/*#__PURE__*/_jsx(SearchResults,{})));};export default SearchPage;"],"names":["className","size","minLength","maxLength","length","messages","accounts","statuses","hashtags","_searchResults","searchResults","node","useRef","intl","useIntl","dispatch","value","state","search","submittedValue","results","suggestions","items","trendingStatuses","trending_statuses","trends","submitted","selectedFilter","filter","filterByAccount","accountId","account","_state$accounts$get","get","acct","selectFilter","newActiveFilter","getCurrentIndex","id","_resultsIds","resultsIds","keySeq","findIndex","key","handleMoveUp","elementIndex","selectChild","handleMoveDown","index","_node$current","current","scrollIntoView","behavior","done","element","document","querySelector","concat","focus","useEffect","loaded","noResultsMessage","hasMore","placeholderComponent","accountsHasMore","accountsLoaded","map","isEmpty","defaultMessage","values","term","suggestion","statusesHasMore","statusesLoaded","statusId","onMoveUp","onMoveDown","hashtagsHasMore","hashtagsLoaded","hashtag","name","space","iconClassName","src","onClick","text","formatMessage","action","activeItem","ref","scrollKey","isLoading","showLoading","onLoadMore","placeholderCount","itemClassName","heading","withHeader","label","autoFocus","autoSubmit"],"sourceRoot":""}